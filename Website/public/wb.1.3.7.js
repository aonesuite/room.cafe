var WhiteWebSdk=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=114)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23);t.Library=r.Library,t.transient=r.transient;var i=n(66);t.RoomMode=i.RoomMode;var o=n(67);t.AkkoVersion=o.AkkoVersion;var a=n(126);t.AkkoFactory=a.AkkoFactory;var s=n(13);t.__context=s.__context,t.__register=s.__register,t.isAkkoObject=s.isAkkoObject,t.getClassReflection=s.getClassReflection;var c=n(15);t.getContext=c.getContext,t.createElement=c.createElement;var u=n(41);t.noEffects=u.noEffects,t.event=u.event;var p=n(19);t.AdminObserverId=p.AdminObserverId;var l=n(82);t.FramesSequenceFactory=l.FramesSequenceFactory;var h=n(7);t.findIdentifierWith=h.findIdentifierWith,t.stringWithIdentifier=h.stringWithIdentifier,t.isNullIdentifier=h.isNullIdentifier,t.isIdentifierEquals=h.isIdentifierEquals,t.translateToAckFrame=h.translateToAckFrame,t.FramePicker=h.FramePicker,t.ActionFrameType=h.ActionFrameType,t.EventScope=h.EventScope;var f=n(72);t.KickReason=f.KickReason,t.ImagePhase=f.ImagePhase,t.MagixPhase=f.MagixPhase,t.ReconstructorPhase=f.ReconstructorPhase,t.ReconstructorFactory=f.ReconstructorFactory},function(e,t,n){"use strict";e.exports=n(159)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/abstract/Editable","1.2.0"),o=i.creator,a=i.setter,s=i.caller,c=i.getter,u=n(0);n(0);var p=n(3);n(3);var l=n(9);n(9),i.defineType("0",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{selectedBy:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Undefined)]),context:i.getReferenceType("../../framework:ApplianceContext"),highlightAuthorIds:i.getObjectType({index:i.getSingletonType(i.TypeEnum.Number)})}}),i.getReferenceType("../../framework:ApplianceComponent")])),i.defineExport("0","Editable");var h=function(e){function t(t){var n=e.call(this)||this;return n.highlightAuthorIds=o([]),a(n,"context",t),n}return r(t,e),t.prototype.isHighlightBy=function(e){return-1!==s(c(this,"highlightAuthorIds"),"indexOf",[e])},t.prototype.setHighlightBy=function(e,t){s(this,"authorsPropertySetValue",[c(this,"highlightAuthorIds"),e,t])},t.prototype.authorsPropertySetValue=function(e,t,n){var r=s(e,"indexOf",[n]);t?-1===r&&s(e,"push",[n]):-1!==r&&s(e,"splice",[r,1])},t.prototype.renderTagBoxes=function(){var e=s(u,"getContext",[]).observerId,t=s(this,"isHighlightBy",[e]);if(!t&&void 0===c(this,"selectedBy"))return null;var n=c(this,"hitTestingBoxMargin"),r=o({highlight:t,color:c(s(c(this,"context"),"getMemberState",[c(this,"selectedBy")]),"strokeColor"),selectedBy:void 0===c(this,"selectedBy")?c(l.BelongsTo,"None"):c(this,"selectedBy")===e?c(l.BelongsTo,"Me"):c(l.BelongsTo,"Others")});return o({key:c(this,"key"),type:"editable",payload:r,left:c(this,"originX")-n,top:c(this,"originY")-n,right:c(this,"originX")+c(this,"width")+n,bottom:c(this,"originY")+c(this,"height")+n})},t.prototype.renderSvg=function(){return u.createElement("g",{key:c(this,"key"),transform:"translate("+c(this,"originX")+","+c(this,"originY")+")"},s(this,"renderSvgContent",[]))},t}(i.wrapSuperClass(p.ApplianceComponent));t.Editable=h,i.defineClass("0",h,{superClass:"../../framework:ApplianceComponent",name:"Editable",properties:[{name:"selectedBy",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"context",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../../framework:ApplianceContext"),decorators:[]},{name:"highlightAuthorIds",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getObjectType({index:i.getSingletonType(i.TypeEnum.Number)}),decorators:[]}],methods:[{name:"isHighlightBy",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"setHighlightBy",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Boolean),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"authorsPropertySetValue",isPublic:!1,parameterTypes:[i.getObjectType({index:i.getSingletonType(i.TypeEnum.Number)}),i.getSingletonType(i.TypeEnum.Boolean),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"renderTagBoxes",isPublic:!0,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("../../framework:TagBox"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"renderSvg",isPublic:!0,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.Any),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]}]}),i=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("framework/index","1.2.0");n(25),r.exportExternal("./MembersManager",{MemberInformation:"MemberInformation",MemberDisplayer:"MemberDisplayer"}),n(32),r.exportExternal("./TypeDefinitions"),n(26),r.exportExternal("./ApplianceComponent"),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(26)),r=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("appState/index","1.2.0");n(45),n(85),n(45),r.exportExternal("./Color"),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(45)),n(85),r.exportExternal("./WorldViewRectangle"),r.defineType("0",r.getSingletonType(r.TypeEnum.Any)),r.defineExport("0","DeviceType"),function(e){e.Desktop="desktop",e.Touch="touch"}(t.DeviceType||(t.DeviceType={})),r.defineType("1",r.getObjectType({properties:{currentSceneIndex:r.getSingletonType(r.TypeEnum.Number)}})),r.defineExport("1","GlobalState"),r.defineType("2",r.getObjectType({properties:{currentApplianceName:r.getSingletonType(r.TypeEnum.String),strokeColor:r.getReferenceType("./Color:Color"),strokeWidth:r.getSingletonType(r.TypeEnum.Number),textSize:r.getSingletonType(r.TypeEnum.Number)}})),r.defineExport("2","MemberState"),r.defineType("3",r.getSingletonType(r.TypeEnum.Any)),r.defineExport("3","ViewMode"),function(e){e.Freedom="freedom",e.Follower="follower",e.Broadcaster="broadcaster"}(t.ViewMode||(t.ViewMode={})),r.defineType("4",r.getCompoundType(r.TypeEnum.And,[r.getReferenceType("./WorldViewRectangle:WorldViewRectangle"),r.getObjectType({properties:{pixelWidth:r.getSingletonType(r.TypeEnum.Number),mode:r.getSingletonType(r.TypeEnum.Any)}})])),r.defineExport("4","ViewState"),r=null},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("hittest/index","1.2.0");n(33),i.exportExternal("./BasicTester",{inCircle:"inCircle"});var o=n(33);t.inCircle=o.inCircle,n(8),i.exportExternal("./TypeDefinitions",{RectangleTestingResult:"RectangleTestingResult"});var a=n(8);t.RectangleTestingResult=a.RectangleTestingResult,n(34),i.exportExternal("./ConvexPolygonTester"),r(n(34)),n(87),i.exportExternal("./SectorTester"),r(n(87)),n(88),i.exportExternal("./PolylineTester"),r(n(88)),i=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("impls/tools/index","1.2.0");n(93),r.exportExternal("./Gesture",{Gesture:"Gesture"});var i=n(93);t.Gesture=i.Gesture,n(20),r.exportExternal("./EditableSelector"),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(20)),r=null},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(29)),r(n(38)),r(n(129)),r(n(134));var i=n(39);t.findIdentifierWith=i.findIdentifierWith;var o=n(37);t.bindIdentifier=o.bindIdentifier},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("hittest/TypeDefinitions","1.2.0");r.defineType("0",r.getObjectType({properties:{x:r.getSingletonType(r.TypeEnum.Number),y:r.getSingletonType(r.TypeEnum.Number)}})),r.defineExport("0","Point"),r.defineType("1",r.getSingletonType(r.TypeEnum.Any)),r.defineExport("1","RectangleTestingResult"),function(e){e[e.Disjoint=0]="Disjoint",e[e.Cross=1]="Cross",e[e.IncludeRectangle=2]="IncludeRectangle",e[e.IncludeByRectangle=3]="IncludeByRectangle"}(t.RectangleTestingResult||(t.RectangleTestingResult={})),r=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("impls/types/index","1.2.0");n(46),n(89),n(46),r.exportExternal("./EditablePayload"),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(46)),n(89),r.exportExternal("./TextareaTypes"),r.defineType("0",r.getObjectType({properties:{myText:r.getReferenceType("./TextareaTypes:TextareaEditPayload"),otherText:r.getReferenceType("./TextareaTypes:TextareaStatePayload"),selectedGroup:r.getReferenceType("./EditablePayload:SelectedGroupPayload"),editable:r.getReferenceType("./EditablePayload:EditablePayload"),editor:r.getReferenceType("./EditablePayload:EditorPayload")}})),r.defineExport("0","TagDefinitions"),r=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("hittest/RectangleTester","1.2.0"),o=i.creator,a=i.caller,s=i.getter,c=n(8);n(8),i.defineType("0",i.getObjectType({})),i.defineExport("0","RectangleTester");var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.testPoint=function(e,t,n,r,i,o){return i>=e&&i<=e+n&&o>=t&&o<=t+r},t.iterate=function(e,t,n,r,i){i(e,t),i(e+n,t),i(e+n,t+r),i(e,t+r)},t.allPoints=function(e,t,n,r){return o([o({x:e,y:t}),o({x:e+n,y:t}),o({x:e+n,y:t+r}),o({x:e,y:t+r})])},t.testRect=function(e,t,n,r,i,o,u,p){var l=a(this,"testSegment",[e,e+n,i,i+u]),h=a(this,"testSegment",[t,t+r,o,o+p]);return l===s(c.RectangleTestingResult,"Disjoint")||h===s(c.RectangleTestingResult,"Disjoint")?s(c.RectangleTestingResult,"Disjoint"):l===s(c.RectangleTestingResult,"Cross")||h===s(c.RectangleTestingResult,"Cross")?s(c.RectangleTestingResult,"Cross"):l===s(c.RectangleTestingResult,"IncludeRectangle")&&h===s(c.RectangleTestingResult,"IncludeRectangle")?s(c.RectangleTestingResult,"IncludeRectangle"):l===s(c.RectangleTestingResult,"IncludeByRectangle")&&h===s(c.RectangleTestingResult,"IncludeByRectangle")?s(c.RectangleTestingResult,"IncludeByRectangle"):s(c.RectangleTestingResult,"Cross")},t.testSegment=function(e,t,n,r){var i=e>n;if(i){var o=e,a=t;e=n,n=o,t=r,r=a}return s(c.RectangleTestingResult,t<n?"Disjoint":t<r?"Cross":i?"IncludeByRectangle":"IncludeRectangle")},t}(i.baseClass());t.RectangleTester=u,i.defineClass("0",u,{name:"RectangleTester",properties:[],methods:[]}),i=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("impls/TypeDefinitions","1.2.0");r.defineType("0",r.getObjectType({properties:{x:r.getSingletonType(r.TypeEnum.Number),y:r.getSingletonType(r.TypeEnum.Number)}})),r.defineExport("0","Point"),r.defineType("1",r.getObjectType({properties:{x:r.getSingletonType(r.TypeEnum.Number),y:r.getSingletonType(r.TypeEnum.Number),width:r.getSingletonType(r.TypeEnum.Number),height:r.getSingletonType(r.TypeEnum.Number)}})),r.defineExport("1","Rectangle"),r.defineType("2",r.getObjectType({properties:{uuid:r.getSingletonType(r.TypeEnum.String),centerX:r.getSingletonType(r.TypeEnum.Number),centerY:r.getSingletonType(r.TypeEnum.Number),width:r.getSingletonType(r.TypeEnum.Number),height:r.getSingletonType(r.TypeEnum.Number)}})),r.defineExport("2","ImageInformation"),r=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),n(0).__register();var i=n(0).__context("index","1.2.0"),o=i.creator,a=i.createLibrary,s=n(84);n(84),n(4);var c=n(47);n(47);var u=n(51);n(51);var p=n(48);n(48);var l=n(50);n(50);var h=n(52);n(52);var f=n(53);n(53);var d=n(49);n(49),n(97),i.exportExternal("./TypeDefinitions"),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(97));i.defineType("0",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({}),i.getReferenceType("./abstractApplianceManasger:AbstractApplianceManager")])),i.defineExportDefault("0");var y=function(e){function t(){return e.call(this,o({currentSceneIndex:0}))||this}return r(t,e),t.prototype.createConstructors=function(){return o({selector:c.Selector,pencil:u.PencilAppliance,rectangle:p.RectangleAppliance,ellipse:l.EllipseAppliance,eraser:h.Eraser,arrow:f.ArrowAppliance,text:d.TextAppliance})},t.prototype.createMemberState=function(e){return o({currentApplianceName:"pencil",strokeColor:e,strokeWidth:4,textSize:16})},t}(i.wrapSuperClass(s.AbstractApplianceManager));i.defineClass("0",y,{superClass:"./abstractApplianceManasger:AbstractApplianceManager",name:"ApplianceManager",properties:[],methods:[{name:"createConstructors",isPublic:!1,parameterTypes:[],returnType:i.getObjectType({key:i.getReferenceType("./abstractApplianceManasger:ApplianceClass")}),decorators:[]},{name:"createMemberState",isPublic:!1,parameterTypes:[i.getReferenceType("./appState:Color")],returnType:i.getReferenceType("./appState:MemberState"),decorators:[]}]}),t.default=a(y),i=null},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(68)),r(n(69)),r(n(128))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/TextareaShape","1.2.0"),o=i.creator,a=i.setter,s=i.getter,c=i.caller,u=n(0);n(0),n(9);var p=n(2);n(2),n(3),n(4),i.defineType("0",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{originX:i.getSingletonType(i.TypeEnum.Number),originY:i.getSingletonType(i.TypeEnum.Number),width:i.getSingletonType(i.TypeEnum.Number),height:i.getSingletonType(i.TypeEnum.Number),textSize:i.getSingletonType(i.TypeEnum.Number),editedBy:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Undefined)]),textColor:i.getReferenceType("../appState:Color"),textareaBox:i.getReferenceType("./types:TextareaBox"),isTextEmpty:i.getSingletonType(i.TypeEnum.Boolean),selectable:i.getSingletonType(i.TypeEnum.Boolean),hitTestingBoxMargin:i.getSingletonType(i.TypeEnum.Number),currentScale:i.getSingletonType(i.TypeEnum.Number)}}),i.getReferenceType("./abstract/Editable:Editable")])),i.defineExport("0","TextareaShape");var l=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.originX=0,i.originY=0,i.width=0,i.height=0,i.textSize=16,i.textareaBox=o({scale:1,width:0,height:0,originalText:"",textLines:o([])}),a(i,"originX",n),a(i,"originY",r),a(i,"textColor",s(c(t,"getMemberState",[]),"strokeColor")),i}return r(t,e),Object.defineProperty(t.prototype,"isTextEmpty",{get:function(){return""===s(s(this,"textareaBox"),"originalText")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectable",{get:function(){return s(this,"editedBy")!==s(c(u,"getContext",[]),"authorId")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return s(this,"textSize")/4},enumerable:!0,configurable:!0}),t.prototype.setTextareaBox=function(e){a(this,"textareaBox",e),a(this,"width",s(e,"width")*s(e,"scale")),a(this,"height",s(e,"height")*s(e,"scale"))},t.prototype.adjustToKeepUniformScale=function(){if(0!==s(s(this,"textareaBox"),"width")&&0!==s(s(this,"textareaBox"),"height")){var e=s(this,"width")/s(s(this,"textareaBox"),"width"),t=s(this,"height")/s(s(this,"textareaBox"),"height"),n=c(Math,"min",[e,t]),r=s(s(this,"textareaBox"),"width")*n,i=s(s(this,"textareaBox"),"height")*n;a(this,"originX",s(this,"originX")+(s(this,"width")-r)/2),a(this,"originY",s(this,"originY")+(s(this,"height")-i)/2),a(this,"width",r),a(this,"height",i)}},Object.defineProperty(t.prototype,"currentScale",{get:function(){if(0===s(s(this,"textareaBox"),"width")||0===s(s(this,"textareaBox"),"height"))return 1;var e=s(this,"width")/s(s(this,"textareaBox"),"width"),t=s(this,"height")/s(s(this,"textareaBox"),"height");return c(Math,"min",[e,t])},enumerable:!0,configurable:!0}),t.prototype.renderTagBoxes=function(){return s(this,"editedBy")===s(c(u,"getContext",[]),"observerId")?c(this,"renderTagBoxesWhenEditedByMe",[]):void 0!==s(this,"editedBy")?c(this,"renderTagBoxesWhenEditedByOther",[]):c(this,"renderTagBoxes",[],e.prototype)},t.prototype.renderTagBoxesWhenEditedByMe=function(){var e=s(this,"hitTestingBoxMargin"),t=s(this,"currentScale"),n=o({margin:e,scale:t,color:s(c(s(this,"context"),"getMemberState",[]),"strokeColor"),textColor:s(this,"textColor"),textSize:s(this,"textSize"),originalText:s(s(this,"textareaBox"),"originalText")});return o({key:s(this,"key"),type:"myText",payload:n,left:s(this,"originX"),top:s(this,"originY"),right:s(this,"originX")+s(this,"width"),bottom:s(this,"originY")+s(this,"height")})},t.prototype.renderTagBoxesWhenEditedByOther=function(){var e=s(this,"hitTestingBoxMargin"),t=o({margin:e,editorId:s(this,"editedBy"),textSize:s(this,"textSize"),color:s(c(s(this,"context"),"getMemberState",[s(this,"editedBy")]),"strokeColor"),information:c(s(this,"context"),"getInformationWithMemberId",[s(this,"editedBy")])});return o({key:s(this,"key"),type:"otherText",payload:t,left:s(this,"originX"),top:s(this,"originY"),right:s(this,"originX")+s(this,"width"),bottom:s(this,"originY")+s(this,"height")})},t.prototype.renderSvgContent=function(){if(s(this,"editedBy")===s(c(u,"getContext",[]),"observerId"))return null;var e=this.currentScale,t=s(this,"textSize")*e,n=s(this,"textColor"),r=n[0],i=n[1],o=n[2];return u.createElement("g",{key:s(this,"key"),x:0,y:0},c(s(s(this,"textareaBox"),"textLines"),"map",[function(n,a){var s=n.dx,c=n.dy,p=n.text,l=n.textLength;return u.createElement("text",{key:""+a,x:s*e,y:c*e,textLength:l*e,fill:"rgb("+r+","+i+","+o+")",fontSize:t,dominantBaseline:"central"},p)}]))},t}(i.wrapSuperClass(p.Editable));t.TextareaShape=l,i.defineClass("0",l,{superClass:"./abstract/Editable:Editable",name:"TextareaShape",properties:[{name:"originX",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"originY",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"width",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"height",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"textSize",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"editedBy",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"textColor",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../appState:Color"),decorators:[]},{name:"textareaBox",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getReferenceType("./types:TextareaBox"),decorators:[]},{name:"isTextEmpty",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"selectable",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"hitTestingBoxMargin",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"currentScale",isPublic:!1,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]}],methods:[{name:"setTextareaBox",isPublic:!0,parameterTypes:[i.getReferenceType("./types:TextareaBox")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"adjustToKeepUniformScale",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"renderTagBoxes",isPublic:!0,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("../framework:TagBox"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"renderTagBoxesWhenEditedByMe",isPublic:!1,parameterTypes:[],returnType:i.getReferenceType("../framework:TagBox"),decorators:[]},{name:"renderTagBoxesWhenEditedByOther",isPublic:!1,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("../framework:TagBox"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"renderSvgContent",isPublic:!1,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.Any),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]}]}),i=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13);!function(e){e.Real="real",e.Illusion="illusion",e.NoEffects="noEffects"}(t.Environment||(t.Environment={}));var i=[],o=void 0;t.isInMagix=function(){return!!o},t.getContext=function(){if(!o)throw new Error("Context not found. maybe you called it out of Magix");return o.context},t.createElement=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!o)throw new Error("can't create JSX dom. maybe you called it out of Magix");if(!o.createElement)throw new Error("can't create JSX dom. you didn't set jsxFactory");return o.createElement.apply(o,e)},t.runWithContext=function(e,t,n,a){return r.runWithAccessorContext(e,function(){try{return o={context:t,createElement:n},i.push(o),a()}finally{i.pop(),o=i[i.length-1]}})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("framework/SceneNode","1.2.0"),o=i.getter,a=i.caller,s=i.setter,c=i.creator,u=n(0);n(0),n(1),n(32);var p=n(86);n(86);var l=n(2);n(2);var h=n(26);n(26),n(4);var f=n(5);n(5);var d=n(10);n(10),i.defineType("0",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{ppt:i.getCompoundType(i.TypeEnum.Or,[i.getObjectType({properties:{src:i.getSingletonType(i.TypeEnum.String),width:i.getSingletonType(i.TypeEnum.Number),height:i.getSingletonType(i.TypeEnum.Number)}}),i.getSingletonType(i.TypeEnum.Undefined)]),componentsCount:i.getSingletonType(i.TypeEnum.Number)}}),i.getReferenceType("./ApplianceComponentContainer:ApplianceComponentContainer")])),i.defineExport("0","SceneNode");var y=function(e){function t(t){var n=e.call(this)||this;if(t){var r=new g(o(t,"src"),o(t,"width"),o(t,"height"));a(n,"addComponentAt",[r,0]),s(n,"ppt",t)}return n}return r(t,e),t.prototype.editableWithHitIdentifies=function(e){var t=e[0];return void 0===t?void 0:a(this,"findComponentFromTop",[function(e){return a(u,"isIdentifierEquals",[t,o(e,"identifier")])}])},t.prototype.editablesWithHitIdentifies=function(e){for(var t=c([]),n=function(e){var n=a(r,"findComponentFromTop",[function(t){return a(u,"isIdentifierEquals",[e,o(t,"identifier")])}]);n&&a(t,"push",[n])},r=this,i=0,s=e;i<s.length;i++){n(s[i])}return t},Object.defineProperty(t.prototype,"componentsCount",{get:function(){return o(o(this,"components"),"length")},enumerable:!0,configurable:!0}),t.prototype.shellRectangle=function(){if(0===o(o(this,"components"),"length"))return c({originX:0,originY:0,width:0,height:0});for(var e=o(Number,"MAX_SAFE_INTEGER"),t=o(Number,"MAX_SAFE_INTEGER"),n=o(Number,"MIN_SAFE_INTEGER"),r=o(Number,"MIN_SAFE_INTEGER"),i=0,s=o(this,"components");i<s.length;i++){var u=s[i],p=u.originX,h=u.originY,f=u.width,d=u.height,y=u instanceof l.Editable?o(u,"hitTestingBoxMargin"):0;e=a(Math,"min",[e,p-y]),t=a(Math,"min",[t,h-y]),n=a(Math,"max",[n,p+f+y]),r=a(Math,"max",[r,h+d+y])}return c({originX:e,originY:t,width:n-e,height:r-t})},t.prototype.renderTagBoxes=function(){for(var e=c([]),t=0,n=o(this,"components");t<n.length;t++){var r=n[t],i=a(r,"renderTagBoxes",[]);i&&a(e,"push",[i])}return e},t.prototype.renderSvg=function(e){for(var n=c([]),r=0,i=o(this,"components");r<i.length;r++){var s=i[r];if(a(t,"isComponentVisibleInViewRectangle",[s,e])){var u=a(s,"renderSvg",[]);u&&(a(t,"isSvgElementLackOfKey",[u])&&a(console,"warn",["lack string key for component "+(s&&o(o(s,"constructor"),"name"))]),a(n,"push",[u]))}}return n},t.isComponentVisibleInViewRectangle=function(e,t){return!t||o(f.RectangleTestingResult,"Disjoint")!==a(d.RectangleTester,"testRect",[o(t,"originX"),o(t,"originY"),o(t,"width"),o(t,"height"),o(e,"originX"),o(e,"originY"),o(e,"width"),o(e,"height")])},t.isSvgElementLackOfKey=function(e){return"object"==typeof e&&null!==e&&(!(e instanceof Array)&&"string"!=typeof o(e,"key"))},t}(i.wrapSuperClass(p.ApplianceComponentContainer));t.SceneNode=y,i.defineClass("0",y,{superClass:"./ApplianceComponentContainer:ApplianceComponentContainer",name:"SceneNode",properties:[{name:"ppt",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getCompoundType(i.TypeEnum.Or,[i.getObjectType({properties:{src:i.getSingletonType(i.TypeEnum.String),width:i.getSingletonType(i.TypeEnum.Number),height:i.getSingletonType(i.TypeEnum.Number)}}),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"componentsCount",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]}],methods:[{name:"editableWithHitIdentifies",isPublic:!0,parameterTypes:[i.getObjectType({index:i.getObjectType({index:i.getSingletonType(i.TypeEnum.Number)})})],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("../impls/abstract/Editable:Editable"),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"editablesWithHitIdentifies",isPublic:!0,parameterTypes:[i.getObjectType({index:i.getObjectType({index:i.getSingletonType(i.TypeEnum.Number)})})],returnType:i.getObjectType({index:i.getReferenceType("../impls/abstract/Editable:Editable")}),decorators:[]},{name:"shellRectangle",isPublic:!0,parameterTypes:[],returnType:i.getReferenceType("../appState:WorldViewRectangle"),decorators:[]},{name:"renderTagBoxes",isPublic:!0,parameterTypes:[],returnType:i.getObjectType({index:i.getReferenceType("./TypeDefinitions:TagBox")}),decorators:[]},{name:"renderSvg",isPublic:!0,parameterTypes:[i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("../appState:WorldViewRectangle"),i.getSingletonType(i.TypeEnum.Undefined)])],returnType:i.getObjectType({index:i.getSingletonType(i.TypeEnum.Any)}),decorators:[]}]}),i.defineType("1",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{_src:i.getSingletonType(i.TypeEnum.String),width:i.getSingletonType(i.TypeEnum.Number),height:i.getSingletonType(i.TypeEnum.Number),hitTestingBoxMargin:i.getSingletonType(i.TypeEnum.Number),originX:i.getSingletonType(i.TypeEnum.Number),originY:i.getSingletonType(i.TypeEnum.Number),src:i.getSingletonType(i.TypeEnum.String)}}),i.getReferenceType("./ApplianceComponent:ApplianceComponent")]));var g=function(e){function t(t,n,r){var i=e.call(this)||this;return s(i,"_src",t),s(i,"width",n),s(i,"height",r),i}return r(t,e),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originX",{get:function(){return-o(this,"width")/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originY",{get:function(){return-o(this,"height")/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"src",{get:function(){return o(this,"_src")},enumerable:!0,configurable:!0}),t.prototype.renderSvg=function(){return u.createElement("image",{key:o(this,"key"),xlinkHref:a(o(a(u,"getContext",[]),"resource"),"convertIdToUrl",[o(this,"_src")]),x:o(this,"originX"),y:o(this,"originY"),width:o(this,"width"),height:o(this,"height")})},t}(i.wrapSuperClass(h.ApplianceComponent));i.defineClass("1",g,{superClass:"./ApplianceComponent:ApplianceComponent",name:"BackgroundImage",properties:[{name:"_src",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.String),decorators:[]},{name:"width",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"height",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"hitTestingBoxMargin",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"originX",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"originY",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"src",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.String),decorators:[]}],methods:[{name:"renderSvg",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Any),decorators:[]}]}),i=null},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(176)),r(n(104)),r(n(177)),r(n(178))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(115))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(135)),r(n(76)),r(n(77));var i=n(40);t.AdminObserverId=i.AdminObserverId},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("impls/tools/EditableSelector","1.2.0"),i=r.caller,o=r.creator,a=r.getter,s=n(2);n(2);var c=n(5);function u(e,t){return e<=1&&t<=1}n(5),n(16),t.willIgnoreSelectingBox=u,t.setHighlightNothing=function(e,t){i(e,"forEachComponents",[function(e){e instanceof s.Editable&&i(e,"setHighlightBy",[!1,t])}])},t.findHighlightComponent=function(e,t){return i(e,"findComponentFromTop",[function(e){return e instanceof s.Editable&&i(e,"isHighlightBy",[t])}])},t.searchEditableComponentsByPoint=function(e,t,n,r){var c=o([]);return i(e,"forEachComponents",[function(e){e instanceof s.Editable&&a(e,"selectable")&&i(e,"pointHitTest",[t,n,r])&&i(c,"push",[e])}]),c},t.searchEditableComponentsByRectangle=function(e,t,n,r,p){if(u(r,p))return o([]);var l=o([]);return i(e,"forEachComponents",[function(e){e instanceof s.Editable&&a(e,"selectable")&&i(e,"rectHitTest",[t,n,r,p])!==a(c.RectangleTestingResult,"Disjoint")&&i(l,"push",[e])}]),l},r=null},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("hittest/Geometry","1.2.0"),o=i.caller,a=i.getter,s=i.creator,c=i.setter;t.linearDistance=function(e,t){return o(Math,"abs",[a(e,"x")-a(t,"x")])+o(Math,"abs",[a(e,"y")-a(t,"y")])},t.distance=function(e,t){var n=a(e,"x")-a(t,"x"),r=a(e,"y")-a(t,"y");return o(Math,"sqrt",[n*n+r*r])},t.verticalVector=function(e){var t=e.x,n=e.y;return s({x:-n,y:t})},t.dotProduct=function(e,t){return a(e,"x")*a(t,"x")+a(e,"y")*a(t,"y")},t.isZero=function(e){return o(Math,"abs",[e])<1e-6},t.unitVector=function(e){var t=o(Math,"sqrt",[a(e,"x")*a(e,"x")+a(e,"y")*a(e,"y")]);return c(e,"x",a(e,"x")/t),c(e,"y",a(e,"y")/t),e},t.plus=function(e,t){return s({x:a(e,"x")+a(t,"x"),y:a(e,"y")+a(t,"y")})},t.multiply=function(e,t){return s({x:e*a(t,"x"),y:e*a(t,"y")})},t.triangleArea=function(e,t,n){var r=0;return r+=(a(t,"y")+a(e,"y"))*(a(t,"x")-a(e,"x")),r+=(a(n,"y")+a(t,"y"))*(a(n,"x")-a(t,"x")),r+=(a(e,"y")+a(n,"y"))*(a(e,"x")-a(n,"x")),o(Math,"abs",[r])/2},t.projectionPoint=function(e,t,n){return(a(n,"x")-a(e,"x"))*a(t,"x")+(a(n,"y")-a(e,"y"))*a(t,"y")},t.pointByProject=function(e,t,n){var i=s(r({},t));return c(i,"x",a(i,"x")*n),c(i,"y",a(i,"y")*n),c(i,"x",a(i,"x")+a(e,"x")),c(i,"y",a(i,"y")+a(e,"y")),i},t.meansOverlap=function(e){var t=e.x,n=e.y;return o(Number,"isNaN",[t])&&o(Number,"isNaN",[n])},i=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("impls/tools/TextareaManager","1.2.0"),i=r.getter,o=r.caller,a=r.setter,s=n(0);n(0),n(16),n(9);var c=n(14);function u(e,t){return o(e,"findComponentFromTop",[function(e){return e instanceof c.TextareaShape&&i(e,"editedBy")===t}])}n(14),t.updateTextarea=function(e,t){var n=u(e,i(o(s,"getContext",[]),"authorId"));n&&o(n,"setTextareaBox",[t])},t.releaseAllTextarea=function(e){o(e,"forEachComponents",[function(e){e instanceof c.TextareaShape&&a(e,"editedBy",void 0)}])},t.releaseTextareaEditedBy=function(e,t){var n=u(e,t);n&&(i(n,"isTextEmpty")?o(e,"removeComponent",[n]):a(n,"editedBy",void 0))},t.textareaEditedBy=u,r=null},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(18)),r(n(60)),r(n(119)),r(n(64))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(143);t.playerBufferFactory=new r.PlayerBufferFactory,function(e){e.Realtime="realtime",e.Reconstruction="reconstruction"}(t.PlayerBufferMode||(t.PlayerBufferMode={})),function(e){e.Playing="playing",e.Pausing="pausing",e.Empty="empty"}(t.PlayerBufferPhase||(t.PlayerBufferPhase={}))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0).__context("framework/MembersManager","1.2.0"),a=o.setter,s=o.getter,c=o.creator,u=o.caller,p=o.remover;n(3);var l=n(4);n(4),o.defineType("0",o.getObjectType({properties:{id:o.getSingletonType(o.TypeEnum.Number),nickName:o.getSingletonType(o.TypeEnum.String),isOwner:o.getSingletonType(o.TypeEnum.Boolean),avatar:o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.String),o.getSingletonType(o.TypeEnum.Undefined)])}})),o.defineExport("0","MemberInformation"),o.defineType("1",o.getCompoundType(o.TypeEnum.And,[o.getReferenceType("../appState:ViewState"),o.getObjectType({properties:{memberId:o.getSingletonType(o.TypeEnum.Number),deviceType:o.getReferenceType("../appState:DeviceType"),isRtcConnected:o.getSingletonType(o.TypeEnum.Boolean),isPressed:o.getSingletonType(o.TypeEnum.Boolean),isActivity:o.getSingletonType(o.TypeEnum.Boolean),isCursorInScene:o.getSingletonType(o.TypeEnum.Boolean),currentApplianceName:o.getSingletonType(o.TypeEnum.String),color:o.getReferenceType("../appState:Color"),cursorX:o.getSingletonType(o.TypeEnum.Number),cursorY:o.getSingletonType(o.TypeEnum.Number),information:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("#0"),o.getSingletonType(o.TypeEnum.Undefined)])}})])),o.defineExport("1","MemberDisplayer"),o.defineType("2",o.getObjectType({properties:{memberId:o.getSingletonType(o.TypeEnum.Number),deviceType:o.getReferenceType("../appState:DeviceType"),information:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("#0"),o.getSingletonType(o.TypeEnum.Undefined)]),appliances:o.getObjectType({key:o.getReferenceType("./index:Appliance")}),memberState:o.getReferenceType("../appState:MemberState")}})),o.defineExport("2","MemberConstructParams"),o.defineType("3",o.getObjectType({properties:{isRtcConnected:o.getSingletonType(o.TypeEnum.Boolean),_memberId:o.getSingletonType(o.TypeEnum.Number),_deviceType:o.getReferenceType("../appState:DeviceType"),_information:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("#0"),o.getSingletonType(o.TypeEnum.Undefined)]),appliances:o.getObjectType({key:o.getReferenceType("./index:Appliance")}),cursorX:o.getSingletonType(o.TypeEnum.Number),cursorY:o.getSingletonType(o.TypeEnum.Number),memberState:o.getReferenceType("../appState:MemberState"),viewState:o.getReferenceType("../appState:ViewState"),isPressed:o.getSingletonType(o.TypeEnum.Boolean),isCursorInScene:o.getSingletonType(o.TypeEnum.Boolean),information:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("#0"),o.getSingletonType(o.TypeEnum.Undefined)]),memberId:o.getSingletonType(o.TypeEnum.Number),deviceType:o.getReferenceType("../appState:DeviceType"),displayer:o.getReferenceType("#1"),currentAppliance:o.getReferenceType("./index:Appliance")}}));var h=function(e){function t(t,n,r,i,o,s){var c=e.call(this)||this;return c.isRtcConnected=!1,c.cursorX=0,c.cursorY=0,c.isPressed=!1,c.isCursorInScene=!1,a(c,"_memberId",t),a(c,"_deviceType",n),a(c,"appliances",r),a(c,"memberState",i),a(c,"viewState",o),a(c,"_information",s),c}return r(t,e),Object.defineProperty(t.prototype,"information",{get:function(){return s(this,"_information")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"memberId",{get:function(){return s(this,"_memberId")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deviceType",{get:function(){return s(this,"_deviceType")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayer",{get:function(){var e=this.cursorX,t=this.cursorY,n=s(this,"currentAppliance").fixedCursorInScenePoint;if(n){var r=n.x,o=n.y,a=s(this,"viewState"),p=a.originX,l=a.originY,h=a.width,f=a.height;e=0===h?.5:(r-p)/h,t=0===f?.5:(o-l)/f}return c(i({},s(this,"viewState"),{cursorX:e,cursorY:t,memberId:s(this,"_memberId"),deviceType:s(this,"_deviceType"),isRtcConnected:s(this,"isRtcConnected"),isPressed:s(this,"isPressed"),isActivity:!!n||s(this,"isPressed"),isCursorInScene:!!n||s(this,"isCursorInScene")&&!u(this,"isCursorOutOfBounds",[]),currentApplianceName:s(s(this,"memberState"),"currentApplianceName"),color:s(s(this,"memberState"),"strokeColor"),information:s(this,"_information")}))},enumerable:!0,configurable:!0}),t.prototype.isCursorOutOfBounds=function(){return s(this,"cursorX")>1||s(this,"cursorX")<0||s(this,"cursorY")>1||s(this,"cursorY")<0},Object.defineProperty(t.prototype,"currentAppliance",{get:function(){return s(s(this,"appliances"),s(s(this,"memberState"),"currentApplianceName"))},enumerable:!0,configurable:!0}),t.prototype.setViewMode=function(e){a(s(this,"viewState"),"mode",e)},t.prototype.notifyAllThatSceneChanged=function(e){for(var t in s(this,"appliances"))u(s(s(this,"appliances"),t),"onSceneChanged",[e])},t.prototype.getMemberState=function(){return s(this,"memberState")},t.prototype.getViewState=function(){return s(this,"viewState")},t.prototype.setCursor=function(e,t,n,r){var i=s(this,"viewState"),o=i.originX,c=i.originY,u=i.width,p=i.height;a(this,"cursorX",0===u?.5:(e-o)/u),a(this,"cursorY",0===p?.5:(t-c)/p),void 0!==n&&a(this,"isCursorInScene",n),void 0!==r&&a(this,"isPressed",r)},t.prototype.changeToFollower=function(e){var t=s(this,"viewState");if(a(this,"viewState",c(i({},t,e,{mode:s(l.ViewMode,"Follower")}))),0!==s(t,"width")&&0!==s(t,"height")){var n=s(e,"width")/s(t,"width"),r=s(e,"height")/s(t,"height"),o=u(Math,"max",[n,r]),p=(s(t,"width")*o-s(e,"width"))/2,h=(s(t,"height")*o-s(e,"height"))/2;a(this,"cursorX",s(this,"cursorX")-p/s(e,"width")),a(this,"cursorY",s(this,"cursorY")-h/s(e,"height"))}},t.prototype.setMemberState=function(e){var t=s(this,"memberState");for(var n in a(this,"memberState",c(i({},t,e))),s(this,"appliances"))u(s(s(this,"appliances"),n),"onMemberStateChanged",[s(this,"memberState"),t]);return s(this,"memberState")},t.prototype.setViewState=function(e){var t=s(this,"viewState");return a(this,"viewState",c(i({},t,e))),s(this,"viewState")},t.prototype.dispatchMagixEvent=function(e,t){for(var n in s(this,"appliances"))u(s(s(this,"appliances"),n),"onMagixEvent",[e,t])},t.prototype.destroy=function(){for(var e in s(this,"appliances"))u(s(s(this,"appliances"),e),"onDestroy",[])},t}(o.baseClass());o.defineClass("3",h,{name:"Member",properties:[{name:"isRtcConnected",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getSingletonType(o.TypeEnum.Boolean),decorators:[]},{name:"_memberId",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getSingletonType(o.TypeEnum.Number),decorators:[]},{name:"_deviceType",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getReferenceType("../appState:DeviceType"),decorators:[]},{name:"_information",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("#0"),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[]},{name:"appliances",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getObjectType({key:o.getReferenceType("./index:Appliance")}),decorators:[]},{name:"cursorX",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getSingletonType(o.TypeEnum.Number),decorators:[]},{name:"cursorY",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getSingletonType(o.TypeEnum.Number),decorators:[]},{name:"memberState",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getReferenceType("../appState:MemberState"),decorators:[]},{name:"viewState",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getReferenceType("../appState:ViewState"),decorators:[]},{name:"isPressed",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getSingletonType(o.TypeEnum.Boolean),decorators:[]},{name:"isCursorInScene",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getSingletonType(o.TypeEnum.Boolean),decorators:[]},{name:"information",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("#0"),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[]},{name:"memberId",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getSingletonType(o.TypeEnum.Number),decorators:[]},{name:"deviceType",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getReferenceType("../appState:DeviceType"),decorators:[]},{name:"displayer",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getReferenceType("#1"),decorators:[]},{name:"currentAppliance",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getReferenceType("./index:Appliance"),decorators:[]}],methods:[{name:"isCursorOutOfBounds",isPublic:!1,parameterTypes:[],returnType:o.getSingletonType(o.TypeEnum.Boolean),decorators:[]},{name:"setViewMode",isPublic:!0,parameterTypes:[o.getReferenceType("../appState:ViewMode")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"notifyAllThatSceneChanged",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"getMemberState",isPublic:!0,parameterTypes:[],returnType:o.getReferenceType("../appState:MemberState"),decorators:[]},{name:"getViewState",isPublic:!0,parameterTypes:[],returnType:o.getReferenceType("../appState:ViewState"),decorators:[]},{name:"setCursor",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Number),o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Boolean),o.getSingletonType(o.TypeEnum.Undefined)]),o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Boolean),o.getSingletonType(o.TypeEnum.Undefined)])],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"changeToFollower",isPublic:!0,parameterTypes:[o.getReferenceType("../appState:WorldViewRectangle")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"setMemberState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Any)],returnType:o.getReferenceType("../appState:MemberState"),decorators:[]},{name:"setViewState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Any)],returnType:o.getReferenceType("../appState:ViewState"),decorators:[]},{name:"dispatchMagixEvent",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.String),o.getSingletonType(o.TypeEnum.Any)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"destroy",isPublic:!0,parameterTypes:[],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]}]}),o.defineType("4",o.getObjectType({properties:{initiativeColors:o.getObjectType({index:o.getReferenceType("../appState:Color")}),membersMap:o.getObjectType({index:o.getReferenceType("#3")}),directorId:o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Undefined)]),broadcasterId:o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Undefined)])}})),o.defineExport("4","MembersManager");var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initiativeColors=l.getInitiativeColors(),t.membersMap=c({}),t}return r(t,e),t.prototype.isMemberExits=function(e){return!!s(s(this,"membersMap"),e)},t.prototype.getBroadcasterId=function(){return s(this,"broadcasterId")},t.prototype.findMemberIdWithUserId=function(e){for(var t in s(this,"membersMap")){var n=s(s(this,"membersMap"),t);if(e===(s(n,"information")&&s(s(n,"information"),"id")))return parseInt(t)}},t.prototype.getInformationWithMemberId=function(e){return s(s(this,"membersMap"),e)&&s(s(s(this,"membersMap"),e),"information")},t.prototype.getMemberDisplayers=function(){var e=c([]);for(var t in s(this,"membersMap")){var n=s(s(this,"membersMap"),t);u(e,"push",[s(n,"displayer")])}return e},t.prototype.memberEnter=function(e){var t=e.memberId,n=e.deviceType,r=e.information,i=e.appliances,o=e.memberState;a(s(this,"membersMap"),t,new h(t,n,i,o,u(this,"enterMemberViewState",[]),r)),u(this,"compareDirector",[t,s(this,"directorId")])<0&&a(this,"directorId",t)},t.prototype.enterMemberViewState=function(){if(void 0===s(this,"broadcasterId"))return c({mode:s(l.ViewMode,"Freedom"),pixelWidth:1,originX:0,originY:0,width:0,height:0});var e=u(s(s(this,"membersMap"),s(this,"broadcasterId")),"getViewState",[]);return c({mode:s(l.ViewMode,"Follower"),pixelWidth:s(e,"pixelWidth"),originX:s(e,"originX"),originY:s(e,"originY"),width:s(e,"width"),height:s(e,"height")})},t.prototype.memberLeave=function(e){var t=s(s(this,"membersMap"),e);t&&(u(t,"destroy",[]),p(s(this,"membersMap"),e),s(this,"broadcasterId")===e&&u(this,"cancelBroadcaster",[]),u(this,"updateDirector",[]))},t.prototype.updateDirector=function(){var e=c([]);for(var t in s(this,"membersMap"))u(e,"push",[parseInt(t)]);0===s(e,"length")?a(this,"directorId",void 0):(u(e,"sort",[u(s(this,"compareDirector"),"bind",[this])]),a(this,"directorId",s(e,0)))},t.prototype.getDeviceType=function(e){return s(s(s(this,"membersMap"),e),"deviceType")},t.prototype.getMemberState=function(e){return u(s(s(this,"membersMap"),e),"getMemberState",[])},t.prototype.getMemberIdWithUserId=function(e){for(var t in s(this,"membersMap")){var n=s(s(this,"membersMap"),t);if(s(n,"information")&&s(s(n,"information"),"id")===e)return s(n,"memberId")}},t.prototype.getViewState=function(e){var t=s(s(this,"membersMap"),e);return t?u(t,"getViewState",[]):void 0!==s(this,"directorId")?u(s(s(this,"membersMap"),s(this,"directorId")),"getViewState",[]):c({mode:s(l.ViewMode,"Freedom"),pixelWidth:1,originX:0,originY:0,width:0,height:0})},t.prototype.setMemberState=function(e,t){return u(s(s(this,"membersMap"),e),"setMemberState",[t])},t.prototype.setViewState=function(e,t){var n=t.mode;n!==s(l.ViewMode,"Follower")||void 0!==s(this,"broadcasterId")&&s(this,"broadcasterId")!==e||(p(t,"mode"),n=void 0);var r=u(s(s(this,"membersMap"),e),"setViewState",[t]);return n===s(l.ViewMode,"Freedom")?s(this,"broadcasterId")===e&&u(this,"cancelBroadcaster",[]):n===s(l.ViewMode,"Broadcaster")?u(this,"becomeNewBroadcast",[e]):s(r,"mode")===s(l.ViewMode,"Broadcaster")&&u(this,"broadcastViewToAllRoom",[]),r},t.prototype.setCursor=function(e,t,n,r,i){u(s(s(this,"membersMap"),e),"setCursor",[t,n,r,i])},t.prototype.setRtcState=function(e,t){a(s(s(this,"membersMap"),e),"isRtcConnected",t)},t.prototype.dispatchMagixEvent=function(e,t,n){u(s(s(this,"membersMap"),e),"dispatchMagixEvent",[t,n])},t.prototype.notifyAllThatSceneChanged=function(e){for(var t in s(this,"membersMap"))u(s(s(this,"membersMap"),t),"notifyAllThatSceneChanged",[e])},t.prototype.currentAppliance=function(e){return s(s(s(this,"membersMap"),e),"currentAppliance")},t.prototype.cancelBroadcaster=function(){for(var e in s(this,"membersMap"))parseInt(e)!==s(this,"broadcasterId")&&u(s(s(this,"membersMap"),e),"setViewMode",[s(l.ViewMode,"Freedom")]);a(this,"broadcasterId",void 0)},t.prototype.becomeNewBroadcast=function(e){var t=u(s(s(this,"membersMap"),e),"getViewState",[]),n=t.originX,r=t.originY,i=t.width,o=t.height,p=c({originX:n,originY:r,width:i,height:o});for(var l in s(this,"membersMap"))parseInt(l)!==e&&u(s(s(this,"membersMap"),l),"changeToFollower",[p]);a(this,"broadcasterId",e)},t.prototype.broadcastViewToAllRoom=function(){var e=u(s(s(this,"membersMap"),s(this,"broadcasterId")),"getViewState",[]),t=e.originX,n=e.originY,r=e.width,i=e.height,o=c({originX:t,originY:n,width:r,height:i});for(var a in s(this,"membersMap")){var p=s(s(this,"membersMap"),a);s(u(p,"getViewState",[]),"mode")===s(l.ViewMode,"Follower")&&u(p,"setViewState",[o])}},t.prototype.initiativeColor=function(){for(var e=0,t=s(this,"initiativeColors");e<t.length;e++){var n=t[e];if(!u(this,"anyMemberHasColor",[n]))return n}var r=s(u(Object,"keys",[s(this,"membersMap")]),"length")%s(s(this,"initiativeColors"),"length");return s(s(this,"initiativeColors"),r)},t.prototype.anyMemberHasColor=function(e){for(var n in s(this,"membersMap"))if(u(t,"isColorEquals",[e,s(u(s(s(this,"membersMap"),n),"getMemberState",[]),"strokeColor")]))return!0;return!1},t.isColorEquals=function(e,t){return s(e,0)===s(t,0)&&s(e,1)===s(t,1)&&s(e,2)===s(t,2)},t.prototype.compareDirector=function(e,t){if(e===t)return 0;if(void 0===e&&void 0!==t)return 1;if(void 0!==e&&void 0===t)return-1;if(e===s(this,"broadcasterId"))return-1;if(t===s(this,"broadcasterId"))return 1;var n=s(s(this,"membersMap"),e),r=s(s(this,"membersMap"),t);if(s(n,"information")&&!s(r,"information"))return-1;if(!s(n,"information")&&s(r,"information"))return 1;if(!s(n,"information")&&!s(r,"information"))return s(n,"memberId")-s(r,"memberId");var i=s(n,"information"),o=s(r,"information");if(s(i,"isOwner")&&!s(o,"isOwner"))return-1;if(!s(i,"isOwner")&&s(o,"isOwner"))return 1;var a=s(i,"id"),c=s(o,"id");return a===c?s(n,"memberId")-s(r,"memberId"):a-c},t}(o.baseClass());t.MembersManager=f,o.defineClass("4",f,{name:"MembersManager",properties:[{name:"initiativeColors",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getObjectType({index:o.getReferenceType("../appState:Color")}),decorators:[]},{name:"membersMap",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getObjectType({index:o.getReferenceType("#3")}),decorators:[]},{name:"directorId",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[]},{name:"broadcasterId",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[]}],methods:[{name:"isMemberExits",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getSingletonType(o.TypeEnum.Boolean),decorators:[]},{name:"getBroadcasterId",isPublic:!0,parameterTypes:[],returnType:o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[]},{name:"findMemberIdWithUserId",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[]},{name:"getInformationWithMemberId",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("#0"),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[]},{name:"getMemberDisplayers",isPublic:!0,parameterTypes:[],returnType:o.getObjectType({index:o.getReferenceType("#1")}),decorators:[]},{name:"memberEnter",isPublic:!0,parameterTypes:[o.getReferenceType("#2")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"enterMemberViewState",isPublic:!1,parameterTypes:[],returnType:o.getReferenceType("../appState:ViewState"),decorators:[]},{name:"memberLeave",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"updateDirector",isPublic:!1,parameterTypes:[],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"getDeviceType",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getReferenceType("../appState:DeviceType"),decorators:[]},{name:"getMemberState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getReferenceType("../appState:MemberState"),decorators:[]},{name:"getMemberIdWithUserId",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[]},{name:"getViewState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getReferenceType("../appState:ViewState"),decorators:[]},{name:"setMemberState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Any)],returnType:o.getReferenceType("../appState:MemberState"),decorators:[]},{name:"setViewState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Any)],returnType:o.getReferenceType("../appState:ViewState"),decorators:[]},{name:"setCursor",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Boolean),o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Boolean),o.getSingletonType(o.TypeEnum.Undefined)])],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"setRtcState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Boolean)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"dispatchMagixEvent",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.String),o.getSingletonType(o.TypeEnum.Any)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"notifyAllThatSceneChanged",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"currentAppliance",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getReferenceType("./index:Appliance"),decorators:[]},{name:"cancelBroadcaster",isPublic:!1,parameterTypes:[],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"becomeNewBroadcast",isPublic:!1,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"broadcastViewToAllRoom",isPublic:!1,parameterTypes:[],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"initiativeColor",isPublic:!0,parameterTypes:[],returnType:o.getReferenceType("../appState:Color"),decorators:[]},{name:"anyMemberHasColor",isPublic:!1,parameterTypes:[o.getReferenceType("../appState:Color")],returnType:o.getSingletonType(o.TypeEnum.Boolean),decorators:[]},{name:"compareDirector",isPublic:!1,parameterTypes:[o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Undefined)]),o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Undefined)])],returnType:o.getSingletonType(o.TypeEnum.Number),decorators:[]}]}),o=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("framework/ApplianceComponent","1.2.0"),o=i.getter,a=i.caller,s=i.creator;n(1);var c=n(0);n(0),n(32);var u=n(5);n(5);var p=n(10);n(10),i.defineType("0",i.getObjectType({properties:{key:i.getSingletonType(i.TypeEnum.String),identifier:i.getObjectType({index:i.getSingletonType(i.TypeEnum.Number)})}})),i.defineExport("0","ApplianceComponent");var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return c.stringWithIdentifier(o(this,"identifier"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return c.findIdentifierWith(this)},enumerable:!0,configurable:!0}),t.prototype.renderTagBoxes=function(){return null},t.prototype.renderSvg=function(){return null},t.prototype.pointHitTestContent=function(e,t,n){return!0},t.prototype.rectHitTestContent=function(e,t,n,r,i,o){return e},t.prototype.pointHitTest=function(e,t,n){var r=a(Math,"max",[o(this,"hitTestingBoxMargin"),n]);if(a(this,"testInEditableRectangle",[e,t,r])){var i=e-o(this,"originX"),s=t-o(this,"originY");return a(this,"pointHitTestContent",[i,s,r])}return!1},t.prototype.rectHitTest=function(e,t,n,r){var i=o(this,"hitTestingBoxMargin"),s=a(this,"rectangleTester",[i]),c=a(s,"rectHitTest",[e,t,n,r]);if(c===o(u.RectangleTestingResult,"Disjoint")||c===o(u.RectangleTestingResult,"IncludeByRectangle"))return c;var p=e-o(this,"originX"),l=t-o(this,"originY"),h=e+n-o(this,"originX"),f=t+r-o(this,"originY"),d=a(Math,"min",[p,h]),y=a(Math,"min",[l,f]),g=a(Math,"abs",[p-h]),m=a(Math,"abs",[l-f]);return a(this,"rectHitTestContent",[c,d,y,g,m,i])},t.prototype.testInEditableRectangle=function(e,t,n){var r=o(this,"originX")-n,i=o(this,"originY")-n,s=o(this,"width")+2*n,c=o(this,"height")+2*n;return a(p.RectangleTester,"testPoint",[r,i,s,c,e,t])},t.prototype.rectangleTester=function(e){var t=new u.ConvexPolygonTester,n=o(this,"originX")-e,r=o(this,"originY")-e,i=o(this,"width")+2*e,c=o(this,"height")+2*e;return a(t,"pushPoint",[s({x:n,y:r})]),a(t,"pushPoint",[s({x:n+i,y:r})]),a(t,"pushPoint",[s({x:n+i,y:r+c})]),a(t,"pushPoint",[s({x:n,y:r+c})]),t},t}(i.baseClass());t.ApplianceComponent=l,i.defineClass("0",l,{name:"ApplianceComponent",properties:[{name:"key",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.String),decorators:[]},{name:"identifier",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getObjectType({index:i.getSingletonType(i.TypeEnum.Number)}),decorators:[]}],methods:[{name:"renderTagBoxes",isPublic:!0,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./TypeDefinitions:TagBox"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"renderSvg",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Any),decorators:[]},{name:"pointHitTestContent",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"rectHitTestContent",isPublic:!1,parameterTypes:[i.getReferenceType("../hittest:RectangleTestingResult"),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getReferenceType("../hittest:RectangleTestingResult"),decorators:[]},{name:"pointHitTest",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"rectHitTest",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getReferenceType("../hittest:RectangleTestingResult"),decorators:[]},{name:"testInEditableRectangle",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"rectangleTester",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getReferenceType("../hittest:ConvexPolygonTester"),decorators:[]}]}),i=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findFixedRectangle=function(e,t){void 0===t&&(t=0);var n=e.rectangle,r=e.transform,i=r.deltaX,o=r.deltaY,a=r.scaleX,s=r.scaleY;return{left:Math.floor(n.left*a+i-t),right:Math.floor(n.right*a+i+t),top:Math.floor(n.top*s+o-t),bottom:Math.floor(n.bottom*s+o+t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(123);function o(e){return e.scope===r.Public}function a(e){return e.scope===r.Private}function s(e,t){var n=function(e){var t=e.split("/");return t.pop(),t.join("/")}(e);return i.resolve(n,t)}function c(e){var t=new String(e),n=t.indexOf(":");return[t.substr(0,n),t.substr(n+1)]}function u(e){return/^#/i.test(e)}!function(e){e.Public="public",e.Private="private"}(r=t.SymbolScope||(t.SymbolScope={})),t.isPublicSymbol=o,t.isPrivateSymbol=a,t.standardizeSymbolString=function(e,t){if(u(t))return e+":"+t;var n=c(t),r=n[0],i=n[1];if(!/^(\.){1,2}\//i.test(r))throw new Error('symbol require a file that is out of library "'+r+'"');var o=s(e,r);if(/^\.\.\//i.test(o))throw new Error('symbol require a file that is out of library "'+o+'"');return o+":"+i},t.covertRelativeModuleSignatureToAbsolution=s,t.convertStringToSymbol=function(e){var t=c(e),n=t[0],i=t[1];if(u(i)){var o=i.substr(1);return{scope:r.Private,moduleSignature:n,id:o}}return{scope:r.Public,moduleSignature:n,typeSignature:i}},t.convertSymbolToString=function(e){return o(e)?e.moduleSignature+":"+e.typeSignature:a(e)?e.moduleSignature+":"+e.id:""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),i=n(30),o=n(15);function a(e){return(e-e%i.Pow32)/i.Pow32}function s(e){return e%i.Pow32}function c(e,t){return u(e),function(e){if(e<0||e>i.UInt32Mask)throw new Error("generationId "+e+" is out of range 0 ~ "+i.UInt32Mask)}(t),e*i.Pow32+t}function u(e){if(e<0||e>i.UInt16Mask)throw new Error("observerId "+e+" is out of range 0 ~ "+i.UInt16Mask)}t.NullIdentifier=c(i.UInt16Mask,i.UInt32Mask),t.isIdentifierEquals=function(e,t){return e===t},t.isNullIdentifier=function(e){return e===t.NullIdentifier},t.observerIdWithIdentifier=a,t.generationIdWithIdentifier=s,t.generateIdentifier=c,t.stringWithIdentifier=function(e){var t=a(e),n=s(e);return t.toString(16)+"/"+n.toString(16)};var p=function(){function e(e){u(e),this.observerId=e,this._latestGenerationId=0}return Object.defineProperty(e.prototype,"latestGenerationId",{get:function(){return this._latestGenerationId},enumerable:!0,configurable:!0}),e.prototype.makeSureGenerationIdAfter=function(e){e>this._latestGenerationId&&(this._latestGenerationId=e)},e.checkIsNewObject=function(e){var t=o.getContext(),n=t.__identifierGenerator,r=t.__previousGenerationId,i=a(e);return n.observerId===i&&s(e)>r},e.prototype.generateIdentifier=function(){var e=c(this.observerId,this._latestGenerationId);return this._latestGenerationId=this._latestGenerationId+1,e},e.prototype.clone=function(){var t=new e(this.observerId);return t._latestGenerationId=this._latestGenerationId,t},e.prototype.bind=function(e){var t=e.__identifier;if(void 0===t){var n=this.generateIdentifier();r.bindIdentifier(e,n)}else if("number"!=typeof t)throw new Error("found illegal __identifier property");return e},e}();t.IdentifierGenerator=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pow32=Math.pow(2,32),t.Pow16=Math.pow(2,16),t.UInt32Mask=t.Pow32-1,t.UInt16Mask=t.Pow16-1,t.UInt8Mask=255},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))i.call(n,u)&&(s[u]=n[u]);if(r){a=r(n);for(var p=0;p<a.length;p++)o.call(n,a[p])&&(s[a[p]]=n[a[p]])}}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("framework/TypeDefinitions","1.2.0");n(0),n(16),n(4),n(25),r.defineType("0",r.getObjectType({properties:{key:r.getSingletonType(r.TypeEnum.String),isEmpty:r.getSingletonType(r.TypeEnum.Boolean),ppt:r.getCompoundType(r.TypeEnum.Or,[r.getObjectType({properties:{src:r.getSingletonType(r.TypeEnum.String),width:r.getSingletonType(r.TypeEnum.Number),height:r.getSingletonType(r.TypeEnum.Number)}}),r.getSingletonType(r.TypeEnum.Undefined)])}})),r.defineExport("0","Scene"),r.defineType("1",r.getObjectType({key:r.getSingletonType(r.TypeEnum.String)})),r.defineExport("1","TargetsMap"),r.defineType("2",r.getObjectType({properties:{x:r.getSingletonType(r.TypeEnum.Number),y:r.getSingletonType(r.TypeEnum.Number),targetsMap:r.getReferenceType("#1"),hitTestIdentifies:r.getObjectType({index:r.getObjectType({index:r.getSingletonType(r.TypeEnum.Number)})})}})),r.defineExport("2","MouseEvent"),r.defineType("3",r.getObjectType({properties:{key:r.getSingletonType(r.TypeEnum.String),altKey:r.getSingletonType(r.TypeEnum.Boolean),ctrlKey:r.getSingletonType(r.TypeEnum.Boolean),shiftKey:r.getSingletonType(r.TypeEnum.Boolean)}})),r.defineExport("3","KeyEvent"),r.defineType("4",r.getObjectType({properties:{key:r.getSingletonType(r.TypeEnum.String),type:r.getSingletonType(r.TypeEnum.String),payload:r.getSingletonType(r.TypeEnum.Any),left:r.getSingletonType(r.TypeEnum.Number),right:r.getSingletonType(r.TypeEnum.Number),top:r.getSingletonType(r.TypeEnum.Number),bottom:r.getSingletonType(r.TypeEnum.Number)}})),r.defineExport("4","TagBox"),r.defineType("5",r.getObjectType({properties:{deviceType:r.getReferenceType("../appState:DeviceType"),scene:r.getReferenceType("./SceneNode:SceneNode"),scenes:r.getObjectType({index:r.getReferenceType("./SceneNode:SceneNode")})}})),r.defineExport("5","ApplianceContext"),r.defineType("6",r.getObjectType({})),r.defineExport("6","OperateHandler"),r.defineType("7",r.getObjectType({})),r.defineExport("7","EventHandler"),r.defineType("8",r.getCompoundType(r.TypeEnum.And,[r.getReferenceType("#6"),r.getReferenceType("#7"),r.getObjectType({properties:{fixedCursorInScenePoint:r.getCompoundType(r.TypeEnum.Or,[r.getObjectType({properties:{x:r.getSingletonType(r.TypeEnum.Number),y:r.getSingletonType(r.TypeEnum.Number)}}),r.getSingletonType(r.TypeEnum.Undefined)])}})])),r.defineExport("8","Appliance"),r=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("hittest/BasicTester","1.2.0"),i=r.getter;n(8),t.inCircle=function(e,t,n,r){var o=n-i(e,"x"),a=r-i(e,"y");return o*o+a*a<=t*t},r=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("hittest/ConvexPolygonTester","1.2.0"),o=i.creator,a=i.caller,s=i.getter,c=n(21);n(21);var u=n(8);n(8);var p=n(10);n(10),i.defineType("0",i.getObjectType({properties:{points:i.getObjectType({index:i.getReferenceType("./TypeDefinitions:Point")})}})),i.defineExport("0","ConvexPolygonTester");var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.points=o([]),t}return r(t,e),t.prototype.pushPoint=function(e){a(s(this,"points"),"push",[e])},t.prototype.pointHitTest=function(e,t){for(var n=0;n<s(s(this,"points"),"length");++n){var r=s(s(this,"points"),n),i=s(s(this,"points"),(n+1)%s(s(this,"points"),"length")),u=o({x:s(i,"x")-s(r,"x"),y:s(i,"y")-s(r,"y")});if(0!==s(u,"x")||0!==s(u,"y")){var p=a(c,"verticalVector",[u]),l=o({x:e-s(r,"x"),y:t-s(r,"y")});if(a(c,"dotProduct",[p,l])<0)return!1}}return!0},t.prototype.rectHitTest=function(e,t,n,r){var i=this,o=!1,c=!1;if(a(p.RectangleTester,"iterate",[e,t,n,r,function(e,t){a(i,"pointHitTest",[e,t])?o=!0:c=!0}]),o&&c)return s(u.RectangleTestingResult,"Cross");if(o)return s(u.RectangleTestingResult,"IncludeRectangle");if(c){for(var l=0;l<s(s(this,"points"),"length");++l)for(var h=s(s(this,"points"),l),f=s(s(this,"points"),(l+1)%s(s(this,"points"),"length")),d=a(p.RectangleTester,"allPoints",[e,t,n,r]),y=0;y<s(d,"length");++y){var g=s(d,y),m=s(d,(y+1)%s(d,"length"));if(a(this,"findCrossPoint",[h,f,g,m]))return s(u.RectangleTestingResult,"Cross")}for(var b=0,v=s(this,"points");b<v.length;b++){var T=v[b];if(a(p.RectangleTester,"testPoint",[e,t,n,r,s(T,"x"),s(T,"y")]))return s(u.RectangleTestingResult,"IncludeByRectangle")}}return s(u.RectangleTestingResult,"Disjoint")},t.prototype.findCrossPoint=function(e,t,n,r){var i=s(t,"y")-s(e,"y"),c=s(e,"x")-s(t,"x"),u=s(e,"x")*(s(e,"y")-s(t,"y"))-s(e,"y")*(s(e,"x")-s(t,"x")),p=s(r,"y")-s(n,"y"),l=s(n,"x")-s(r,"x"),h=s(n,"x")*(s(n,"y")-s(r,"y"))-s(n,"y")*(s(n,"x")-s(r,"x")),f=i*l-p*c,d=(c*h-l*u)/f,y=(p*u-i*h)/f;if(a(Math,"abs",[d])===1/0||a(Math,"abs",[y])===1/0)return!1;if(a(Number,"isNaN",[d])||a(Number,"isNaN",[y]))return!1;var g=o({x:d,y:y});return!!(a(this,"isCrossPointBetweenSegment",[g,e,t])&&a(this,"isCrossPointBetweenSegment",[g,n,r]))},t.prototype.isCrossPointBetweenSegment=function(e,t,n){var r=(s(e,"x")-s(t,"x"))*(s(e,"x")-s(n,"x")),i=(s(e,"y")-s(t,"y"))*(s(e,"y")-s(n,"y")),o=a(Math,"abs",[r])<.01,c=a(Math,"abs",[i])<.01;return o&&c?r<=0&&i<=0:(r<=0||o)&&(i<=0||c)},t}(i.baseClass());t.ConvexPolygonTester=l,i.defineClass("0",l,{name:"ConvexPolygonTester",properties:[{name:"points",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getObjectType({index:i.getReferenceType("./TypeDefinitions:Point")}),decorators:[]}],methods:[{name:"pushPoint",isPublic:!0,parameterTypes:[i.getReferenceType("./TypeDefinitions:Point")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"pointHitTest",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"rectHitTest",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getReferenceType("./TypeDefinitions:RectangleTestingResult"),decorators:[]},{name:"findCrossPoint",isPublic:!1,parameterTypes:[i.getReferenceType("./TypeDefinitions:Point"),i.getReferenceType("./TypeDefinitions:Point"),i.getReferenceType("./TypeDefinitions:Point"),i.getReferenceType("./TypeDefinitions:Point")],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"isCrossPointBetweenSegment",isPublic:!1,parameterTypes:[i.getReferenceType("./TypeDefinitions:Point"),i.getReferenceType("./TypeDefinitions:Point"),i.getReferenceType("./TypeDefinitions:Point")],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]}]}),i=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HoverMouseEventLimitTimeInterval=100,t.TransformLimitTimeInterval=100},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.nextId=0}return e.prototype.generate=function(){return""+this.nextId++},e.prototype.clone=function(){var t=new e;return t.nextId=this.nextId,t},e}();t.IdGenerator=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindIdentifier=function(e,t){try{Object.defineProperty(e,"__identifier",{enumerable:!1,configurable:!1,writable:!1,value:t})}catch(e){throw new Error("bind identifier failed: "+e.message)}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Invoker=0]="Invoker",e[e.Event=1]="Event",e[e.Ack=2]="Ack"}(r=t.ActionFrameType||(t.ActionFrameType={})),t.isInvokerFrame=function(e){return e.type===r.Invoker},t.isEventFrame=function(e){return e.type===r.Event},function(e){e[e.System=0]="System",e[e.App=1]="App",e[e.Custom=2]="Custom",e[e.Magix=3]="Magix"}(t.EventScope||(t.EventScope={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23);t.NeverSerializerObject=r.generateSelfloopSerializerObject(-1,[r.TypeEnum.Never]),function(e){e[e.Never=0]="Never",e[e.Undefined=1]="Undefined",e[e.Null=2]="Null",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Float=5]="Float",e[e.Function=6]="Function",e[e.FlatObject=7]="FlatObject",e[e.AkkoObject=8]="AkkoObject",e[e.Array=9]="Array",e[e.True=10]="True",e[e.False=11]="False"}(t.AkkoPrimitiveType||(t.AkkoPrimitiveType={})),function(e){e[e.Array=0]="Array",e[e.FlatObject=1]="FlatObject",e[e.AkkoObject=2]="AkkoObject"}(t.ObjectType||(t.ObjectType={})),t.findIdentifierWith=function(e){var t=e.__identifier;if("number"!=typeof t)throw e instanceof Array?new Error("array don't have identifier"):new Error("object don't have identifier");return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);t.AdminObserverId=Math.pow(2,16)-1;var i=function(){function e(e){this._nextUserId=0,this.identifierMap={},this._nextUserId=e,this.putObserver(t.AdminObserverId,0)}return e.create=function(t){return void 0===t&&(t=0),new e(t)},Object.defineProperty(e.prototype,"nextUserId",{get:function(){return this._nextUserId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allObserverIds",{get:function(){var e=[];for(var t in this.identifierMap)e.push(parseInt(t));return e},enumerable:!0,configurable:!0}),e.prototype.hasObserver=function(e){return e in this.identifierMap},e.prototype.clone=function(){var t=new e(this._nextUserId);for(var n in this.identifierMap)t.identifierMap[n]=this.identifierMap[n].clone();return t},e.prototype.putObserver=function(e,n){void 0===n&&(n=0);var i=new r.IdentifierGenerator(e);return i.makeSureGenerationIdAfter(n),this.identifierMap[e]=i,e!==t.AdminObserverId&&e>this._nextUserId&&(this._nextUserId=e+1),i},e.prototype.removeObserver=function(e){delete this.identifierMap[e]},e.prototype.identifierGeneratorWithObserverId=function(e){var t=this.identifierMap[e];if(!t)throw new Error("observer not found "+e.toString(16));return t},e}();t.IdentifierContext=i},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(137)),r(n(138))},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,i,o,a,s,c){if(r(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,i,o,a,s,c],l=0;(u=new Error(t.replace(/%s/g,function(){return p[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("appState/Color","1.2.0"),i=r.creator;r.defineType("0",r.getObjectType({index:r.getSingletonType(r.TypeEnum.Number)})),r.defineExport("0","Color"),t.getInitiativeColors=function(){return i([i([236,52,85]),i([0,91,246]),i([245,173,70]),i([104,171,93]),i([158,81,182])])},r=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("impls/types/EditablePayload","1.2.0");n(4),r.defineType("0",r.getSingletonType(r.TypeEnum.Any)),r.defineExport("0","BelongsTo"),function(e){e.None="none",e.Others="others",e.Me="me"}(t.BelongsTo||(t.BelongsTo={})),r.defineType("1",r.getObjectType({properties:{highlight:r.getSingletonType(r.TypeEnum.Boolean),selectedBy:r.getSingletonType(r.TypeEnum.Any),color:r.getReferenceType("../../appState:Color")}})),r.defineExport("1","EditablePayload"),r.defineType("2",r.getObjectType({properties:{belongs:r.getSingletonType(r.TypeEnum.Any),color:r.getReferenceType("../../appState:Color")}})),r.defineExport("2","SelectedGroupPayload"),r.defineType("3",r.getObjectType({properties:{belongs:r.getSingletonType(r.TypeEnum.Any),isDragging:r.getSingletonType(r.TypeEnum.Boolean),isUniformScale:r.getSingletonType(r.TypeEnum.Boolean),color:r.getReferenceType("../../appState:Color")}})),r.defineExport("3","EditorPayload"),r=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/Selector","1.2.0"),o=i.getter,a=i.creator,s=i.setter,c=i.caller,u=i.remover,p=n(0);n(0);var l=n(20);n(20);var h=n(22);n(22);var f=n(6);n(6);var d=n(2);n(2),n(11);var y=n(3);n(3);var g=n(14);n(14),n(4);var m=n(9);n(9);var b,v=n(94);n(94),i.defineType("0",i.getSingletonType(i.TypeEnum.Any)),function(e){e[e.None=0]="None",e[e.Selected=1]="Selected",e[e.OperationPoint=2]="OperationPoint"}(b||(b={})),i.defineType("2",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{context:i.getReferenceType("../framework:ApplianceContext"),fixedCursorInScenePoint:i.getCompoundType(i.TypeEnum.Or,[i.getObjectType({properties:{x:i.getSingletonType(i.TypeEnum.Number),y:i.getSingletonType(i.TypeEnum.Number)}}),i.getSingletonType(i.TypeEnum.Undefined)]),beginPressPoint:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./TypeDefinitions:Point"),i.getSingletonType(i.TypeEnum.Null)]),draggingTarget:i.getSingletonType(i.TypeEnum.Any),draggedComponentOriginPoints:i.getObjectType({key:i.getReferenceType("./TypeDefinitions:Point")}),selectedGroup:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("#1"),i.getSingletonType(i.TypeEnum.Undefined)]),isShiftPress:i.getSingletonType(i.TypeEnum.Boolean),latestOperateX:i.getSingletonType(i.TypeEnum.Number),latestOperateY:i.getSingletonType(i.TypeEnum.Number)}}),i.getReferenceType("./tools:Gesture")])),i.defineExport("2","Selector");var T=function(e){function t(t){var n=e.call(this)||this;return n.fixedCursorInScenePoint=void 0,n.beginPressPoint=null,n.draggingTarget=o(b,"None"),n.draggedComponentOriginPoints=a({}),n.isShiftPress=!1,n.latestOperateX=0,n.latestOperateY=0,s(n,"context",t),n}return r(t,e),t.prototype.onKeyUp=function(e){if("Shift"===o(e,"key"))s(this,"isShiftPress",!1),c(this,"refreshMyEditorRectangleSpaceDragToPoint",[]);else if("Backspace"===o(e,"key")){for(var t=0,n=c(this,"allSelectedComponents",[]);t<n.length;t++){var r=n[t];c(o(o(this,"context"),"scene"),"removeComponent",[r])}c(this,"refreshAllUsersEditorRectangleSpace",[])}},t.prototype.onKeyDown=function(e){"Shift"===o(e,"key")&&(s(this,"isShiftPress",!0),c(this,"refreshMyEditorRectangleSpaceDragToPoint",[]))},t.prototype.onMemberStateChanged=function(e,t){if("selector"!==o(e,"currentApplianceName")&&"selector"===o(t,"currentApplianceName")&&(c(this,"cleanAllSelectingInformation",[]),s(this,"isShiftPress",!1),c(this,"refreshMyEditorRectangleSpaceDragToPoint",[])),"selector"===o(e,"currentApplianceName")&&"text"===o(t,"currentApplianceName")){var n=c(p,"getContext",[]).authorId,r=c(o(o(this,"context"),"scene"),"findComponentFromTop",[function(e){return e instanceof g.TextareaShape}]);r&&o(r,"editedBy")===n&&s(this,"fixedCursorInScenePoint",a({x:o(r,"originX")-5,y:o(r,"originY")}))}},t.prototype.onSceneChanged=function(e){var t=o(o(o(this,"context"),"scenes"),e);c(h,"releaseAllTextarea",[t]),s(this,"isShiftPress",!1),c(this,"refreshMyEditorRectangleSpaceDragToPoint",[])},t.prototype.onDestroy=function(){c(this,"cleanAllSelectingInformation",[])},t.prototype.cleanAllSelectingInformation=function(){var e=c(p,"getContext",[]).authorId;o(this,"selectedGroup")&&(c(o(o(this,"context"),"scene"),"removeComponent",[o(this,"selectedGroup")]),s(this,"selectedGroup",void 0)),c(l,"setHighlightNothing",[o(o(this,"context"),"scene"),e]),c(this,"cleanSelectedComponents",[]),c(h,"releaseTextareaEditedBy",[o(o(this,"context"),"scene"),e])},t.prototype.makeSureItsDraggingEvent=function(e){var t=c(this,"findMyEditorRectangleSpace",[]);return!!t&&!!o(o(e,"targetsMap"),o(t,"key"))},t.prototype.onDraggingStateChanged=function(e){var t,n=e.x,r=e.y,i=e.targetsMap,u=e.hitTestIdentifies;if(o(this,"isDragging"))if((t=c(this,"findMyEditorRectangleSpace",[]))&&c(t,"tryToStartEdit",[n,r,i]))s(this,"draggingTarget",o(b,"OperationPoint"));else{if(t&&c(t,"isIncludePoint",[n,r]))c(this,"startDragWithSelectedMode",[]);else{c(h,"releaseTextareaEditedBy",[o(o(this,"context"),"scene"),o(c(p,"getContext",[]),"authorId")]),c(this,"updateHighlightComponent",[u]);var f=c(l,"findHighlightComponent",[o(o(this,"context"),"scene"),o(c(p,"getContext",[]),"authorId")]);f&&o(f,"selectedBy")!==o(c(p,"getContext",[]),"authorId")?c(this,"startDragWithHighlightMode",[f]):s(this,"draggingTarget",o(b,"None"))}s(this,"beginPressPoint",a({x:n,y:r}))}else(t=c(this,"findMyEditorRectangleSpace",[]))&&o(this,"draggingTarget")===o(b,"OperationPoint")&&c(t,"completeEdit",[]),o(this,"selectedGroup")&&(c(o(o(this,"context"),"scene"),"removeComponent",[o(this,"selectedGroup")]),s(this,"selectedGroup",void 0)),s(this,"draggingTarget",o(b,"None")),s(this,"beginPressPoint",null),s(this,"draggedComponentOriginPoints",a({})),c(this,"updateHighlightComponent",[u]),c(this,"refreshAllUsersEditorRectangleSpace",[])},t.prototype.startDragWithSelectedMode=function(){s(this,"draggingTarget",o(b,"Selected"));for(var e=0,t=c(this,"allSelectedComponents",[]);e<t.length;e++){var n=t[e];s(o(this,"draggedComponentOriginPoints"),o(n,"key"),a({x:o(n,"originX"),y:o(n,"originY")}))}},t.prototype.startDragWithHighlightMode=function(e){s(this,"draggingTarget",o(b,"Selected")),s(o(this,"draggedComponentOriginPoints"),o(e,"key"),a({x:o(e,"originX"),y:o(e,"originY")}));var t=c(p,"getContext",[]).authorId;o(e,"selectedBy")!==t&&(c(this,"cleanSelectedComponents",[]),s(e,"selectedBy",t),c(this,"refreshAllUsersEditorRectangleSpace",[]))},t.prototype.onDrag=function(e){var t=e.x,n=e.y;e.hitTestIdentifies;switch(o(this,"draggingTarget")){case o(b,"Selected"):c(this,"dragComponents",[t,n].concat(c(this,"allSelectedComponents",[])));break;case o(b,"OperationPoint"):s(this,"latestOperateX",t),s(this,"latestOperateY",n),c(this,"refreshMyEditorRectangleSpaceDragToPoint",[]);break;case o(b,"None"):o(this,"selectedGroup")||(s(this,"selectedGroup",new S(o(this,"context"),o(this,"beginPressPoint"))),c(o(o(this,"context"),"scene"),"addComponent",[o(this,"selectedGroup")])),c(o(this,"selectedGroup"),"updateEndPoint",[t,n]),c(this,"cleanSelectedComponents",[]);for(var r=o(this,"selectedGroup"),i=r.originX,a=r.originY,u=r.width,h=r.height,f=c(l,"searchEditableComponentsByRectangle",[o(o(this,"context"),"scene"),i,a,u,h]),d=c(p,"getContext",[]).authorId,y=0,g=f;y<g.length;y++){var m=g[y];s(m,"selectedBy",d)}c(this,"refreshAllUsersEditorRectangleSpace",[])}},t.prototype.refreshMyEditorRectangleSpaceDragToPoint=function(){var e=c(this,"findMyEditorRectangleSpace",[]);e&&(s(e,"isShiftPress",o(this,"isShiftPress")),o(this,"draggingTarget")===o(b,"OperationPoint")&&c(e,"dragToPoint",[o(this,"latestOperateX"),o(this,"latestOperateY")]))},t.prototype.dragComponents=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var i=e-o(o(this,"beginPressPoint"),"x"),a=t-o(o(this,"beginPressPoint"),"y"),u=0;u<o(n,"length");++u){var p=o(n,u),l=o(o(this,"draggedComponentOriginPoints"),o(p,"key"));s(p,"originX",o(l,"x")+i),s(p,"originY",o(l,"y")+a)}c(this,"refreshAllUsersEditorRectangleSpace",[])},t.prototype.onHover=function(e){var t=e.hitTestIdentifies;c(this,"updateHighlightComponent",[t])},t.prototype.onClick=function(e){e.x,e.y;var t=e.hitTestIdentifies,n=c(o(o(this,"context"),"scene"),"editableWithHitIdentifies",[t]),r=c(p,"getContext",[]).authorId;if(n&&n instanceof g.TextareaShape&&o(n,"selectedBy")===r&&void 0===o(n,"editedBy")){var i=c(p,"getContext",[]).authorId;c(h,"releaseTextareaEditedBy",[o(o(this,"context"),"scene"),i]),s(n,"editedBy",i),c(this,"cleanSelectedComponents",[]),s(this,"fixedCursorInScenePoint",a({x:o(n,"originX")-5,y:o(n,"originY")}))}else c(h,"releaseTextareaEditedBy",[o(o(this,"context"),"scene"),o(c(p,"getContext",[]),"authorId")]),n?o(n,"selectedBy")!==r&&(c(this,"cleanSelectedComponents",[]),s(n,"selectedBy",r),c(this,"refreshAllUsersEditorRectangleSpace",[])):c(this,"cleanSelectedComponents",[]);c(this,"updateHighlightComponent",[t])},t.prototype.updateHighlightComponent=function(e){var t=c(o(o(this,"context"),"scene"),"editableWithHitIdentifies",[e]);c(l,"setHighlightNothing",[o(o(this,"context"),"scene"),o(c(p,"getContext",[]),"authorId")]),t&&c(t,"setHighlightBy",[!0,o(c(p,"getContext",[]),"authorId")])},t.prototype.cleanSelectedComponents=function(){var e=c(p,"getContext",[]).authorId;c(o(o(this,"context"),"scene"),"forEachComponents",[function(t){t instanceof d.Editable&&o(t,"selectedBy")===e&&s(t,"selectedBy",void 0)}]),c(this,"refreshAllUsersEditorRectangleSpace",[]),s(this,"fixedCursorInScenePoint",void 0)},t.prototype.findMyEditorRectangleSpace=function(){var e=c(p,"getContext",[]).authorId;return c(o(o(this,"context"),"scene"),"findComponentFromTop",[function(t){return t instanceof v.EditorRectangleSpace&&o(t,"belongsToUserId")===e}])},t.prototype.refreshAllUsersEditorRectangleSpace=function(){var e=a({}),t=a([]);c(o(o(this,"context"),"scene"),"forEachComponents",[function(n){if(n instanceof v.EditorRectangleSpace)c(t,"push",[n]);else if(n instanceof d.Editable&&void 0!==o(n,"selectedBy")){var r=o(e,o(n,"selectedBy"));r||(r=a([]),s(e,o(n,"selectedBy"),r)),c(r,"push",[n])}}]);for(var n=0,r=t;n<r.length;n++){var i=r[n],p=o(i,"belongsToUserId");(h=o(e,p))&&o(h,"length")>0?c(i,"refreshWithIncludesComponents",[h]):c(o(o(this,"context"),"scene"),"removeComponent",[i]),u(e,p)}for(var l in e){p=parseInt(l);var h=o(e,p);i=new v.EditorRectangleSpace(o(this,"context"),p);c(i,"refreshWithIncludesComponents",[h]),c(o(o(this,"context"),"scene"),"addComponent",[i])}},t.prototype.allSelectedComponents=function(){var e=c(p,"getContext",[]).authorId;return c(o(o(this,"context"),"scene"),"componentsWithFilter",[function(t){return t instanceof d.Editable&&o(t,"selectedBy")===e}])},t}(i.wrapSuperClass(f.Gesture));t.Selector=T,i.defineClass("2",T,{superClass:"./tools:Gesture",name:"Selector",properties:[{name:"context",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../framework:ApplianceContext"),decorators:[]},{name:"fixedCursorInScenePoint",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getObjectType({properties:{x:i.getSingletonType(i.TypeEnum.Number),y:i.getSingletonType(i.TypeEnum.Number)}}),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"beginPressPoint",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./TypeDefinitions:Point"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"draggingTarget",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Any),decorators:[]},{name:"draggedComponentOriginPoints",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getObjectType({key:i.getReferenceType("./TypeDefinitions:Point")}),decorators:[]},{name:"selectedGroup",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("#1"),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"isShiftPress",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"latestOperateX",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"latestOperateY",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]}],methods:[{name:"onKeyUp",isPublic:!0,parameterTypes:[i.getReferenceType("../framework:KeyEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onKeyDown",isPublic:!0,parameterTypes:[i.getReferenceType("../framework:KeyEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onMemberStateChanged",isPublic:!0,parameterTypes:[i.getReferenceType("../appState:MemberState"),i.getReferenceType("../appState:MemberState")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onSceneChanged",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDestroy",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"cleanAllSelectingInformation",isPublic:!1,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"makeSureItsDraggingEvent",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"onDraggingStateChanged",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"startDragWithSelectedMode",isPublic:!1,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"startDragWithHighlightMode",isPublic:!1,parameterTypes:[i.getReferenceType("./abstract/Editable:Editable")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDrag",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"refreshMyEditorRectangleSpaceDragToPoint",isPublic:!1,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"dragComponents",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getObjectType({index:i.getReferenceType("./abstract/Editable:Editable")})],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onHover",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onClick",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"updateHighlightComponent",isPublic:!1,parameterTypes:[i.getObjectType({index:i.getObjectType({index:i.getSingletonType(i.TypeEnum.Number)})})],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"cleanSelectedComponents",isPublic:!1,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"findMyEditorRectangleSpace",isPublic:!1,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./EditorRectangleSpace:EditorRectangleSpace"),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"refreshAllUsersEditorRectangleSpace",isPublic:!1,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"allSelectedComponents",isPublic:!1,parameterTypes:[],returnType:i.getObjectType({index:i.getReferenceType("./abstract/Editable:Editable")}),decorators:[]}]}),i.defineType("1",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{originX:i.getSingletonType(i.TypeEnum.Number),originY:i.getSingletonType(i.TypeEnum.Number),width:i.getSingletonType(i.TypeEnum.Number),height:i.getSingletonType(i.TypeEnum.Number),context:i.getReferenceType("../framework:ApplianceContext"),beginPoint:i.getReferenceType("./TypeDefinitions:Point"),belongsTo:i.getSingletonType(i.TypeEnum.Number),hitTestingBoxMargin:i.getSingletonType(i.TypeEnum.Number)}}),i.getReferenceType("../framework:ApplianceComponent")]));var S=function(e){function t(t,n){var r=e.call(this)||this;return r.originX=0,r.originY=0,r.width=0,r.height=0,s(r,"context",t),s(r,"beginPoint",n),s(r,"originX",o(n,"x")),s(r,"originY",o(n,"y")),s(r,"width",0),s(r,"height",0),s(r,"belongsTo",o(c(p,"getContext",[]),"authorId")),r}return r(t,e),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.updateEndPoint=function(e,t){var n=this;c(this,"refreshWithPoints",[function(r){r(e,t),r(o(o(n,"beginPoint"),"x"),o(o(n,"beginPoint"),"y"))}])},t.prototype.refreshWithPoints=function(e){var t=o(Number,"MIN_SAFE_INTEGER"),n=o(Number,"MIN_SAFE_INTEGER"),r=o(Number,"MAX_SAFE_INTEGER"),i=o(Number,"MAX_SAFE_INTEGER");e(function(e,o){t=c(Math,"max",[t,e]),r=c(Math,"min",[r,e]),n=c(Math,"max",[n,o]),i=c(Math,"min",[i,o])}),s(this,"originX",r),s(this,"originY",i),s(this,"width",t-r),s(this,"height",n-i)},t.prototype.renderTagBoxes=function(){if(c(l,"willIgnoreSelectingBox",[o(this,"width"),o(this,"height")]))return null;var e=a({belongs:o(this,"belongsTo")===o(c(p,"getContext",[]),"observerId")?o(m.BelongsTo,"Me"):o(m.BelongsTo,"Others"),color:o(c(o(this,"context"),"getMemberState",[o(this,"belongsTo")]),"strokeColor")});return a({key:o(this,"key"),type:"selectedGroup",payload:e,left:o(this,"originX"),top:o(this,"originY"),right:o(this,"originX")+o(this,"width"),bottom:o(this,"originY")+o(this,"height")})},t}(i.wrapSuperClass(y.ApplianceComponent));i.defineClass("1",S,{superClass:"../framework:ApplianceComponent",name:"SelectedGroupRectangleSpace",properties:[{name:"originX",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"originY",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"width",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"height",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"context",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../framework:ApplianceContext"),decorators:[]},{name:"beginPoint",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("./TypeDefinitions:Point"),decorators:[]},{name:"belongsTo",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"hitTestingBoxMargin",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]}],methods:[{name:"updateEndPoint",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"refreshWithPoints",isPublic:!0,parameterTypes:[i.getFunctionType()],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"renderTagBoxes",isPublic:!0,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("../framework:TagBox"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]}]}),i=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/Rectangle","1.2.0"),o=i.setter,a=i.getter,s=i.caller,c=i.creator,u=n(0);n(0);var p=n(6);n(6);var l=n(2);n(2),n(11),n(3);var h=n(5);n(5),n(4),i.defineType("1",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{context:i.getReferenceType("../framework:ApplianceContext"),paintingRectangleShape:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("#0"),i.getSingletonType(i.TypeEnum.Null)]),beginPoint:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./TypeDefinitions:Point"),i.getSingletonType(i.TypeEnum.Null)]),isShiftPress:i.getSingletonType(i.TypeEnum.Boolean),latestDragX:i.getSingletonType(i.TypeEnum.Number),latestDragY:i.getSingletonType(i.TypeEnum.Number),fixedCursorInScenePoint:i.getSingletonType(i.TypeEnum.Undefined)}}),i.getReferenceType("./tools:Gesture")])),i.defineExport("1","RectangleAppliance");var f=function(e){function t(t){var n=e.call(this)||this;return n.paintingRectangleShape=null,n.beginPoint=null,n.isShiftPress=!1,n.latestDragX=0,n.latestDragY=0,o(n,"context",t),n}return r(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onKeyUp=function(e){"Shift"===a(e,"key")&&(o(this,"isShiftPress",!1),s(this,"refreshPaintingRectangleShape",[]))},t.prototype.onKeyDown=function(e){"Shift"===a(e,"key")&&(o(this,"isShiftPress",!0),s(this,"refreshPaintingRectangleShape",[]))},t.prototype.onSceneChanged=function(e){o(this,"isShiftPress",!1)},t.prototype.onDraggingStateChanged=function(e){var t=e.x,n=e.y;a(this,"isDragging")?(o(this,"paintingRectangleShape",new d(a(this,"context"))),o(a(this,"paintingRectangleShape"),"originX",t),o(a(this,"paintingRectangleShape"),"originY",n),s(a(a(this,"context"),"scene"),"addComponent",[a(this,"paintingRectangleShape")]),o(this,"beginPoint",c({x:t,y:n}))):(s(a(this,"paintingRectangleShape"),"completePainting",[]),o(this,"paintingRectangleShape",null),o(this,"beginPoint",null))},t.prototype.onDrag=function(e){var t=e.x,n=e.y;o(this,"latestDragX",t),o(this,"latestDragY",n),s(this,"refreshPaintingRectangleShape",[])},t.prototype.refreshPaintingRectangleShape=function(){var e=a(this,"paintingRectangleShape");if(o(e,"originX",s(Math,"min",[a(this,"latestDragX"),a(a(this,"beginPoint"),"x")])),o(e,"originY",s(Math,"min",[a(this,"latestDragY"),a(a(this,"beginPoint"),"y")])),a(this,"isShiftPress")){var t=s(Math,"abs",[a(this,"latestDragX")-a(a(this,"beginPoint"),"x")]),n=s(Math,"abs",[a(this,"latestDragY")-a(a(this,"beginPoint"),"y")]),r=s(Math,"max",[t,n]);o(e,"width",r),o(e,"height",r)}else o(e,"width",s(Math,"abs",[a(this,"latestDragX")-a(a(this,"beginPoint"),"x")])),o(e,"height",s(Math,"abs",[a(this,"latestDragY")-a(a(this,"beginPoint"),"y")]))},t.prototype.onDestroy=function(){a(this,"paintingRectangleShape")&&s(a(this,"paintingRectangleShape"),"completePainting",[])},t}(i.wrapSuperClass(p.Gesture));t.RectangleAppliance=f,i.defineClass("1",f,{superClass:"./tools:Gesture",name:"RectangleAppliance",properties:[{name:"context",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../framework:ApplianceContext"),decorators:[]},{name:"paintingRectangleShape",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("#0"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"beginPoint",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./TypeDefinitions:Point"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"isShiftPress",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"latestDragX",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"latestDragY",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"fixedCursorInScenePoint",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Undefined),decorators:[]}],methods:[{name:"onKeyUp",isPublic:!0,parameterTypes:[i.getReferenceType("../framework:KeyEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onKeyDown",isPublic:!0,parameterTypes:[i.getReferenceType("../framework:KeyEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onSceneChanged",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDraggingStateChanged",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDrag",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"refreshPaintingRectangleShape",isPublic:!1,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDestroy",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]}]}),i.defineType("0",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{originX:i.getSingletonType(i.TypeEnum.Number),originY:i.getSingletonType(i.TypeEnum.Number),width:i.getSingletonType(i.TypeEnum.Number),height:i.getSingletonType(i.TypeEnum.Number),state:i.getReferenceType("../appState:MemberState"),isPainting:i.getSingletonType(i.TypeEnum.Boolean),selectable:i.getSingletonType(i.TypeEnum.Boolean),hitTestingBoxMargin:i.getSingletonType(i.TypeEnum.Number)}}),i.getReferenceType("./abstract/Editable:Editable")]));var d=function(e){function t(t){var n=e.call(this,t)||this;return n.originX=0,n.originY=0,n.width=0,n.height=0,n.isPainting=!0,o(n,"state",s(t,"getMemberState",[])),n}return r(t,e),Object.defineProperty(t.prototype,"selectable",{get:function(){return!a(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return a(a(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),t.prototype.completePainting=function(){o(this,"isPainting",!1)},t.prototype.pointHitTestContent=function(e,t,n){var r=s(this,"innerRectangleTester",[n]);return!r||!s(r,"pointHitTest",[e,t])},t.prototype.rectHitTestContent=function(e,t,n,r,i,o){if(e===a(h.RectangleTestingResult,"IncludeRectangle")){var c=s(this,"innerRectangleTester",[o]);if(c)switch(s(c,"rectHitTest",[t,n,r,i])){case a(h.RectangleTestingResult,"Disjoint"):return a(h.RectangleTestingResult,"IncludeRectangle");case a(h.RectangleTestingResult,"IncludeByRectangle"):case a(h.RectangleTestingResult,"Cross"):return a(h.RectangleTestingResult,"Cross");case a(h.RectangleTestingResult,"IncludeRectangle"):return a(h.RectangleTestingResult,"Disjoint")}}return e},t.prototype.innerRectangleTester=function(e){var t=new h.ConvexPolygonTester,n=e,r=e,i=a(this,"width")-2*e,o=a(this,"height")-2*e;if(!(i<=0||o<=0))return s(t,"pushPoint",[c({x:n,y:r})]),s(t,"pushPoint",[c({x:n+i,y:r})]),s(t,"pushPoint",[c({x:n+i,y:r+o})]),s(t,"pushPoint",[c({x:n,y:r+o})]),t},t.prototype.renderSvgContent=function(){var e=a(a(this,"state"),"strokeColor"),t=e[0],n=e[1],r=e[2];return u.createElement("rect",{key:a(this,"key"),x:0,y:0,width:a(this,"width"),height:a(this,"height"),style:c({stroke:"rgb("+t+","+n+","+r+")",strokeWidth:a(a(this,"state"),"strokeWidth"),fill:"none",strokeLinejoin:"round",strokeLinecap:"round"})})},t}(i.wrapSuperClass(l.Editable));i.defineClass("0",d,{superClass:"./abstract/Editable:Editable",name:"RectangleShape",properties:[{name:"originX",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"originY",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"width",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"height",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"state",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../appState:MemberState"),decorators:[]},{name:"isPainting",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"selectable",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"hitTestingBoxMargin",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]}],methods:[{name:"completePainting",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"pointHitTestContent",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"rectHitTestContent",isPublic:!1,parameterTypes:[i.getReferenceType("../hittest:RectangleTestingResult"),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getReferenceType("../hittest:RectangleTestingResult"),decorators:[]},{name:"innerRectangleTester",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("../hittest:ConvexPolygonTester"),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"renderSvgContent",isPublic:!1,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.Any),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]}]}),i=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/Text","1.2.0"),o=i.setter,a=i.getter,s=i.caller,c=i.creator,u=n(0);n(0);var p=n(22);n(22);var l=n(6);n(6),n(3);var h=n(14);n(14),n(4),i.defineType("0",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{context:i.getReferenceType("../framework:ApplianceContext"),fixedCursorInScenePoint:i.getSingletonType(i.TypeEnum.Undefined)}}),i.getReferenceType("./tools:Gesture")])),i.defineExport("0","TextAppliance");var f=function(e){function t(t){var n=e.call(this)||this;return o(n,"context",t),n}return r(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onMemberStateChanged=function(e,t){if(a(e,"strokeColor")!==a(t,"strokeColor")||a(e,"textSize")!==a(t,"textSize")){var n=s(p,"textareaEditedBy",[a(a(this,"context"),"scene"),a(s(u,"getContext",[]),"authorId")]);n&&o(n,"textSize",a(e,"textSize"))}},t.prototype.onClick=function(e){var t=e.x,n=e.y;s(p,"releaseTextareaEditedBy",[a(a(this,"context"),"scene"),a(s(u,"getContext",[]),"authorId")]);var r=new h.TextareaShape(a(this,"context"),t,n);o(r,"editedBy",a(s(u,"getContext",[]),"authorId")),o(r,"textSize",a(s(a(this,"context"),"getMemberState",[]),"textSize")),s(a(a(this,"context"),"scene"),"addComponent",[r]),s(a(this,"context"),"setMemberState",[c({currentApplianceName:"selector"})])},t}(i.wrapSuperClass(l.Gesture));t.TextAppliance=f,i.defineClass("0",f,{superClass:"./tools:Gesture",name:"TextAppliance",properties:[{name:"context",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../framework:ApplianceContext"),decorators:[]},{name:"fixedCursorInScenePoint",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Undefined),decorators:[]}],methods:[{name:"onMemberStateChanged",isPublic:!0,parameterTypes:[i.getReferenceType("../appState:MemberState"),i.getReferenceType("../appState:MemberState")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onClick",isPublic:!0,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]}]}),i=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/Ellipse","1.2.0"),o=i.setter,a=i.getter,s=i.caller,c=i.creator,u=n(0);n(0),n(3);var p=n(6);n(6);var l=n(2);n(2);var h=n(95);n(95);var f=n(5);n(5),n(4),n(11),i.defineType("1",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{context:i.getReferenceType("../framework:ApplianceContext"),paintingEllipseShape:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("#0"),i.getSingletonType(i.TypeEnum.Null)]),beginPoint:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./TypeDefinitions:Point"),i.getSingletonType(i.TypeEnum.Null)]),isShiftPress:i.getSingletonType(i.TypeEnum.Boolean),latestDragX:i.getSingletonType(i.TypeEnum.Number),latestDragY:i.getSingletonType(i.TypeEnum.Number),fixedCursorInScenePoint:i.getSingletonType(i.TypeEnum.Undefined)}}),i.getReferenceType("./tools:Gesture")])),i.defineExport("1","EllipseAppliance");var d=function(e){function t(t){var n=e.call(this)||this;return n.paintingEllipseShape=null,n.beginPoint=null,n.isShiftPress=!1,n.latestDragX=0,n.latestDragY=0,o(n,"context",t),n}return r(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onKeyUp=function(e){"Shift"===a(e,"key")&&(o(this,"isShiftPress",!1),s(this,"refreshPaintingEllipseShape",[]))},t.prototype.onKeyDown=function(e){"Shift"===a(e,"key")&&(o(this,"isShiftPress",!0),s(this,"refreshPaintingEllipseShape",[]))},t.prototype.onSceneChanged=function(e){o(this,"isShiftPress",!1)},t.prototype.onDraggingStateChanged=function(e){var t=e.x,n=e.y;a(this,"isDragging")?(o(this,"paintingEllipseShape",new y(a(this,"context"))),o(a(this,"paintingEllipseShape"),"originX",t),o(a(this,"paintingEllipseShape"),"originY",n),s(a(a(this,"context"),"scene"),"addComponent",[a(this,"paintingEllipseShape")]),o(this,"beginPoint",c({x:t,y:n}))):(s(a(this,"paintingEllipseShape"),"completePainting",[]),o(this,"paintingEllipseShape",null),o(this,"beginPoint",null))},t.prototype.onDrag=function(e){var t=e.x,n=e.y;o(this,"latestDragX",t),o(this,"latestDragY",n),s(this,"refreshPaintingEllipseShape",[])},t.prototype.refreshPaintingEllipseShape=function(){var e=a(this,"paintingEllipseShape");if(o(e,"originX",s(Math,"min",[a(this,"latestDragX"),a(a(this,"beginPoint"),"x")])),o(e,"originY",s(Math,"min",[a(this,"latestDragY"),a(a(this,"beginPoint"),"y")])),a(this,"isShiftPress")){var t=s(Math,"abs",[a(this,"latestDragX")-a(a(this,"beginPoint"),"x")]),n=s(Math,"abs",[a(this,"latestDragY")-a(a(this,"beginPoint"),"y")]),r=s(Math,"max",[t,n]);o(e,"width",r),o(e,"height",r)}else o(e,"width",s(Math,"abs",[a(this,"latestDragX")-a(a(this,"beginPoint"),"x")])),o(e,"height",s(Math,"abs",[a(this,"latestDragY")-a(a(this,"beginPoint"),"y")]))},t.prototype.onDestroy=function(){a(this,"paintingEllipseShape")&&s(a(this,"paintingEllipseShape"),"completePainting",[])},t}(i.wrapSuperClass(p.Gesture));t.EllipseAppliance=d,i.defineClass("1",d,{superClass:"./tools:Gesture",name:"EllipseAppliance",properties:[{name:"context",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../framework:ApplianceContext"),decorators:[]},{name:"paintingEllipseShape",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("#0"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"beginPoint",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./TypeDefinitions:Point"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"isShiftPress",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"latestDragX",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"latestDragY",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"fixedCursorInScenePoint",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Undefined),decorators:[]}],methods:[{name:"onKeyUp",isPublic:!0,parameterTypes:[i.getReferenceType("../framework:KeyEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onKeyDown",isPublic:!0,parameterTypes:[i.getReferenceType("../framework:KeyEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onSceneChanged",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDraggingStateChanged",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDrag",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"refreshPaintingEllipseShape",isPublic:!1,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDestroy",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]}]}),i.defineType("0",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{originX:i.getSingletonType(i.TypeEnum.Number),originY:i.getSingletonType(i.TypeEnum.Number),width:i.getSingletonType(i.TypeEnum.Number),height:i.getSingletonType(i.TypeEnum.Number),state:i.getReferenceType("../appState:MemberState"),isPainting:i.getSingletonType(i.TypeEnum.Boolean),selectable:i.getSingletonType(i.TypeEnum.Boolean),hitTestingBoxMargin:i.getSingletonType(i.TypeEnum.Number)}}),i.getReferenceType("./abstract/Editable:Editable")]));var y=function(e){function t(t){var n=e.call(this,t)||this;return n.originX=0,n.originY=0,n.width=0,n.height=0,n.isPainting=!0,o(n,"state",s(t,"getMemberState",[])),n}return r(t,e),Object.defineProperty(t.prototype,"selectable",{get:function(){return!a(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return a(a(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),t.prototype.completePainting=function(){o(this,"isPainting",!1)},t.prototype.pointHitTestContent=function(e,t,n){var r=s(this,"outerEllipseTester",[n]);if(!s(r,"pointHitTest",[e,t]))return!1;var i=s(this,"innerEllipseTester",[n]);return!i||!s(i,"pointHitTest",[e,t])},t.prototype.rectHitTestContent=function(e,t,n,r,i,o){var c=s(this,"outerEllipseTester",[o]),u=s(c,"rectHitTest",[t,n,r,i]);if(u===a(f.RectangleTestingResult,"IncludeRectangle")){var p=s(this,"innerEllipseTester",[o]);if(p)switch(s(p,"rectHitTest",[t,n,r,i])){case a(f.RectangleTestingResult,"Disjoint"):return a(f.RectangleTestingResult,"IncludeRectangle");case a(f.RectangleTestingResult,"IncludeByRectangle"):case a(f.RectangleTestingResult,"Cross"):return a(f.RectangleTestingResult,"Cross");case a(f.RectangleTestingResult,"IncludeRectangle"):return a(f.RectangleTestingResult,"Disjoint")}}return u},t.prototype.outerEllipseTester=function(e){var t=a(this,"width")+2*e,n=a(this,"height")+2*e,r=a(this,"width")/2,i=a(this,"height")/2;return new h.EllipseTester(r,i,t,n)},t.prototype.innerEllipseTester=function(e){var t=a(this,"width")-2*e,n=a(this,"height")-2*e;if(!(t<=0||n<=0)){var r=a(this,"width")/2,i=a(this,"height")/2;return new h.EllipseTester(r,i,t,n)}},t.prototype.renderSvgContent=function(){var e=a(a(this,"state"),"strokeColor"),t=e[0],n=e[1],r=e[2];return u.createElement("ellipse",{key:a(this,"key"),style:c({stroke:"rgb("+t+","+n+","+r+")",fill:"none",strokeWidth:a(a(this,"state"),"strokeWidth")}),cx:""+a(this,"width")/2,cy:""+a(this,"height")/2,rx:""+a(this,"width")/2,ry:""+a(this,"height")/2})},t}(i.wrapSuperClass(l.Editable));i.defineClass("0",y,{superClass:"./abstract/Editable:Editable",name:"EllipseShape",properties:[{name:"originX",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"originY",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"width",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"height",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"state",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../appState:MemberState"),decorators:[]},{name:"isPainting",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"selectable",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"hitTestingBoxMargin",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]}],methods:[{name:"completePainting",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"pointHitTestContent",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"rectHitTestContent",isPublic:!1,parameterTypes:[i.getReferenceType("../hittest:RectangleTestingResult"),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getReferenceType("../hittest:RectangleTestingResult"),decorators:[]},{name:"outerEllipseTester",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getReferenceType("../hittest/EllipseTester:EllipseTester"),decorators:[]},{name:"innerEllipseTester",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("../hittest/EllipseTester:EllipseTester"),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"renderSvgContent",isPublic:!1,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.Any),i.getSingletonType(i.TypeEnum.Any)]),decorators:[]}]}),i=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/Pencil","1.2.0"),o=i.getter,a=i.setter,s=i.caller,c=i.creator,u=i.postfix,p=n(0);n(0);var l=n(6);n(6),n(11);var h=n(2);n(2);var f=n(5);n(5),n(3);var d=n(96);n(96),n(4);o(Math,"PI"),o(Math,"PI");function y(e,t){return 0===e&&0===t?1:e/t}i.defineType("1",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{context:i.getReferenceType("../framework:ApplianceContext"),paintingCurveShape:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("#0"),i.getSingletonType(i.TypeEnum.Null)]),fixedCursorInScenePoint:i.getSingletonType(i.TypeEnum.Undefined)}}),i.getReferenceType("./tools:Gesture")])),i.defineExport("1","PencilAppliance");var g=function(e){function t(t){var n=e.call(this)||this;return n.paintingCurveShape=null,a(n,"context",t),n}return r(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onDraggingStateChanged=function(){if(o(this,"isDragging"))a(this,"paintingCurveShape",new m(o(this,"context"))),s(o(o(this,"context"),"scene"),"addComponent",[o(this,"paintingCurveShape")]);else if(o(this,"paintingCurveShape")){var e=o(this,"paintingCurveShape");a(this,"paintingCurveShape",null),o(e,"pointsCount")>=2?s(e,"completePainting",[]):s(o(o(this,"context"),"scene"),"removeComponent",[e])}},t.prototype.onDrag=function(e){var t=e.x,n=e.y;o(this,"paintingCurveShape")&&s(o(this,"paintingCurveShape"),"pushPoint",[c({x:t,y:n})])},t.prototype.onDestroy=function(){o(this,"paintingCurveShape")&&s(o(this,"paintingCurveShape"),"completePainting",[])},t}(i.wrapSuperClass(l.Gesture));t.PencilAppliance=g,i.defineClass("1",g,{superClass:"./tools:Gesture",name:"PencilAppliance",properties:[{name:"context",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../framework:ApplianceContext"),decorators:[]},{name:"paintingCurveShape",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("#0"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"fixedCursorInScenePoint",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Undefined),decorators:[]}],methods:[{name:"onDraggingStateChanged",isPublic:!1,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDrag",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDestroy",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]}]}),i.defineType("0",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{originX:i.getSingletonType(i.TypeEnum.Number),originY:i.getSingletonType(i.TypeEnum.Number),initializedWidth:i.getSingletonType(i.TypeEnum.Number),initializedHeight:i.getSingletonType(i.TypeEnum.Number),_width:i.getSingletonType(i.TypeEnum.Number),_height:i.getSingletonType(i.TypeEnum.Number),state:i.getReferenceType("../appState:MemberState"),points:i.getObjectType({index:i.getReferenceType("./TypeDefinitions:Point")}),isPainting:i.getSingletonType(i.TypeEnum.Boolean),pushedPointsCount:i.getSingletonType(i.TypeEnum.Number),lastVacuateIndex:i.getSingletonType(i.TypeEnum.Number),pathDefinitionCache:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.String),i.getSingletonType(i.TypeEnum.Undefined)]),width:i.getSingletonType(i.TypeEnum.Number),height:i.getSingletonType(i.TypeEnum.Number),selectable:i.getSingletonType(i.TypeEnum.Boolean),hitTestingBoxMargin:i.getSingletonType(i.TypeEnum.Number),pointsCount:i.getSingletonType(i.TypeEnum.Number)}}),i.getReferenceType("./abstract/Editable:Editable")]));var m=function(e){function t(t){var n=e.call(this,t)||this;return n.originX=0,n.originY=0,n.initializedWidth=0,n.initializedHeight=0,n._width=0,n._height=0,n.points=c([]),n.isPainting=!0,n.pushedPointsCount=0,n.lastVacuateIndex=0,a(n,"state",s(t,"getMemberState",[])),n}return r(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return o(this,"_width")},set:function(e){o(this,"_width")!==e&&(a(this,"_width",e),a(this,"pathDefinitionCache",void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return o(this,"_height")},set:function(e){o(this,"_height")!==e&&(a(this,"_height",e),a(this,"pathDefinitionCache",void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectable",{get:function(){return!o(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return o(o(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),t.prototype.pushPoint=function(e){if(s(o(this,"points"),"push",[e]),u(this,"pushedPointsCount",1),a(this,"pathDefinitionCache",void 0),o(this,"pushedPointsCount")%60==0&&s(this,"vacuatePoints",[50]),1===o(this,"pushedPointsCount"))a(this,"originX",o(e,"x")),a(this,"originY",o(e,"y"));else{var t=o(this,"originX"),n=o(this,"originY"),r=o(this,"originX")+o(this,"_width"),i=o(this,"originY")+o(this,"_height");o(e,"x")<t?(a(this,"originX",o(e,"x")),a(this,"_width",r-o(e,"x"))):o(e,"x")>r&&a(this,"_width",o(e,"x")-t),o(e,"y")<n?(a(this,"originY",o(e,"y")),a(this,"_height",i-o(e,"y"))):o(e,"y")>i&&a(this,"_height",o(e,"y")-n)}},t.prototype.completePainting=function(){s(this,"vacuatePoints",[0]),a(this,"initializedWidth",o(this,"_width")),a(this,"initializedHeight",o(this,"_height"));for(var e=0,t=o(this,"points");e<t.length;e++){var n=t[e];a(n,"x",o(n,"x")-o(this,"originX")),a(n,"y",o(n,"y")-o(this,"originY"))}a(this,"isPainting",!1),a(this,"pathDefinitionCache",void 0)},Object.defineProperty(t.prototype,"pointsCount",{get:function(){return o(o(this,"points"),"length")},enumerable:!0,configurable:!0}),t.prototype.pointHitTestContent=function(e,t,n){for(var r=new f.PolylineTester,i=0,a=s(this,"displayPoints",[]);i<a.length;i++){var c=a[i];s(r,"pushPoint",[c])}return s(r,"hitTest",[o(o(this,"state"),"strokeWidth")+n,e,t])},t.prototype.renderSvgContent=function(){var e=o(o(this,"state"),"strokeColor"),t=e[0],n=e[1],r=e[2];return p.createElement("path",{key:o(this,"key"),d:s(this,"getPathDefinition",[]),style:c({stroke:"rgb("+t+","+n+","+r+")",strokeWidth:o(o(this,"state"),"strokeWidth"),fill:"none",strokeLinejoin:"round",strokeLinecap:"round"})})},t.prototype.getPathDefinition=function(){return o(this,"pathDefinitionCache")||a(this,"pathDefinitionCache",s(this,"createPathDefinition",[])),o(this,"pathDefinitionCache")},t.prototype.createPathDefinition=function(){var e=c([]),t=s(this,"displayPoints",[]);if(o(t,"length")>2){var n=o(t,0),r=n.x,i=n.y;s(e,"push",["M "+r+" "+i]);var a=s(this,"getControlPoint",[o(t,1),o(t,0),o(t,2),.2]);s(e,"push",["Q "+o(o(a,0),"x")+" "+o(o(a,0),"y")+", "+o(o(t,1),"x")+" "+o(o(t,1),"y")]);for(var u=o(a,1),p=2;p<o(t,"length")-2;++p){var l=s(this,"getControlPoint",[o(t,p),o(t,p-1),o(t,p+1),.2]);s(e,"push",["C "+o(u,"x")+" "+o(u,"y")+", "+o(o(l,0),"x")+" "+o(o(l,0),"y")+", "+o(o(t,p),"x")+" "+o(o(t,p),"y")]),u=o(l,1)}var h=o(t,"length")-2;s(e,"push",["Q "+o(o(t,h),"x")+" "+o(o(t,h),"y")+", "+o(o(t,h+1),"x")+" "+o(o(t,h+1),"y")])}else for(p=0;p<o(t,"length");++p){var f=o(t,p),d=f.x,y=f.y;s(e,"push",0===p?["M"+d+" "+y]:["L"+d+" "+y])}return s(e,"join",[" "])},t.prototype.displayPoints=function(){var e=this;if(o(this,"isPainting"))return s(o(this,"points"),"map",[function(t){return c({x:o(t,"x")-o(e,"originX"),y:o(t,"y")-o(e,"originY")})}]);var t=y(o(this,"_width"),o(this,"initializedWidth")),n=y(o(this,"_height"),o(this,"initializedHeight"));return 1===t&&1===n?o(this,"points"):s(o(this,"points"),"map",[function(e){return c({x:o(e,"x")*t,y:o(e,"y")*n})}])},t.prototype.getControlPoint=function(e,t,n,r){var i=s(this,"calcHypotenuse",[o(e,"x")-o(t,"x"),o(e,"y")-o(t,"y")]),u=s(this,"calcHypotenuse",[o(e,"x")-o(n,"x"),o(e,"y")-o(n,"y")])/(i+1e-6),p=c({x:0,y:0});u>1?(a(p,"x",o(t,"x")-(o(e,"x")+(o(n,"x")-o(e,"x"))/(u+1e-6))),a(p,"y",o(t,"y")-(o(e,"y")+(o(n,"y")-o(e,"y"))/(u+1e-6)))):(a(p,"x",o(e,"x")+(o(t,"x")-o(e,"x"))*u-o(n,"x")),a(p,"y",o(e,"y")+(o(t,"y")-o(e,"y"))*u-o(n,"y"))),p=c({x:o(p,"x")*r,y:o(p,"y")*r});var l=c({x:o(e,"x")+o(p,"x"),y:o(e,"y")+o(p,"y")}),h=c({x:o(e,"x")-o(p,"x"),y:o(e,"y")-o(p,"y")});return c([l,h])},t.prototype.calcHypotenuse=function(e,t){return s(Math,"sqrt",[e*e+t*t])},t.prototype.needKeepLineAngle=function(e,t,n){return!1},t.prototype.vacuatePoints=function(e){var t=3/o(s(o(this,"context"),"getViewState",[]),"pixelWidth"),n=s(Math,"max",[0,o(this,"lastVacuateIndex")-30]),r=s(Math,"max",[0,o(o(this,"points"),"length")-e-1]);if(r>=n+2){var i=d.pointsWithDouglasPeucker(c({threshold:t,beginIndex:n,endIndex:r,points:o(this,"points")})),u=r-n+1;o(i,"length")!==u&&s(o(this,"points"),"splice",[n,u].concat(i))}a(this,"lastVacuateIndex",s(Math,"max",[o(this,"lastVacuateIndex"),r]))},t}(i.wrapSuperClass(h.Editable));i.defineClass("0",m,{superClass:"./abstract/Editable:Editable",name:"CurveShape",properties:[{name:"originX",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"originY",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"initializedWidth",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"initializedHeight",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"_width",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"_height",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"state",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../appState:MemberState"),decorators:[]},{name:"points",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getObjectType({index:i.getReferenceType("./TypeDefinitions:Point")}),decorators:[]},{name:"isPainting",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"pushedPointsCount",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"lastVacuateIndex",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"pathDefinitionCache",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.String),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[p.transient]},{name:"width",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"height",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"selectable",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"hitTestingBoxMargin",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"pointsCount",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]}],methods:[{name:"pushPoint",isPublic:!0,parameterTypes:[i.getReferenceType("./TypeDefinitions:Point")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"completePainting",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"pointHitTestContent",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"renderSvgContent",isPublic:!1,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.Any),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"getPathDefinition",isPublic:!1,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.String),decorators:[]},{name:"createPathDefinition",isPublic:!1,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.String),decorators:[]},{name:"displayPoints",isPublic:!1,parameterTypes:[],returnType:i.getObjectType({index:i.getReferenceType("./TypeDefinitions:Point")}),decorators:[]},{name:"getControlPoint",isPublic:!1,parameterTypes:[i.getReferenceType("./TypeDefinitions:Point"),i.getReferenceType("./TypeDefinitions:Point"),i.getReferenceType("./TypeDefinitions:Point"),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getObjectType({index:i.getReferenceType("./TypeDefinitions:Point")}),decorators:[]},{name:"calcHypotenuse",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"needKeepLineAngle",isPublic:!1,parameterTypes:[i.getReferenceType("./TypeDefinitions:Point"),i.getReferenceType("./TypeDefinitions:Point"),i.getReferenceType("./TypeDefinitions:Point")],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"vacuatePoints",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]}]}),i=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/Eraser","1.2.0"),o=i.setter,a=i.caller,s=i.getter;n(0);var c=n(6);n(6),n(3),i.defineType("0",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{context:i.getReferenceType("../framework:ApplianceContext"),fixedCursorInScenePoint:i.getSingletonType(i.TypeEnum.Undefined)}}),i.getReferenceType("./tools:Gesture")])),i.defineExport("0","Eraser");var u=function(e){function t(t){var n=e.call(this)||this;return o(n,"context",t),n}return r(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onClick=function(e){a(this,"removeHitComponents",[e])},t.prototype.onDrag=function(e){a(this,"removeHitComponents",[e])},t.prototype.removeHitComponents=function(e){for(var t=e.hitTestIdentifies,n=0,r=a(s(s(this,"context"),"scene"),"editablesWithHitIdentifies",[t]);n<r.length;n++){var i=r[n];a(s(s(this,"context"),"scene"),"removeComponent",[i])}},t}(i.wrapSuperClass(c.Gesture));t.Eraser=u,i.defineClass("0",u,{superClass:"./tools:Gesture",name:"Eraser",properties:[{name:"context",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../framework:ApplianceContext"),decorators:[]},{name:"fixedCursorInScenePoint",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Undefined),decorators:[]}],methods:[{name:"onClick",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDrag",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"removeHitComponents",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]}]}),i=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/Arraw","1.2.0"),o=i.setter,a=i.getter,s=i.caller,c=i.creator,u=n(0);n(0),n(3);var p=n(6);n(6);var l=n(2);n(2),n(3);var h=n(5);n(5),n(4),n(11),i.defineType("1",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{context:i.getReferenceType("../framework:ApplianceContext"),paintingRectangleShape:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("#0"),i.getSingletonType(i.TypeEnum.Null)]),beginPoint:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./TypeDefinitions:Point"),i.getSingletonType(i.TypeEnum.Null)]),isShiftPress:i.getSingletonType(i.TypeEnum.Boolean),fixedCursorInScenePoint:i.getSingletonType(i.TypeEnum.Undefined)}}),i.getReferenceType("./tools:Gesture")])),i.defineExport("1","ArrowAppliance");var f=function(e){function t(t){var n=e.call(this)||this;return n.paintingRectangleShape=null,n.beginPoint=null,n.isShiftPress=!1,o(n,"context",t),n}return r(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onDraggingStateChanged=function(e){var t=e.x,n=e.y;a(this,"isDragging")?(o(this,"paintingRectangleShape",new d(a(this,"context"))),o(a(this,"paintingRectangleShape"),"originX",t),o(a(this,"paintingRectangleShape"),"originY",n),s(a(a(this,"context"),"scene"),"addComponent",[a(this,"paintingRectangleShape")]),o(this,"beginPoint",c({x:t,y:n}))):(s(a(this,"paintingRectangleShape"),"completePainting",[]),o(this,"paintingRectangleShape",null),o(this,"beginPoint",null))},t.prototype.onDrag=function(e){var t=e.x,n=e.y,r=a(this,"paintingRectangleShape");o(r,"originX",s(Math,"min",[t,a(a(this,"beginPoint"),"x")])),o(r,"originY",s(Math,"min",[n,a(a(this,"beginPoint"),"y")])),o(r,"directionX",a(a(this,"beginPoint"),"x")-a(r,"originX")==0?1:0),o(r,"directionY",a(a(this,"beginPoint"),"y")-a(r,"originY")==0?1:0),o(r,"width",s(Math,"abs",[t-a(a(this,"beginPoint"),"x")])),o(r,"height",s(Math,"abs",[n-a(a(this,"beginPoint"),"y")]))},t.prototype.onDestroy=function(){a(this,"paintingRectangleShape")&&s(a(this,"paintingRectangleShape"),"completePainting",[])},t}(i.wrapSuperClass(p.Gesture));t.ArrowAppliance=f,i.defineClass("1",f,{superClass:"./tools:Gesture",name:"ArrowAppliance",properties:[{name:"context",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../framework:ApplianceContext"),decorators:[]},{name:"paintingRectangleShape",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("#0"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"beginPoint",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./TypeDefinitions:Point"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"isShiftPress",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"fixedCursorInScenePoint",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Undefined),decorators:[]}],methods:[{name:"onDraggingStateChanged",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDrag",isPublic:!1,parameterTypes:[i.getReferenceType("../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDestroy",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]}]}),i.defineType("0",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{originX:i.getSingletonType(i.TypeEnum.Number),originY:i.getSingletonType(i.TypeEnum.Number),width:i.getSingletonType(i.TypeEnum.Number),height:i.getSingletonType(i.TypeEnum.Number),state:i.getReferenceType("../appState:MemberState"),isPainting:i.getSingletonType(i.TypeEnum.Boolean),directionX:i.getSingletonType(i.TypeEnum.Number),directionY:i.getSingletonType(i.TypeEnum.Number),selectable:i.getSingletonType(i.TypeEnum.Boolean),hitTestingBoxMargin:i.getSingletonType(i.TypeEnum.Number)}}),i.getReferenceType("./abstract/Editable:Editable")]));var d=function(e){function t(t){var n=e.call(this,t)||this;return n.originX=0,n.originY=0,n.width=0,n.height=0,n.isPainting=!0,n.directionX=0,n.directionY=0,o(n,"state",s(t,"getMemberState",[])),n}return r(t,e),Object.defineProperty(t.prototype,"selectable",{get:function(){return!a(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return a(a(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),t.prototype.completePainting=function(){o(this,"isPainting",!1)},t.prototype.pointHitTestContent=function(e,t,n){var r=new h.PolylineTester,i=c({x:a(this,"directionX")?0:a(this,"width"),y:a(this,"directionY")?0:a(this,"height")}),o=c({x:a(this,"directionX")?a(this,"width"):0,y:a(this,"directionY")?a(this,"height"):0});return s(r,"pushPoint",[i]),s(r,"pushPoint",[o]),s(r,"hitTest",[n+12,e,t])},t.prototype.renderSvgContent=function(){var e=c({x:a(this,"directionX")?0:a(this,"width"),y:a(this,"directionY")?0:a(this,"height")}),t=c({x:a(this,"directionX")?a(this,"width"):0,y:a(this,"directionY")?a(this,"height"):0}),n=a(a(this,"state"),"strokeColor"),r=n[0],i=n[1],o=n[2];return u.createElement("g",null,u.createElement("defs",null,u.createElement("marker",{id:"arrow"+a(this,"key"),markerWidth:"5",markerHeight:"6",refX:"3",refY:"3",orient:"auto"},u.createElement("polyline",{points:"0,0 3,3 0,6",fill:"none",stroke:"rgb("+r+","+i+","+o+")",key:a(this,"key"),strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"1"}))),u.createElement("line",{x1:a(e,"x"),y1:a(e,"y"),x2:a(t,"x"),y2:a(t,"y"),stroke:"rgb("+r+","+i+","+o+")",key:a(this,"key"),strokeWidth:"4",markerEnd:"url(#arrow"+a(this,"key")+")",fill:"none",strokeLinejoin:"round",strokeLinecap:"round"}))},t}(i.wrapSuperClass(l.Editable));i.defineClass("0",d,{superClass:"./abstract/Editable:Editable",name:"ArrowShape",properties:[{name:"originX",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"originY",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"width",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"height",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"state",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("../appState:MemberState"),decorators:[]},{name:"isPainting",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"directionX",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"directionY",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"selectable",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"hitTestingBoxMargin",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]}],methods:[{name:"completePainting",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"pointHitTestContent",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"renderSvgContent",isPublic:!1,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.Any),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]}]}),i=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(103),i=n(55),o=n(185),a=n(57),s=n(186),c=function(){function e(e,t,n,c,u,p){var l=this;this.screenshotMaker=new s.ScreenshotMaker,this.magixEventsManager=new o.MagixEventsManager,this.didSetupViewSize=!1,this.didCallSetup=!1,this.onAnimationTick=function(){if(l.shouldDisplayNow()&&l.tagBoxesCache){var e=l._camera.rectangle,t=l.callWhenRender(function(){return l.applianceManager.renderSvg(void 0,e)});l._displayerSyncNode.setProps({svgNodes:t||[],tagBoxes:l.tagBoxesCache||[],transform:l._camera.transform,appliance:l.currentAppliance}),l.onCameraTransformChanged(l._camera.transform)}},this.deviceType=t,this.screenType=n,this._callbacks=Object.freeze(Object.assign({},c)),this.willHideSelfCursor=p,this._displayerSyncNode=r.createPropsSyncNode({phase:a.RoomPhase.Connected,svgNodes:[],tagBoxes:[],appliance:"",disableOperations:u,transform:{deltaX:0,deltaY:0,scaleX:1,scaleY:1}}),this.animationFactory=e,this._callbacks.onCursorViewsUpdate?(this.cursorViewsAnimation=e.create(),this.displayerAnimation=this.cursorViewsAnimation.createChildTickBeforeMe()):this.displayerAnimation=e.create(),this.displayerAnimation.onAfterTick=this.onAnimationTick,this._camera=new i.Camera(this.screenType,this.displayerAnimation.createChildTickBeforeMe())}return e.prototype.createDisplayerChildAnimation=function(){return this.displayerAnimation.createChildTickBeforeMe()},e.prototype.refreshViewSizeWithElement=function(e){var t=e.clientWidth,n=e.clientHeight,r=this._camera.width!==t||this._camera.height!==n;return r&&this._camera.setSize(t,n),this.didSetupViewSize||(this.didSetupViewSize=!0,this.checkAndSetupCameraView()),r&&(this.cursorsViews&&this.cursorsViews.refreshWhoFixedOnScreen(this.applianceManager.getMemberDisplayers(),this.observerId),this.displayerAnimation.invokeOnce()),r},e.prototype.setup=function(){this.didCallSetup||(this.didCallSetup=!0,this.checkAndSetupCameraView()),this.cursorViewsAnimation&&(this.cursorsViews=new i.CursorViews({observerId:this.observerId,animationTickGen:this.cursorViewsAnimation,camera:this._camera,willHideObserver:this.willHideSelfCursor,memberDisplayers:this.applianceManager.getMemberDisplayers(),onCursorViewsUpdate:this._callbacks.onCursorViewsUpdate}))},e.prototype.dispose=function(){this.cursorsViews&&this.cursorsViews.dispose()},Object.defineProperty(e.prototype,"callbacks",{get:function(){return this._callbacks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayerSyncNode",{get:function(){return this._displayerSyncNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorViews",{get:function(){return this.cursorsViews?this.cursorsViews.cursorViews:e.emptyCursorView},enumerable:!0,configurable:!0}),e.prototype.checkAndSetupCameraView=function(){this.didCallSetup&&this.didSetupViewSize&&this._camera.setRectangle(this.applianceManager.getViewState(),!1)},e.prototype.convertToPointInWorld=function(e){return this._camera.calculatePointInScreenToScene(e)},e.prototype.refreshDisplayer=function(){var e=this.applianceManager;this.tagBoxesCache=this.callWhenRender(function(){return e.renderTagBoxes()}),this.cursorsViews&&this.cursorsViews.refreshMemberDisplayers(e.getMemberDisplayers(),this.observerId),this.displayerAnimation.invokeOnce()},e.prototype.screenshot=function(e){throw new Error("this method is not supported this version")},e.prototype.dispatchMagixEventWithObject=function(e){this.magixEventsManager.dispatchMagixEvent(e)},e.prototype.addMagixEventListener=function(e,t){this.magixEventsManager.addMagiEventListener(e,t)},e.prototype.removeMagixEventListener=function(e,t){this.magixEventsManager.removeMagixEventListener(e,t)},e.prototype.waitMagixEvent=function(e){return this.magixEventsManager.waitMagixEvent(e)},e.covertMemberDisplayerToMember=function(e){return{memberId:e.memberId,isRtcConnected:e.isRtcConnected,information:e.information}},e.covertSceneToPpt=function(e){var t=e.ppt;return t?t.src:""},e.prototype.callWhenRender=function(e){try{return e()}catch(e){this._callbacks.onCatchErrorWhenRender?this._callbacks.onCatchErrorWhenRender(e):console.error(e)}},e.prototype.setViewSize=function(e,t){console.warn("setViewSize was deprecated. Please replace it with refreshViewSize"),this.refreshDisplayer()},e.emptyCursorView=Object.freeze([]),e}();t.DisplayerImplement=c},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(35)),r(n(175)),r(n(180)),r(n(181)),r(n(106)),r(n(183))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(105),i=function(){function e(e){var t=this;this.onLimiterInvoke=function(){if(t.nextInvoker)try{t.nextInvoker()}finally{t.nextInvoker=void 0}},this.limiter=new r.InvokeFrequencyLimiter(e,this.onLimiterInvoke)}return e.prototype.invoke=function(e){this.nextInvoker=e,this.limiter.invoke()},e.prototype.cancel=function(){this.nextInvoker=void 0,this.limiter.cancel()},e}();t.UnderclockingInvoker=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnecting="disconnecting",e.Disconnected="disconnected"}(t.RoomPhase||(t.RoomPhase={}))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(204)),r(n(205)),r(n(27))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(12),s=n(1),c=n(0),u=n(161),p=n(170),l=n(172),h=n(173),f=n(174),d=n(102);!function(e){e.Desktop="desktop",e.Phone="phone",e.Pad="pad",e.TV="tv"}(o=t.ScreenType||(t.ScreenType={})),t.Scope="cloud";var y=function(){var e="wss://cloudhare.herewhite.com:8644",t="http://persistence.herewhite.com",n="https://cdnroom.herewhite.com";return e||(e="ws://*:3001"),e=e.replace(/\*/i,function(){return""+window.location.hostname}),t||(t="http://localhost:3002"),n||(n="https://cdnroom.herewhite.com"),Object.freeze({socketOrigin:e,persistenceServerOrigin:t,assetsPrefix:n})}(),g=function(){function e(t){void 0===t&&(t={}),t.deviceType&&t.screenType?(this.deviceType=t.deviceType,this.screenType=t.screenType):t.deviceType&&!t.screenType?(this.deviceType=t.deviceType,this.screenType=t.deviceType===a.DeviceType.Desktop?o.Desktop:o.Phone):!t.deviceType&&t.screenType?(this.deviceType=t.screenType===o.Desktop?a.DeviceType.Desktop:a.DeviceType.Touch,this.screenType=t.screenType):(this.deviceType=a.DeviceType.Desktop,this.screenType=o.Desktop),this.akkoFactory=new c.AkkoFactory(a.default,{enableAnimationFrame:!0,persistenceServerOrigin:this.standardizeOrigin(y.persistenceServerOrigin),assetsPrefix:this.standardizeOrigin(y.assetsPrefix),jsxFactory:s.createElement,netStateAdapter:e.netState,clientFactory:new u.WebSocketClientFactory(this.standardizeOrigin(y.socketOrigin)),convertIdToUrl:t.urlInterrupter||function(e){return e}}),t.mediaPlayerFactory&&(this.mediaAdapterFactory=new l.MediaAdapterFactory(this.akkoFactory,t.mediaPlayerFactory)),this.animationTickGenFactory=new p.AnimationTickGenFactory,this.mouseCursorDefinition=h.getWholeMouseCursorDefinition(t.mouseCursorDefinition),this.zoomMaxScale=void 0===t.zoomMaxScale?10:t.zoomMaxScale,this.zoomMinScale=void 0===t.zoomMinScale?.1:t.zoomMinScale}return e.prototype.standardizeOrigin=function(e){return e.replace(/\/$/i,"")},e.prototype.joinRoom=function(e,n){return void 0===n&&(n={}),r(this,void 0,void 0,function(){var r;return i(this,function(i){switch(i.label){case 0:return[4,(r=new d.RoomImplement({deviceType:this.deviceType,screenType:this.screenType,akkoFactory:this.akkoFactory,mouseCursorDefinition:this.mouseCursorDefinition,disableOperations:!!e.disableOperations,animationTickGenFactory:this.animationTickGenFactory,zoomMaxScale:this.zoomMaxScale,zoomMinScale:this.zoomMinScale,callbacks:n})).connect({uuid:e.uuid,roomToken:e.roomToken,userToken:"cloud"===t.Scope?void 0:e.userToken,payload:this.deviceType})];case 1:return i.sent(),[2,r]}})})},e.prototype.replayRoom=function(e,t,n){return void 0===n&&(n={}),r(this,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:throw new Error("this method is not supported this version");case 1:return r.sent(),[3,4];case 2:return[4,n.setupMediaPlayer(e,t,this.akkoFactory)];case 3:r.sent(),r.label=4;case 4:return[2,n]}})})},e.netState=new f.NetState,e}();t.WhiteWebSdk=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116);t.Serializer=r.Serializer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Indeterminate=0]="Indeterminate",e[e.Circular=1]="Circular",e[e.Noncircular=2]="Noncircular"}(t.HandleState||(t.HandleState={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(18);!function(e){e[e.Border=0]="Border",e[e.Compound=1]="Compound",e[e.Object=2]="Object",e[e.Handle=3]="Handle"}(r=t.ExpandedNodeClass||(t.ExpandedNodeClass={}));var o=function(){function e(e,t,n){this.templateEnvironment=e,this.templateType=t,this.params=n,this.expandedParamNodes=[],this.convertTypeToGeneratorParam=this.convertTypeToGeneratorParam.bind(this);for(var r=0;r<n.length;++r)this.expandedParamNodes[r]=void 0}return e.prototype.getExpandedExpression=function(){return this.expandNode(this.templateType)},e.prototype.expandNode=function(e){switch(e.typeEnum){case i.TypeEnum.Any:case i.TypeEnum.Never:case i.TypeEnum.Undefined:case i.TypeEnum.Null:case i.TypeEnum.String:case i.TypeEnum.Number:case i.TypeEnum.Boolean:case i.TypeEnum.Function:return{type:e,clazz:r.Border};case i.TypeEnum.Object:var t=e,n={};for(var o in t.properties){var a=t.properties[o];n[o]=this.expandNode(a)}return{type:t,clazz:r.Object,key:this.expandNode(t.key),index:this.expandNode(t.index),properties:n};case i.TypeEnum.And:case i.TypeEnum.Or:for(var s=e,c=[],u=0,p=s.children;u<p.length;u++){var l=p[u];c.push(this.expandNode(l))}return{type:s,clazz:r.Compound,children:c};case i.TypeEnum.Generator:return this.expandGeneratorType(e);case i.TypeEnum.Generic:return this.expandGenericType(e);case i.TypeEnum.Reference:var h=(0,this.templateEnvironment.serializerContext.referenceTypeReplacer)(e);return this.expandNode(h)}throw new Error("unrecognized enum type "+e.typeEnum)},e.prototype.expandGeneratorType=function(e){var t=e.params.map(this.convertTypeToGeneratorParam),n=this.templateEnvironment.getTemplate(e.template);return{clazz:r.Handle,handle:n.getHandle(t)}},e.prototype.convertTypeToGeneratorParam=function(e){var t=this.expandNode(e);return t.clazz===r.Handle?t.handle:t.type},e.prototype.expandGenericType=function(e){var t=e.index,n=this.expandedParamNodes[t];if(!n){var r=this.params[t];if(!r)throw new Error("generic index "+t+" is out of range: 0 ~ "+(this.params.length-1));n=this.covertParamTypeToExpandedNode(r),this.expandedParamNodes[t]=n}return n},e.prototype.covertParamTypeToExpandedNode=function(e){return"id"in e?this.expandNode(e):{clazz:r.Handle,handle:e}},e}();t.ExpandedExpressionGenerator=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.rootClass=e,this.classReflectionsMap=Object.freeze(t.classReflectionsMap),this.serializerObjectsMap=Object.freeze(t.serializerObjectsMap)}return e.prototype.classReflectionWithId=function(e){if(!(e in this.classReflectionsMap))throw new Error("ClassReflection not found with id "+e);return this.classReflectionsMap[e]},e.prototype.serializerObjectWithId=function(e){if(!(e in this.serializerObjectsMap))throw new Error("SerializerObject not found with id "+e);return this.serializerObjectsMap[e]},e}();t.Library=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(65)),r(n(125))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){}}();t.AkkoMethodDecorator=r;var i=function(){return function(){}}();t.AkkoPropertyDecorator=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Transitory="transitory",e.Persistent="persistent",e.Historied="historied"}(t.RoomMode||(t.RoomMode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AkkoVersion="1.2.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),i=function(){return function(){if(!r.isInMagix()){var e=this.constructor&&this.constructor.name;throw e?new Error("can't construct "+e+" out of Magix, it's an AkkoObject"):new Error("can't construct an AkkoObject out of Magix")}r.getContext().__identifierGenerator.bind(this)}}();t.AkkoObject=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(15),o=n(127),a=[],s=void 0;t.setClassReflectionGetter=function(e){s=e};var c=!1,u=!1;function p(e){c=e.willRejectSet,u=e.foundModify}t.runWithAccessorContext=function(e,t){try{return a.push(e),p(e),t()}finally{!function(e){e.willRejectSet=c,e.foundModify=u}(e),a.pop(),p(a[a.length-1]||{willRejectSet:!1,foundModify:!1})}},t.creator=function(e){return i.getContext().__identifierGenerator.bind(e)},t.getter=function(e,t){return e[t]},t.setter=function(e,t,n){if(u||"object"!=typeof e||null===e||function(e){return r.IdentifierGenerator.checkIsNewObject(r.findIdentifierWith(e))}(e)||function(e,t){var n=s(e);if(n){var r=n.properties[t];if(r)return r.isTransient}return!1}(e,t)||(u=!0),c&&u)throw new Error("Magix is frozen, you can't modify anything");return e[t]=n},t.remover=function(e,t){if(!u&&"object"==typeof e&&null!==e){var n=r.findIdentifierWith(e);r.IdentifierGenerator.checkIsNewObject(n)||(u=!0)}if(c&&u)throw new Error("Magix is frozen, you can't modify anything");return delete e[t]},t.caller=function(e,t,n,r){var i;return e===Object?i=o.ObjectInterceptProxy[t]:e instanceof Array&&(i=o.ArrayPrototypeInterceptProxy[t]),(i||(r||e)[t]).apply(e,n)},t.prefix=function(e,t,n){return e[t]+=n},t.postfix=function(e,t,n){var r=e[t];return e[t]+=n,r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.length=function(e){for(var t=new String(e),n=0,r=0,i=0;i<t.length;++i)(r=t.charCodeAt(i))<128?n+=1:r<2048?n+=2:55296==(64512&r)&&56320==(64512&t.charCodeAt(i+1))?(++i,n+=4):n+=3;return n},t.read=function(e,t,n){if(n<1)return"";for(var r,i=t+n,o=[],a=null,s=0;t<i;)(r=e.getUint8(t++))<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e.getUint8(t++):r>239&&r<365?(r=((7&r)<<18|(63&e.getUint8(t++))<<12|(63&e.getUint8(t++))<<6|63&e.getUint8(t++))-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e.getUint8(t++))<<6|63&e.getUint8(t++),s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,o)),s=0);return a?(s&&a.push(String.fromCharCode.apply(String,o.slice(0,s))),a.join("")):String.fromCharCode.apply(String,o.slice(0,s))},t.write=function(e,t){for(var n,r,i=new String(e),o=0;o<i.length;++o)(n=i.charCodeAt(o))<128?t.pushUInt8(n):n<2048?(t.pushUInt8(n>>6|192),t.pushUInt8(63&n|128)):55296==(64512&n)&&56320==(64512&(r=i.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&r),++o,t.pushUInt8(n>>18|240),t.pushUInt8(n>>12&63|128),t.pushUInt8(n>>6&63|128),t.pushUInt8(63&n|128)):(t.pushUInt8(n>>12|224),t.pushUInt8(n>>6&63|128),t.pushUInt8(63&n|128))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(70),i=n(29),o=n(30),a=function(){function e(e){this.dataView=e,this.index=0}return e.prototype.readByte=function(){var e=this.dataView.getUint8(this.index);return this.index+=1,e},e.prototype.readUnsignedInteger16=function(){var e=this.dataView.getUint16(this.index,!0);return this.index+=2,e},e.prototype.readInteger32=function(){var e=this.dataView.getInt32(this.index,!0);return this.index+=4,e},e.prototype.readUnsignedInteger32=function(){var e=this.dataView.getUint32(this.index,!0);return this.index+=4,e},e.prototype.readInteger53=function(){var e=this.dataView.getInt32(this.index,!0);this.index+=4;var t=this.dataView.getInt32(this.index,!0);return this.index+=4,t*o.Pow32+e},e.prototype.readFloat64=function(){var e=this.dataView.getFloat64(this.index,!0);return this.index+=8,e},e.prototype.readString=function(){var e=this.readInteger32(),t=r.read(this.dataView,this.index,e);return this.index+=e,t},e.prototype.readIdentifier=function(){var e=this.readUnsignedInteger16(),t=this.readUnsignedInteger32();return i.generateIdentifier(e,t)},e.prototype.skipBytes=function(e){this.index+=e},e}();t.Reader=a},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(73)),r(n(141)),r(n(81)),r(n(154)),r(n(155))},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(13),a=n(19),s=n(7),c=700;!function(e){e.Real="real",e.Illusion="illusion",e.Persistence="persistence"}(i=t.ImagePhase||(t.ImagePhase={}));var u=function(){function e(e,t,n,r){void 0===r&&(r=!1),this.stateFactory=new a.StateFactory(e,t,n,r)}return Object.defineProperty(e.prototype,"library",{get:function(){return this.stateFactory.library},enumerable:!0,configurable:!0}),e.prototype.createWithParameters=function(e){var t=e.observerId,n=e.args,r=e.callbacks,i=this.stateFactory.library,o=this.stateFactory.createWithParameters(n,t),s=new a.Trigger(i),c=o.createOperator({escapeObjectFilter:r&&r.escapeObjectFilter});return new p({library:i,stateOperator:c,trigger:s,nextObserverFrameId:0,callbacks:r})},e.prototype.createWithSnapshot=function(e){var t=e.observerId,n=e.snapshotFrame,r=e.actionFrames,i=e.triggerSourceImage,o=e.nextObserverFrameId,s=e.callbacks,c=this.stateFactory.library,u=this.stateFactory.createWithSnapshot(t,n,r),l=i?i.trigger:new a.Trigger(c),h=u.createOperator({escapeObjectFilter:s&&s.escapeObjectFilter});return new p({library:c,stateOperator:h,trigger:l,nextObserverFrameId:o,callbacks:s})},e}();t.ImageFactory=u;var p=function(){function e(e){var t=this;this.modifiable=!0,this.nextBeginGenerationId=0,this._phase=i.Real,this.illusionQueue=[],this.receiveEventFrame=function(e){t.callbacks.onEventFire&&e.authorId!==t.observerId&&t.callbacks.onEventFire({event:e.event,payload:e.payload,scope:e.scope,authorId:e.authorId})},this.invokeByTrigger=function(e,n,r){if(!t.modifiable&&r===a.TriggerInvokeMode.Modifiable){var i=t.forkStateOperator.state.library.rootClass,s=o.getClassReflection(i).methods[e].name;throw new Error("disable to invoke method "+s+" of trigger object. it's modifiable method. you can only invoke no-effects methods")}try{return t.findCurrentStateOperatorToModify(r).invoke(e,n,r)}finally{t.callbacks.onAfterInvokedByTrigger&&t.callbacks.onAfterInvokedByTrigger(r)}},this.onCatchDisplayStateActionFrame=function(e){var n=new s.FramePicker(e);t.illusionQueue.length>=c?t.changePhase(i.Persistence):(n.frameId=t.nextGeneratedFrameId,n.originalFrameId=t.nextGeneratedFrameId,t.nextGeneratedFrameId++,t.illusionQueue.push(n),t.changePhase(i.Illusion),t.callbacks.onCatchActionFrame&&t.callbacks.onCatchActionFrame(e))},this.forkStateOperator=e.stateOperator,this.forkStateOperator.state.eventFrameReceiver=this.receiveEventFrame,this.library=e.library,this.trigger=e.trigger,this.nextGeneratedFrameId=e.nextObserverFrameId,this.callbacks=Object.freeze(r({},e.callbacks)),this.observerId=this.forkStateOperator.state.observerId,this.trigger.receiver=this.invokeByTrigger}return e.prototype.clone=function(t){void 0===t&&(t={});var n=this.forkStateOperator.state.clone().createOperator({escapeObjectFilter:t.escapeObjectFilter}),r=new a.Trigger(this.library),i=new e({library:this.library,stateOperator:n,trigger:r,nextObserverFrameId:this.nextGeneratedFrameId,callbacks:t});i._phase=this._phase;for(var o=0,s=this.illusionQueue;o<s.length;o++){var c=s[o];i.illusionQueue.push(c)}return i},Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"triggerObject",{get:function(){return this.trigger.object},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameId",{get:function(){return this.forkStateOperator.state.frameId+this.illusionQueue.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextUserId",{get:function(){return this.displayStateOperator?this.displayStateOperator.state.nextUserId:this.forkStateOperator.state.nextUserId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verifiedFrameId",{get:function(){return this.forkStateOperator.state.frameId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){var e=this.illusionQueue[this.illusionQueue.length-1];return e?e.timestamp:this.forkStateOperator.state.timestamp},enumerable:!0,configurable:!0}),e.prototype.changePhase=function(e){if(this._phase!==e&&(this._phase=e,this.callbacks.onPhaseChanged))try{this.callbacks.onPhaseChanged(e)}catch(e){console.error(e)}},e.prototype.dispatch=function(e){if(!this.modifiable)throw new Error("disable to dispatch event. you can only invoke no-effects methods for trigger object");try{this.findCurrentStateOperatorToModify(a.TriggerInvokeMode.Modifiable).dispatch(e)}finally{if(this.callbacks.onEventFire)try{this.callbacks.onEventFire(e)}catch(e){console.error(e)}}},e.prototype.appendActionFrame=function(e){var t=new s.FramePicker(e);this.assertAppendFrameId(t);var n,r,o=!1;if(t.authorId===this.observerId){var a=this.illusionQueue.findIndex(function(e){return e.originalFrameId===t.originalFrameId});a>0&&(console.warn("received frame can't touch first illusion frame"),o=!0);var c=void 0;if(-1!==a&&(c=this.illusionQueue.splice(a,1)[0],r=Date.now()-c.timestamp),t.type===s.ActionFrameType.Ack){if(!c)throw new Error("not found frameId "+t.originalFrameId+" match to ACK frameId");c.frameId=t.frameId,c.originalFrameId=t.originalFrameId,c.timestamp=t.timestamp,n=c.frameBuffer}else n=e;this.phase===i.Persistence&&(o=!0)}else{if(t.type===s.ActionFrameType.Ack)throw new Error("received others' ACK frame");o=!0,n=e}if(this.appendActionFrameWithState(this.forkStateOperator.state,n),o&&this.displayStateOperator){var u=this.displayStateOperator.state.observerLatestGenerationId;u>this.nextBeginGenerationId&&(this.nextBeginGenerationId=u),this.displayStateOperator=void 0}this.changePhase(this.illusionQueue.length>0?i.Illusion:i.Real),this.callbacks.onReceivedRttReport&&void 0!==r&&this.callbacks.onReceivedRttReport(r)},e.prototype.assertAppendFrameId=function(e){var t=e.frameId,n=this.forkStateOperator.state.frameId+1;if(n!==t)throw new Error("find unexpected frame id "+t+", wanna "+n)},e.prototype.appendActionFrameWithState=function(e,t){try{e.appendActionFrame(t)}catch(e){if(this.callbacks.onCatchErrorWhenAppendFrame){var n=new s.FramePicker(t);this.callbacks.onCatchErrorWhenAppendFrame(n.authorId,e)}}},e.prototype.findCurrentStateOperatorToModify=function(e){return 0===this.illusionQueue.length||this.displayStateOperator||this.displayStateOperatorAndCreateIfNotExists(),e===a.TriggerInvokeMode.NoEffects?this.displayStateOperator||this.forkStateOperator:this.displayStateOperatorAndCreateIfNotExists()},e.prototype.displayStateOperatorAndCreateIfNotExists=function(){if(!this.displayStateOperator){for(var e=this.forkStateOperator.state.clone(),t=e.frameId+1,n=0,r=this.illusionQueue;n<r.length;n++){var o=r[n];o.frameId=t,this.appendActionFrameWithState(e,o.frameBuffer),t++}e.makeSureObserverGenerationIdAfter(this.nextBeginGenerationId),this.phase===i.Persistence?this.displayStateOperator=e.createOperator({escapeObjectFilter:this.callbacks.escapeObjectFilter}):this.displayStateOperator=e.createOperator({actionFrameCatcher:this.onCatchDisplayStateActionFrame,escapeObjectFilter:this.callbacks.escapeObjectFilter})}return this.displayStateOperator},e.prototype.destroy=function(){this.phase!==i.Persistence&&(this.changePhase(i.Persistence),this.displayStateOperator&&(this.displayStateOperator=this.displayStateOperator.state.createOperator({escapeObjectFilter:this.callbacks.escapeObjectFilter})))},e.prototype.snapshot=function(){return this.findCurrentStateOperatorToModify(a.TriggerInvokeMode.NoEffects).state.snapshot()},Object.defineProperty(e.prototype,"allUserIds",{get:function(){return this.findCurrentStateOperatorToModify(a.TriggerInvokeMode.NoEffects).state.allUserIds},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(13),o=n(7),a="__copiedTarget",s="__copiedMark",c="__identifier";function u(e){return a!==e&&s!==e&&c!==e}!function(e){e.Copy="copy",e.Reference="reference"}(r=t.AkkoValueCopierBehavior||(t.AkkoValueCopierBehavior={}));var p=function(){function e(e){void 0===e&&(e=!0),this.willCopyIdentifier=e,this.copiedOriginObjects=[],this.copiedTargetObjects=[]}return e.copy=function(t,n){void 0===n&&(n=!0);var r=new e(n);try{return r.copyValue(t)}finally{r.complete()}},e.prototype.complete=function(){for(var e=0,t=this.copiedOriginObjects;e<t.length;e++){delete t[e][a]}for(var n=0,r=this.copiedTargetObjects;n<r.length;n++){delete r[n][s]}},e.prototype.copyValue=function(e){if("function"==typeof e)throw new Error("AkkoObject's properties can't be function");if("object"!=typeof e||null===e)return e;switch(this.behaviorDecider?this.behaviorDecider(e):r.Copy){case r.Reference:return e;case r.Copy:if(e[s])return e;var t=e[a];return t||(t=this.copyObject(e),this.copiedOriginObjects.push(e),this.copiedTargetObjects.push(t),this.afterCopiedObject&&this.afterCopiedObject(t)),t}},e.prototype.copyObject=function(e){if(e.constructor===Object)return this.copyFlatObject(e);if(e instanceof Array)return this.copyArrayObject(e);if(i.isAkkoObject(e))return this.copyAkkoObject(e);throw new Error("akko can only copy FlatObject or AkkoObject or Array")},e.prototype.copyFlatObject=function(e){var t={};for(var n in this.setCopiedTarget(e,t),e)u(n)&&(t[n]=this.copyValue(e[n]));return this.willCopyIdentifier&&c in e&&o.bindIdentifier(t,e[c]),t},e.prototype.copyArrayObject=function(e){var t=[];this.setCopiedTarget(e,t);for(var n=0;n<e.length;++n)t[n]=this.copyValue(e[n]);return this.willCopyIdentifier&&c in e&&o.bindIdentifier(t,e[c]),t},e.prototype.copyAkkoObject=function(e){if(!this.willCopyIdentifier)throw new Error("it's must to copy identifier when copy AkkoObject");var t={},n=i.getClassReflection(e),r=n.clazz,a=n.properties;for(var s in this.setCopiedTarget(e,t),a)u(s)&&(t[s]=this.copyValue(e[s]));return c in e&&o.bindIdentifier(t,e[c]),t.constructor=r,Object.setPrototypeOf(t,r.prototype),t},e.prototype.setCopiedTarget=function(e,t){try{e[a]=t}catch(e){throw new Error("can't modify "+a+" when copy object: "+e.message)}t[s]=!0},e}();t.AkkoValueCopier=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(74);t.filterParameters=function(e,t){return new i(t).filterParameters(e)},t.filterResult=function(e,t){return new i(t).filterResult(e)};var i=function(){function e(e){var t=this;this.decideCopierBehavior=function(e){if("function"==typeof e)throw new Error("can't let it pass Magix border: "+e);if("object"!=typeof e||null===e)return r.AkkoValueCopierBehavior.Reference;if(t.customObjectFilter&&t.customObjectFilter(e))return r.AkkoValueCopierBehavior.Reference;if(e.constructor===Object)return r.AkkoValueCopierBehavior.Copy;if(e instanceof Array)return r.AkkoValueCopierBehavior.Copy;throw new Error("can't let it pass Magix border: "+e)},this.identifierGenerator=e.identifierGenerator,this.customObjectFilter=e.customObjectFilter}return e.prototype.filterParameters=function(e){var t=this,n=new r.AkkoValueCopier(!1);n.afterCopiedObject=function(e){return t.identifierGenerator.bind(e)};try{e=e.slice();for(var i=0;i<e.length;++i)e[i]=n.copyValue(e[i]);return e}finally{n.complete()}},e.prototype.filterResult=function(e){var t=new r.AkkoValueCopier(!1);t.behaviorDecider=this.decideCopierBehavior;try{return t.copyValue(e)}finally{t.complete()}},e}()},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),o=n(77),a=n(75),s=n(7),c=function(){function e(e,t,n,s,c){var u=this;this.state=e,this.jsxFactory=t,this.identifierContext=n,this.nextFrameId=s,this.callbacks=c,this.invoke=function(e,t,n){var r,s,c=u.identifierGeneratorForInvoker(n);return n===o.TriggerInvokeMode.Modifiable?(r=u.createMagixContext(i.Environment.Illusion,c,u.state.observerId),s={willRejectSet:!1,foundModify:!1}):(r=u.createMagixContext(i.Environment.NoEffects,c,u.state.observerId),s={willRejectSet:!0,foundModify:!1}),i.runWithContext(s,r,u.jsxFactory,function(){var r=t.slice(),i=a.filterParameters(t,{identifierGenerator:c}),s=c.latestGenerationId;try{var p=u.callbacks.invoke(e,i);return a.filterResult(p,{identifierGenerator:c,customObjectFilter:u.callbacks.escapeObjectFilter})}finally{n===o.TriggerInvokeMode.Modifiable&&u.callbacks.catchActionFrame&&u.sendInvokerActionFrame(e,r,s)}})},this.callbacks=Object.freeze(r({},c))}return e.prototype.identifierGeneratorForInvoker=function(e){var t=this.identifierContext.identifierGeneratorWithObserverId(this.state.observerId);return e===o.TriggerInvokeMode.NoEffects?t.clone():t},e.prototype.sendInvokerActionFrame=function(e,t,n){var r=i.getContext(),o=r.timestamp,a=r.observerId,c={frameId:this.nextFrameId,originalFrameId:this.nextFrameId,timestamp:o,authorId:a,type:s.ActionFrameType.Invoker,beginGenerationId:n,methodId:e,parameters:t};this.nextFrameId++;try{this.callbacks.catchActionFrame(c)}catch(e){console.error(e)}},e.prototype.dispatch=function(e){var t=this,n=e.event,r=e.payload,o=e.scope,c=e.authorId;o===s.EventScope.System&&"Enter"===n&&this.callbacks.addObserver(c);try{var u=this.identifierContext.identifierGeneratorWithObserverId(c),p=a.filterParameters([r],{identifierGenerator:u})[0],l=u.latestGenerationId,h=this.createMagixContext(i.Environment.Illusion,u,c);i.runWithContext({willRejectSet:!1,foundModify:!1},h,this.jsxFactory,function(){try{t.callbacks.dispatch(n,p,o)}finally{t.callbacks.catchActionFrame&&t.sendEventActionFrame(e,l)}})}finally{o===s.EventScope.System&&"Leave"===n&&this.callbacks.removeObserver(c)}},e.prototype.sendEventActionFrame=function(e,t){var n=e.event,r=e.payload,o=e.scope;"object"==typeof r&&null!==r&&delete r.__identifier;var a=i.getContext(),c=a.timestamp,u=a.authorId,p={frameId:this.nextFrameId,originalFrameId:this.nextFrameId,timestamp:c,authorId:u,type:s.ActionFrameType.Event,beginGenerationId:t,scope:o,event:n,payload:r};this.nextFrameId++;try{this.callbacks.catchActionFrame(p)}catch(e){console.error(e)}},e.prototype.createMagixContext=function(e,t,n){return Object.freeze({__identifierGenerator:t,__previousGenerationId:t.latestGenerationId,environment:e,timestamp:Date.now(),authorId:n,observerId:this.state.observerId,resource:this.state.resource})},e}();t.StateOperator=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(13),o=n(41);!function(e){e.NoEffects="noEffects",e.Modifiable="modifiable"}(r=t.TriggerInvokeMode||(t.TriggerInvokeMode={}));var a=function(){function e(e){var t=this,n=i.getClassReflection(e.rootClass),r={},o=function(e){Object.defineProperty(r,e,{enumerable:!0,get:function(){throw new Error('cannot access property "'+e+'" of trigger object')},set:function(){throw new Error('cannot access property "'+e+'" of trigger object')}})};for(var a in n.serializerObject.properties)o(a);n.methodNames.forEach(function(e,i){r[e]=t.createInvoker(n,i,n.methods[e])}),this.object=Object.freeze(r)}return e.prototype.createInvoker=function(e,t,n){var i=this,a=n.isPublic,s=n.name,c=n.decorators;if(c.length>1)throw new Error(e.name+"."+s+" have more than 1 decorators: "+c.length);if(c.some(function(e){return e instanceof o.EventDecorator}))return function(){throw new Error("cannot call "+e.name+"."+s+", you should call dispatch()")};if(a){var u=c.some(function(e){return e===o.noEffects})?r.NoEffects:r.Modifiable;return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!i.receiver)throw new Error("trigger not bind any receiver");return i.receiver(t,e,u)}}return function(){throw new Error("cannot call "+e.name+"."+s+", it's private method")}},e}();t.Trigger=a},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),o=n(145),a=n(79),s=12e3,c=function(){function e(e){this.framesBuffer=[],this.latestReceivedFrameId=-1,this.isPlaying=!1,this.mode=e.mode,this.callbacks=Object.freeze(r({},e.callbacks));var t=e.enableAnimationFrame,n=e.frameInterval,i=void 0===n?17:n,c=e.remainLowTimeInterval,u=void 0===c?s:c;if(t){var p=new a.AnimationFrameTicker(this.handleTickEvent.bind(this));this.tickLimiter=new o.InvokeFrequencyLimiter(i,function(){return p.invoke()})}else this.tickLimiter=new o.InvokeFrequencyLimiter(i,this.handleTickEvent.bind(this));this.remainLowTimeInterval=u}return Object.defineProperty(e.prototype,"newestPushFrame",{get:function(){return this.framesBuffer[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextFrame",{get:function(){return this.framesBuffer[this.framesBuffer.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"framesBufferLength",{get:function(){return this.framesBuffer.length},enumerable:!0,configurable:!0}),e.prototype.takeNextFrame=function(){return this.framesBuffer.pop()},Object.defineProperty(e.prototype,"currentBufferInterval",{get:function(){return this.framesBufferLength>0?this.newestPushFrame.timestamp-this.nextFrame.timestamp:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameInterval",{get:function(){return this.tickLimiter.limitDuration},set:function(e){this.tickLimiter.limitDuration=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),e.prototype.handleTickEvent=function(){try{this.onTick()}finally{this.isPlaying&&this.framesBuffer.length>0&&this.tickLimiter.invoke(),this.refreshPhase()}},e.prototype.pushFrames=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this.assertReceivedFrameId(r.frameId),this.framesBuffer.unshift(r)}e.length>0&&this.isPlaying&&this.tickLimiter.invoke(),this.refreshPhase()},e.prototype.assertReceivedFrameId=function(e){if(-1===this.latestReceivedFrameId)this.latestReceivedFrameId=e;else{var t=this.latestReceivedFrameId+1;if(e!==t)throw new Error("PlayBuffer want frameId "+t+", instead of "+e);this.latestReceivedFrameId=e}},e.prototype.play=function(){this.isPlaying||(this.isPlaying=!0,this.framesBuffer.length>0&&this.tickLimiter.invoke(),this.refreshPhase())},e.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,this.tickLimiter.cancel(),this.refreshPhase())},e.prototype.refreshPhase=function(){var e=this.currentPhase(),t=this._phase;e!==t&&(this._phase=e,t===i.PlayerBufferPhase.Playing&&e!==i.PlayerBufferPhase.Playing?this.onPlayingStop():t!==i.PlayerBufferPhase.Playing&&e===i.PlayerBufferPhase.Playing&&this.onPlayingContinue(),this.callbacks.onPhaseChanged&&this.callbacks.onPhaseChanged(e))},e.prototype.currentPhase=function(){return this.isPlaying?this.framesBuffer.length>0?i.PlayerBufferPhase.Playing:i.PlayerBufferPhase.Empty:i.PlayerBufferPhase.Pausing},e}();t.AbstractPlayerBuffer=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){var t=this;this.invoker=e,this.animationFrameId=null,this.shouldInvokeNextFrame=!1,this.blockInvoke=!1,this.fireTick=function(){if(t.shouldInvokeNextFrame)try{t.invoker()}catch(e){console.error(e)}t.shouldInvokeNextFrame=!1,t.blockInvoke=!1,t.animationFrameId=null}}return e.prototype.invoke=function(){if(this.blockInvoke)this.shouldInvokeNextFrame=!0;else{try{this.invoker()}catch(e){console.error(e)}null===this.animationFrameId&&(this.animationFrameId=window.requestAnimationFrame(this.fireTick)),this.blockInvoke=!0}},e}();t.AnimationFrameTicker=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCallbacks=function(e){var t={},n=function(n){var r=e[n];t[n]="function"==typeof r?function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return r.apply(t,e)}catch(e){console.error(e)}}:r};for(var r in e)n(r);return Object.freeze(t)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(66),a=n(82),s=n(19),c=n(152),u=function(){function e(e,t,n,r,i,o){this.stateFactory=new s.StateFactory(e,t,n,!0),this.persistenceServerOrigin=i,this.framesSequenceFactory=new a.FramesSequenceFactory(i,o),this.enableAnimationFrame=r}return e.prototype.createReconstructor=function(e,t){return void 0===t&&(t={}),r(this,void 0,void 0,function(){var n,r,a,s,u;return i(this,function(i){switch(i.label){case 0:return n=this.persistenceServerOrigin+"/v1/rooms/"+e+"/reconstruction",[4,fetch(n,{method:"get",headers:{"content-type":"application/json",Accept:"application/json"}})];case 1:if(404!==(r=i.sent()).status)return[3,2];throw new Error('room "'+e+'" not exits');case 2:if(200===r.status)return[3,7];a=void 0,i.label=3;case 3:return i.trys.push([3,5,,6]),[4,r.json()];case 4:return a=i.sent(),[3,6];case 5:return i.sent(),[3,6];case 6:throw(s=a&&a.error)?new Error("can't get room \""+e+": "+s+'"'):new Error("can't get room \""+e+'". response status code '+r.status);case 7:return[4,r.json()];case 8:if((u=i.sent()).mode!==o.RoomMode.Historied)throw new Error('room "'+u.uuid+"\" isn't historied mode");return[2,new c.ReconstructorImplement(u,this.stateFactory,this.framesSequenceFactory,this.enableAnimationFrame,t)]}})})},e}();t.ReconstructorFactory=u,function(e){e.WaitingFirstFrame="waitingFirstFrame",e.Playing="playing",e.Pause="pause",e.Stop="stop",e.TouchedEnding="touchedEnding",e.Buffering="buffering",e.Seeking="seeking"}(t.ReconstructorPhase||(t.ReconstructorPhase={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(149))},function(e,t,n){"use strict";var r=n(150),i=n(31),o=n(151);function a(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function s(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function c(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=i({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),i=t.shift(),a=t.length>0?t.join("="):void 0;a=void 0===a?null:o(a),n(o(i),a,r)}),Object.keys(r).sort().reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return t[e]}):t}(n):e[t]=n,e},Object.create(null))):r}t.extract=s,t.parse=c,t.stringify=function(e,t){!1===(t=i({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[a(t,e),"[",r,"]"].join(""):[a(t,e),"[",a(r,e),"]=",a(n,e)].join("")};case"bracket":return function(t,n){return null===n?a(t,e):[a(t,e),"[]=",a(n,e)].join("")};default:return function(t,n){return null===n?a(t,e):[a(t,e),"=",a(n,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map(function(r){var i=e[r];if(void 0===i)return"";if(null===i)return a(r,t);if(Array.isArray(i)){var o=[];return i.slice().forEach(function(e){void 0!==e&&o.push(n(r,e,o.length))}),o.join("&")}return a(r,t)+"="+a(i,t)}).filter(function(e){return e.length>0}).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:c(s(e),t)}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0).__context("abstractApplianceManasger/index","1.2.0"),a=o.setter,s=o.creator,c=o.caller,u=o.getter,p=n(0);n(0);var l=n(0);n(0),n(1);var h=n(20);n(20);var f=n(22);n(22);var d=n(90);n(90);var y=n(25);n(25);var g=n(16);n(16);var m=n(91);n(91),n(92);var b=n(4);n(4),n(9),n(3),o.defineType("0",o.getObjectType({properties:{socket:o.getReferenceType("../appState:DeviceType"),user:o.getReferenceType("../framework/MembersManager:MemberInformation")}})),o.defineType("1",o.getObjectType({})),o.defineExport("1","ApplianceClass"),o.defineType("2",o.getObjectType({properties:{scenes:o.getObjectType({index:o.getReferenceType("../framework/SceneNode:SceneNode")}),pptHandler:o.getReferenceType("../framework/PptHandler:PptHandler"),membersManager:o.getReferenceType("../framework/MembersManager:MembersManager"),adminObserverMemberState:o.getReferenceType("../appState:MemberState"),_globalState:o.getReferenceType("../appState:GlobalState"),deviceType:o.getReferenceType("../appState:DeviceType"),scene:o.getReferenceType("../framework/SceneNode:SceneNode")}})),o.defineExport("2","AbstractApplianceManager");var v=function(e){function t(t){var n=e.call(this)||this;return a(n,"_globalState",t),a(n,"pptHandler",new d.PptHandler(n)),a(n,"scenes",s([new g.SceneNode])),a(n,"membersManager",new y.MembersManager),a(n,"adminObserverMemberState",c(n,"createMemberState",[s([0,0,0])])),n}return r(t,e),Object.defineProperty(t.prototype,"deviceType",{get:function(){return c(u(this,"membersManager"),"getDeviceType",[u(c(p,"getContext",[]),"authorId")])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scene",{get:function(){return u(u(this,"scenes"),u(u(this,"_globalState"),"currentSceneIndex"))},enumerable:!0,configurable:!0}),t.prototype.createAppliances=function(){var e=s({}),t=c(this,"createConstructors",[]);for(var n in t){var r=u(t,n);a(e,n,new r(this))}return e},t.prototype.onMemberEnterRoom=function(e,t){var n=c(p,"getContext",[]).authorId,r=c(u(this,"membersManager"),"initiativeColor",[]);c(u(this,"membersManager"),"memberEnter",[s({memberId:n,deviceType:u(t,"socket"),information:u(t,"user")||void 0,appliances:c(this,"createAppliances",[]),memberState:c(this,"createMemberState",[r])})])},t.prototype.onMemberLeaveRoom=function(){var e=c(p,"getContext",[]).authorId;c(u(this,"membersManager"),"memberLeave",[e])},t.prototype.onRtcConnected=function(e,t){c(console,"log",[e,t]);var n=c(u(this,"membersManager"),"findMemberIdWithUserId",[u(t,"userId")]);void 0!==n&&c(u(this,"membersManager"),"setRtcState",[n,u(t,"isConnected")])},t.prototype.onOthersEvent=function(e,t,n){var r=c(p,"getContext",[]).authorId;n!==u(u(p,"EventScope"),"System")&&c(u(this,"membersManager"),"isMemberExits",[r])&&c(u(this,"membersManager"),"dispatchMagixEvent",[r,e,t])},t.prototype.pushPptPages=function(e){c(u(this,"pptHandler"),"pushPptPages",[e])},t.prototype.insertNewPage=function(e){c(u(this,"pptHandler"),"insertNewPage",[e])},t.prototype.removePage=function(e){c(u(this,"pptHandler"),"removePage",[e])},t.prototype.insertImage=function(e){var t=new m.ImageShape(this,e);c(u(this,"scene"),"addComponent",[t])},t.prototype.completeImageUpload=function(e,t){var n=c(u(this,"scene"),"findComponentFromTop",[function(t){return t instanceof m.ImageShape&&u(t,"uuid")===e}]);if(!n)throw new Error("uuid "+e+" not found");c(n,"setImageSrc",[t])},t.prototype.setGlobalState=function(e){if("currentSceneIndex"in e){var t=u(e,"currentSceneIndex");if(t<0||t>=u(u(this,"scenes"),"length"))throw new Error("currentSceneIndex is out of bounds 0~"+(u(u(this,"scenes"),"length")-1))}var n=u(this,"_globalState");return a(this,"_globalState",s(i({},n,e))),u(n,"currentSceneIndex")!==u(u(this,"_globalState"),"currentSceneIndex")&&c(u(this,"membersManager"),"notifyAllThatSceneChanged",[u(n,"currentSceneIndex")]),u(this,"_globalState")},t.prototype.setMemberState=function(e){return c(u(this,"membersManager"),"setMemberState",[u(c(p,"getContext",[]),"authorId"),e])},t.prototype.setViewState=function(e){return c(u(this,"membersManager"),"setViewState",[u(c(p,"getContext",[]),"authorId"),e])},t.prototype.getScenesCount=function(){return u(u(this,"scenes"),"length")},t.prototype.getScenes=function(){for(var e=s([]),t=0;t<u(u(this,"scenes"),"length");++t)c(e,"push",[c(this,"getScene",[t])]);return e},t.prototype.getScene=function(e){void 0===e&&(e=u(u(this,"_globalState"),"currentSceneIndex"));var t=u(u(this,"scenes"),e);if(t)return s({key:l.stringWithIdentifier(l.findIdentifierWith(t)),isEmpty:0===u(t,"componentsCount"),ppt:u(t,"ppt")})},t.prototype.getShellRectangle=function(e){return void 0===e&&(e=u(u(this,"_globalState"),"currentSceneIndex")),c(u(u(this,"scenes"),e),"shellRectangle",[])},t.prototype.renderTagBoxes=function(){return c(u(this,"scene"),"renderTagBoxes",[])},t.prototype.renderSvg=function(e,t){return void 0===e&&(e=u(u(this,"_globalState"),"currentSceneIndex")),c(u(u(this,"scenes"),e),"renderSvg",[t])},t.prototype.getInformationWithMemberId=function(e){return c(u(this,"membersManager"),"getInformationWithMemberId",[e])},t.prototype.getMemberState=function(e){return void 0===e&&(e=u(c(p,"getContext",[]),"authorId")),e===l.AdminObserverId?u(this,"adminObserverMemberState"):c(u(this,"membersManager"),"getMemberState",[e])},t.prototype.getViewState=function(e){return void 0===e&&(e=u(c(p,"getContext",[]),"authorId")),c(u(this,"membersManager"),"getViewState",[e])},t.prototype.getMemberIdWithUserId=function(e){return c(u(this,"membersManager"),"getMemberIdWithUserId",[e])},t.prototype.getBroadcasterId=function(){return c(u(this,"membersManager"),"getBroadcasterId",[])},t.prototype.updateTextarea=function(e){c(f,"updateTextarea",[u(this,"scene"),e])},t.prototype.getGlobalState=function(){return u(this,"_globalState")},t.prototype.getMemberDisplayers=function(){return c(u(this,"membersManager"),"getMemberDisplayers",[])},t.prototype.hitTest=function(e,t){var n=c(this,"selectorRadius",[]),r=c(h,"searchEditableComponentsByPoint",[u(this,"scene"),e,t,n]);return c(c(r,"map",[function(e){return u(e,"identifier")}]),"reverse",[])},t.prototype.selectorRadius=function(){switch(u(this,"deviceType")){case u(b.DeviceType,"Desktop"):return 0;case u(b.DeviceType,"Touch"):return 36/u(c(this,"getViewState",[]),"pixelWidth")}},t.prototype.onMouseDown=function(e){var t=c(p,"getContext",[]).authorId;c(c(u(this,"membersManager"),"currentAppliance",[t]),"onMouseDown",[e]),c(u(this,"membersManager"),"setCursor",[t,u(e,"x"),u(e,"y"),!0,!0])},t.prototype.onMouseMove=function(e){var t=c(p,"getContext",[]).authorId;c(c(u(this,"membersManager"),"currentAppliance",[t]),"onMouseMove",[e]),c(u(this,"membersManager"),"setCursor",[t,u(e,"x"),u(e,"y"),!0])},t.prototype.onMouseUp=function(e){var t=c(p,"getContext",[]).authorId;c(c(u(this,"membersManager"),"currentAppliance",[t]),"onMouseUp",[e]),c(u(this,"membersManager"),"setCursor",[t,u(e,"x"),u(e,"y"),!0,!1])},t.prototype.onMouseLeave=function(e){var t=c(p,"getContext",[]).authorId;c(c(u(this,"membersManager"),"currentAppliance",[t]),"onMouseLeave",[e]),c(u(this,"membersManager"),"setCursor",[t,u(e,"x"),u(e,"y"),!1])},t.prototype.onKeyDown=function(e){c(c(u(this,"membersManager"),"currentAppliance",[u(c(p,"getContext",[]),"authorId")]),"onKeyDown",[e])},t.prototype.onKeyUp=function(e){c(c(u(this,"membersManager"),"currentAppliance",[u(c(p,"getContext",[]),"authorId")]),"onKeyUp",[e])},t}(o.baseClass());t.AbstractApplianceManager=v,o.defineClass("2",v,{name:"AbstractApplianceManager",properties:[{name:"scenes",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getObjectType({index:o.getReferenceType("../framework/SceneNode:SceneNode")}),decorators:[]},{name:"pptHandler",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getReferenceType("../framework/PptHandler:PptHandler"),decorators:[]},{name:"membersManager",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getReferenceType("../framework/MembersManager:MembersManager"),decorators:[]},{name:"adminObserverMemberState",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getReferenceType("../appState:MemberState"),decorators:[]},{name:"_globalState",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getReferenceType("../appState:GlobalState"),decorators:[]},{name:"deviceType",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getReferenceType("../appState:DeviceType"),decorators:[]},{name:"scene",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getReferenceType("../framework/SceneNode:SceneNode"),decorators:[]}],methods:[{name:"createAppliances",isPublic:!1,parameterTypes:[],returnType:o.getObjectType({key:o.getReferenceType("../framework:Appliance")}),decorators:[]},{name:"onMemberEnterRoom",isPublic:!1,parameterTypes:[o.getSingletonType(o.TypeEnum.String),o.getReferenceType("#0")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[p.event("Enter")]},{name:"onMemberLeaveRoom",isPublic:!1,parameterTypes:[],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[p.event("Leave")]},{name:"onRtcConnected",isPublic:!1,parameterTypes:[o.getSingletonType(o.TypeEnum.String),o.getObjectType({properties:{userId:o.getSingletonType(o.TypeEnum.Number),isConnected:o.getSingletonType(o.TypeEnum.Boolean)}})],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[p.event("RtcState")]},{name:"onOthersEvent",isPublic:!1,parameterTypes:[o.getSingletonType(o.TypeEnum.String),o.getSingletonType(o.TypeEnum.Any),o.getSingletonType(o.TypeEnum.Any)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[p.event(/./i)]},{name:"pushPptPages",isPublic:!0,parameterTypes:[o.getObjectType({index:o.getObjectType({properties:{src:o.getSingletonType(o.TypeEnum.String),width:o.getSingletonType(o.TypeEnum.Number),height:o.getSingletonType(o.TypeEnum.Number)}})})],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"insertNewPage",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"removePage",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"insertImage",isPublic:!0,parameterTypes:[o.getReferenceType("../impls:ImageInformation")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"completeImageUpload",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.String),o.getSingletonType(o.TypeEnum.String)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"setGlobalState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Any)],returnType:o.getReferenceType("../appState:GlobalState"),decorators:[]},{name:"setMemberState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Any)],returnType:o.getReferenceType("../appState:MemberState"),decorators:[]},{name:"setViewState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Any)],returnType:o.getReferenceType("../appState:ViewState"),decorators:[]},{name:"getScenesCount",isPublic:!0,parameterTypes:[],returnType:o.getSingletonType(o.TypeEnum.Number),decorators:[p.noEffects]},{name:"getScenes",isPublic:!0,parameterTypes:[],returnType:o.getObjectType({index:o.getReferenceType("../framework:Scene")}),decorators:[p.noEffects]},{name:"getScene",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("../framework:Scene"),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[p.noEffects]},{name:"getShellRectangle",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getReferenceType("../appState:WorldViewRectangle"),decorators:[p.noEffects]},{name:"renderTagBoxes",isPublic:!0,parameterTypes:[],returnType:o.getObjectType({index:o.getReferenceType("../framework:TagBox")}),decorators:[p.noEffects]},{name:"renderSvg",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("../appState:WorldViewRectangle"),o.getSingletonType(o.TypeEnum.Undefined)])],returnType:o.getObjectType({index:o.getSingletonType(o.TypeEnum.Any)}),decorators:[p.noEffects]},{name:"getInformationWithMemberId",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("../framework/MembersManager:MemberInformation"),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[p.noEffects]},{name:"getMemberState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getReferenceType("../appState:MemberState"),decorators:[p.noEffects]},{name:"getViewState",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getReferenceType("../appState:ViewState"),decorators:[p.noEffects]},{name:"getMemberIdWithUserId",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number)],returnType:o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[p.noEffects]},{name:"getBroadcasterId",isPublic:!0,parameterTypes:[],returnType:o.getCompoundType(o.TypeEnum.Or,[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[p.noEffects]},{name:"updateTextarea",isPublic:!0,parameterTypes:[o.getReferenceType("../impls/types:TextareaBox")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"getGlobalState",isPublic:!0,parameterTypes:[],returnType:o.getReferenceType("../appState:GlobalState"),decorators:[p.noEffects]},{name:"getMemberDisplayers",isPublic:!0,parameterTypes:[],returnType:o.getObjectType({index:o.getReferenceType("../framework/MembersManager:MemberDisplayer")}),decorators:[p.noEffects]},{name:"hitTest",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Number)],returnType:o.getObjectType({index:o.getObjectType({index:o.getSingletonType(o.TypeEnum.Number)})}),decorators:[p.noEffects]},{name:"selectorRadius",isPublic:!1,parameterTypes:[],returnType:o.getSingletonType(o.TypeEnum.Number),decorators:[]},{name:"onMouseDown",isPublic:!0,parameterTypes:[o.getReferenceType("../framework:MouseEvent")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"onMouseMove",isPublic:!0,parameterTypes:[o.getReferenceType("../framework:MouseEvent")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"onMouseUp",isPublic:!0,parameterTypes:[o.getReferenceType("../framework:MouseEvent")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"onMouseLeave",isPublic:!0,parameterTypes:[o.getReferenceType("../framework:MouseEvent")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"onKeyDown",isPublic:!0,parameterTypes:[o.getReferenceType("../framework:KeyEvent")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"onKeyUp",isPublic:!0,parameterTypes:[o.getReferenceType("../framework:KeyEvent")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]}]}),o=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("appState/WorldViewRectangle","1.2.0");r.defineType("0",r.getObjectType({properties:{originX:r.getSingletonType(r.TypeEnum.Number),originY:r.getSingletonType(r.TypeEnum.Number),width:r.getSingletonType(r.TypeEnum.Number),height:r.getSingletonType(r.TypeEnum.Number)}})),r.defineExport("0","WorldViewRectangle"),r=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("framework/ApplianceComponentContainer","1.2.0"),o=i.creator,a=i.getter,s=i.caller;n(26),i.defineType("0",i.getObjectType({properties:{components:i.getObjectType({index:i.getReferenceType("./ApplianceComponent:ApplianceComponent")}),componentsLength:i.getSingletonType(i.TypeEnum.Number)}})),i.defineExport("0","ApplianceComponentContainer");var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.components=o([]),t}return r(t,e),Object.defineProperty(t.prototype,"componentsLength",{get:function(){return a(a(this,"components"),"length")},enumerable:!0,configurable:!0}),t.prototype.componentAt=function(e){return a(a(this,"components"),e)},t.prototype.addComponent=function(e){s(a(this,"components"),"push",[e])},t.prototype.addComponentAt=function(e,t){if(t<0||t>a(a(this,"components"),"length"))throw new Error("index should be 0~"+a(a(this,"components"),"length")+", instead of "+t);s(a(this,"components"),"splice",[t,0,e])},t.prototype.indexOfComponent=function(e){return s(a(this,"components"),"indexOf",[e])},t.prototype.removeComponent=function(e){var t=s(a(this,"components"),"indexOf",[e]);-1!==t&&s(a(this,"components"),"splice",[t,1])},t.prototype.forEachComponents=function(e){s(a(this,"components"),"forEach",[e])},t.prototype.componentsWithFilter=function(e){return s(a(this,"components"),"filter",[e])},t.prototype.findComponentFromBottom=function(e){for(var t=0;t<a(a(this,"components"),"length");++t){var n=a(a(this,"components"),t);if(e(n,t))return n}},t.prototype.findComponentFromTop=function(e){for(var t=a(a(this,"components"),"length")-1;t>=0;--t){var n=a(a(this,"components"),t);if(e(n,t))return n}},t.prototype.removeComponentAt=function(e){if(e<0||e>=a(a(this,"components"),"length"))throw new Error("index should be 0~"+(a(a(this,"components"),"length")-1)+", instead of "+e);return a(s(a(this,"components"),"splice",[e,1]),0)},t}(i.baseClass());t.ApplianceComponentContainer=c,i.defineClass("0",c,{name:"ApplianceComponentContainer",properties:[{name:"components",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getObjectType({index:i.getReferenceType("./ApplianceComponent:ApplianceComponent")}),decorators:[]},{name:"componentsLength",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]}],methods:[{name:"componentAt",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./ApplianceComponent:ApplianceComponent"),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"addComponent",isPublic:!0,parameterTypes:[i.getReferenceType("./ApplianceComponent:ApplianceComponent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"addComponentAt",isPublic:!0,parameterTypes:[i.getReferenceType("./ApplianceComponent:ApplianceComponent"),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"indexOfComponent",isPublic:!0,parameterTypes:[i.getReferenceType("./ApplianceComponent:ApplianceComponent")],returnType:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"removeComponent",isPublic:!0,parameterTypes:[i.getReferenceType("./ApplianceComponent:ApplianceComponent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"forEachComponents",isPublic:!0,parameterTypes:[i.getFunctionType()],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"componentsWithFilter",isPublic:!0,parameterTypes:[i.getFunctionType()],returnType:i.getObjectType({index:i.getReferenceType("./ApplianceComponent:ApplianceComponent")}),decorators:[]},{name:"findComponentFromBottom",isPublic:!0,parameterTypes:[i.getFunctionType()],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./ApplianceComponent:ApplianceComponent"),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"findComponentFromTop",isPublic:!0,parameterTypes:[i.getFunctionType()],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("./ApplianceComponent:ApplianceComponent"),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"removeComponentAt",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getReferenceType("./ApplianceComponent:ApplianceComponent"),decorators:[]}]}),i=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("hittest/SectorTester","1.2.0"),o=i.setter,a=i.creator,s=i.getter,c=i.caller,u=n(21);n(21),n(8),i.defineType("0",i.getObjectType({properties:{beginVector:i.getReferenceType("./TypeDefinitions:Point"),endVector:i.getReferenceType("./TypeDefinitions:Point")}})),i.defineExport("0","SectorTester");var p=function(e){function t(t,n,r){var i=e.call(this)||this;return i.originPoint=r,o(i,"beginVector",a({x:s(t,"x")-s(r,"x"),y:s(t,"y")-s(r,"y")})),o(i,"endVector",a({x:s(n,"x")-s(r,"x"),y:s(n,"y")-s(r,"y")})),i}return r(t,e),t.prototype.hitTest=function(e,t){var n=a({x:e-s(s(this,"originPoint"),"x"),y:t-s(s(this,"originPoint"),"y")}),r=c(Math,"atan2",[s(s(this,"beginVector"),"y"),s(s(this,"beginVector"),"x")]),i=c(Math,"atan2",[s(s(this,"endVector"),"y"),s(s(this,"endVector"),"x")]),o=c(Math,"atan2",[s(n,"y"),s(n,"x")]),p=c(this,"radiusIncrement",[o,r]),l=c(this,"radiusIncrement",[i,r]);if(p>l)return!1;var h=a({x:0,y:0}),f=c(u,"distance",[a({x:e,y:t}),s(this,"originPoint")]),d=c(u,"distance",[s(this,"beginVector"),h]);return f<=d+p/l*(c(u,"distance",[s(this,"endVector"),h])-d)},t.prototype.radiusIncrement=function(e,t){var n=t-e;return n>=2*s(Math,"PI")?n-=2*s(Math,"PI"):n<0&&(n+=2*s(Math,"PI")),n},t}(i.baseClass());t.SectorTester=p,i.defineClass("0",p,{name:"SectorTester",properties:[{name:"beginVector",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("./TypeDefinitions:Point"),decorators:[]},{name:"endVector",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("./TypeDefinitions:Point"),decorators:[]}],methods:[{name:"hitTest",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"radiusIncrement",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Number),decorators:[]}]}),i=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("hittest/PolylineTester","1.2.0"),o=i.creator,a=i.caller,s=i.getter,c=n(21);n(21),n(8);var u=n(34);n(34);var p=n(33);n(33),i.defineType("0",i.getObjectType({properties:{points:i.getObjectType({index:i.getReferenceType("./TypeDefinitions:Point")})}})),i.defineExport("0","PolylineTester");var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.points=o([]),t}return r(t,e),t.prototype.pushPoint=function(e){a(s(this,"points"),"push",[e])},t.prototype.hitTest=function(e,t,n){return a(this,"hitAnySegments",[e,t,n])||a(this,"hitAnyNodeCircles",[e,t,n])},t.prototype.hitAnySegments=function(e,t,n){for(var r=e/2,i=1;i<s(s(this,"points"),"length");++i){var p=s(s(this,"points"),i-1),l=s(s(this,"points"),i),h=o({x:s(l,"x")-s(p,"x"),y:s(l,"y")-s(p,"y")});if(!a(c,"isZero",[s(h,"x")])||!a(c,"isZero",[s(h,"y")])){var f=a(c,"unitVector",[a(c,"verticalVector",[h])]),d=new u.ConvexPolygonTester,y=a(c,"multiply",[-r,f]),g=a(c,"multiply",[r,f]);if(a(d,"pushPoint",[a(c,"plus",[p,g])]),a(d,"pushPoint",[a(c,"plus",[p,y])]),a(d,"pushPoint",[a(c,"plus",[l,y])]),a(d,"pushPoint",[a(c,"plus",[l,g])]),a(d,"pointHitTest",[t,n]))return!0}}return!1},t.prototype.hitAnyNodeCircles=function(e,t,n){for(var r=0;r<s(s(this,"points"),"length");++r){var i=s(s(this,"points"),r);if(p.inCircle(i,e/2,t,n))return!0}return!1},t}(i.baseClass());t.PolylineTester=l,i.defineClass("0",l,{name:"PolylineTester",properties:[{name:"points",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getObjectType({index:i.getReferenceType("./TypeDefinitions:Point")}),decorators:[]}],methods:[{name:"pushPoint",isPublic:!0,parameterTypes:[i.getReferenceType("./TypeDefinitions:Point")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"hitTest",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"hitAnySegments",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"hitAnyNodeCircles",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]}]}),i=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("impls/types/TextareaTypes","1.2.0");n(4),n(25),r.defineType("0",r.getObjectType({properties:{dx:r.getSingletonType(r.TypeEnum.Number),dy:r.getSingletonType(r.TypeEnum.Number),text:r.getSingletonType(r.TypeEnum.String),textLength:r.getSingletonType(r.TypeEnum.Number)}})),r.defineExport("0","TextareaLine"),r.defineType("1",r.getObjectType({properties:{scale:r.getSingletonType(r.TypeEnum.Number),width:r.getSingletonType(r.TypeEnum.Number),height:r.getSingletonType(r.TypeEnum.Number),originalText:r.getSingletonType(r.TypeEnum.String),textLines:r.getObjectType({index:r.getReferenceType("#0")})}})),r.defineExport("1","TextareaBox"),r.defineType("2",r.getObjectType({properties:{margin:r.getSingletonType(r.TypeEnum.Number),scale:r.getSingletonType(r.TypeEnum.Number),originalText:r.getSingletonType(r.TypeEnum.String),color:r.getReferenceType("../../appState:Color"),textColor:r.getReferenceType("../../appState:Color"),textSize:r.getSingletonType(r.TypeEnum.Number)}})),r.defineExport("2","TextareaEditPayload"),r.defineType("3",r.getObjectType({properties:{margin:r.getSingletonType(r.TypeEnum.Number),editorId:r.getSingletonType(r.TypeEnum.Number),color:r.getReferenceType("../../appState:Color"),textSize:r.getSingletonType(r.TypeEnum.Number),information:r.getCompoundType(r.TypeEnum.Or,[r.getReferenceType("../../framework/MembersManager:MemberInformation"),r.getSingletonType(r.TypeEnum.Undefined)])}})),r.defineExport("3","TextareaStatePayload"),r=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("framework/PptHandler","1.2.0"),o=i.setter,a=i.caller,s=i.getter,c=i.creator;n(0),n(32);var u=n(16);n(16),i.defineType("0",i.getObjectType({properties:{context:i.getReferenceType("./TypeDefinitions:ApplianceContext")}})),i.defineExport("0","PptHandler");var p=function(e){function t(t){var n=e.call(this)||this;return o(n,"context",t),n}return r(t,e),t.prototype.pushPptPages=function(e){a(s(s(this,"context"),"scenes"),"push",a(e,"map",[function(e){return new u.SceneNode(e)}]).slice())},t.prototype.insertNewPage=function(e){a(s(s(this,"context"),"scenes"),"splice",[e,0,new u.SceneNode])},t.prototype.removePage=function(e){var t=s(s(this,"context"),"scenes");if(1===s(t,"length"))a(t,"pop",[]),a(t,"push",[new u.SceneNode]);else{var n=a(s(this,"context"),"getGlobalState",[]).currentSceneIndex;(e<n||e===n&&e===s(t,"length")-1)&&a(s(this,"context"),"setGlobalState",[c({currentSceneIndex:n-1})]),a(t,"splice",[e,1])}},t}(i.baseClass());t.PptHandler=p,i.defineClass("0",p,{name:"PptHandler",properties:[{name:"context",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getReferenceType("./TypeDefinitions:ApplianceContext"),decorators:[]}],methods:[{name:"pushPptPages",isPublic:!0,parameterTypes:[i.getObjectType({index:i.getObjectType({properties:{src:i.getSingletonType(i.TypeEnum.String),width:i.getSingletonType(i.TypeEnum.Number),height:i.getSingletonType(i.TypeEnum.Number)}})})],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"insertNewPage",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"removePage",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]}]}),i=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/Image","1.2.0"),o=i.setter,a=i.getter,s=i.caller,c=i.creator,u=n(0);n(0);var p=n(2);n(2),n(11),n(3),i.defineType("0",i.getCompoundType(i.TypeEnum.And,[i.getObjectType({properties:{uuid:i.getSingletonType(i.TypeEnum.String),originX:i.getSingletonType(i.TypeEnum.Number),originY:i.getSingletonType(i.TypeEnum.Number),width:i.getSingletonType(i.TypeEnum.Number),height:i.getSingletonType(i.TypeEnum.Number),imageSrc:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.String),i.getSingletonType(i.TypeEnum.Undefined)]),hitTestingBoxMargin:i.getSingletonType(i.TypeEnum.Number),selectable:i.getSingletonType(i.TypeEnum.Boolean)}}),i.getReferenceType("./abstract/Editable:Editable")])),i.defineExport("0","ImageShape");var l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.originX=0,r.originY=0,r.width=0,r.height=0,o(r,"uuid",a(n,"uuid")),o(r,"originX",a(n,"centerX")-a(n,"width")/2),o(r,"originY",a(n,"centerY")-a(n,"height")/2),o(r,"width",a(n,"width")),o(r,"height",a(n,"height")),r}return r(t,e),t.prototype.setImageSrc=function(e){o(this,"imageSrc",e)},Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return 4},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectable",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.renderSvgContent=function(){return a(this,"imageSrc")?u.createElement("image",{key:a(this,"key"),preserveAspectRatio:"none meet",xlinkHref:s(a(s(u,"getContext",[]),"resource"),"convertIdToUrl",[a(this,"imageSrc")]),width:a(this,"width"),height:a(this,"height")}):u.createElement("rect",{strokeDasharray:"5,5",key:a(this,"key"),x:0,y:0,width:a(this,"width"),height:a(this,"height"),style:c({stroke:"#EEEEEE",strokeWidth:3,fill:"#F5F5F5",strokeLinejoin:"round",strokeLinecap:"round"})})},t}(i.wrapSuperClass(p.Editable));t.ImageShape=l,i.defineClass("0",l,{superClass:"./abstract/Editable:Editable",name:"ImageShape",properties:[{name:"uuid",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.String),decorators:[]},{name:"originX",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"originY",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"width",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"height",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"imageSrc",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.String),i.getSingletonType(i.TypeEnum.Undefined)]),decorators:[]},{name:"hitTestingBoxMargin",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Number),decorators:[]},{name:"selectable",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]}],methods:[{name:"setImageSrc",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.String)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"renderSvgContent",isPublic:!0,parameterTypes:[],returnType:i.getCompoundType(i.TypeEnum.Or,[i.getSingletonType(i.TypeEnum.Any),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]}]}),i=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("impls/index","1.2.0");n(160),r.exportExternal("./Bundles",{BundleTypes:"BundleTypes"}),n(11),r.exportExternal("./TypeDefinitions",{ImageInformation:"ImageInformation"}),r=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/tools/Gesture","1.2.0"),o=i.getter,a=i.caller,s=i.setter,c=i.creator;n(3),n(11),n(4);i.defineType("0",i.getObjectType({properties:{pressedPoint:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("../TypeDefinitions:Point"),i.getSingletonType(i.TypeEnum.Null)]),dragEventsBuffer:i.getCompoundType(i.TypeEnum.Or,[i.getObjectType({index:i.getReferenceType("../../framework:MouseEvent")}),i.getSingletonType(i.TypeEnum.Null)]),_isLeaving:i.getSingletonType(i.TypeEnum.Boolean),isDragging:i.getSingletonType(i.TypeEnum.Boolean),needBufferDragEvent:i.getSingletonType(i.TypeEnum.Boolean),isPressDown:i.getSingletonType(i.TypeEnum.Boolean),isLeaving:i.getSingletonType(i.TypeEnum.Boolean)}})),i.defineExport("0","Gesture");var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pressedPoint=null,t.dragEventsBuffer=null,t._isLeaving=!1,t}return r(t,e),Object.defineProperty(t.prototype,"isDragging",{get:function(){return!!o(this,"pressedPoint")&&!o(this,"dragEventsBuffer")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"needBufferDragEvent",{get:function(){return!!o(this,"dragEventsBuffer")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPressDown",{get:function(){return!!o(this,"pressedPoint")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLeaving",{get:function(){return o(this,"_isLeaving")},enumerable:!0,configurable:!0}),t.prototype.onKeyUp=function(e){},t.prototype.onKeyDown=function(e){},t.prototype.onDestroy=function(){},t.prototype.onDraggingStateChanged=function(e){},t.prototype.onDrag=function(e){},t.prototype.onHover=function(e){},t.prototype.onClick=function(e){},t.prototype.makeSureItsDraggingEvent=function(e){return!1},t.prototype.onMemberStateChanged=function(e,t){},t.prototype.onMagixEvent=function(e,t){},t.prototype.onSceneChanged=function(e){},t.prototype.onPressedAndDrag=function(e){o(this,"needBufferDragEvent")?(a(o(this,"dragEventsBuffer"),"push",[e]),a(this,"checkShouldChangeGestureToDrag",[e])):a(this,"invokeCallback",[o(this,"onDrag"),e])},t.prototype.onMouseDown=function(e){s(this,"pressedPoint",c({x:o(e,"x"),y:o(e,"y")})),a(this,"makeSureItsDraggingEvent",[e])?a(this,"invokeCallback",[o(this,"onDraggingStateChanged"),e]):s(this,"dragEventsBuffer",c([])),a(this,"onPressedAndDrag",[e])},t.prototype.onMouseMove=function(e){o(this,"isPressDown")?(s(this,"_isLeaving",!1),a(this,"onPressedAndDrag",[e])):a(this,"invokeCallback",[o(this,"onHover"),e])},t.prototype.onMouseUp=function(e){var t=!1;s(this,"_isLeaving",!1),a(this,"onPressedAndDrag",[e]),o(this,"needBufferDragEvent")&&(s(this,"dragEventsBuffer",null),a(this,"invokeCallback",[o(this,"onClick"),e]),t=!0),s(this,"pressedPoint",null),t||a(this,"invokeCallback",[o(this,"onDraggingStateChanged"),e])},t.prototype.onMouseLeave=function(e){s(this,"_isLeaving",!0),o(this,"isPressDown")&&o(this,"needBufferDragEvent")&&a(this,"checkShouldChangeGestureToDrag",[e])},t.prototype.checkShouldChangeGestureToDrag=function(e){if(a(this,"shouldChangeGestureToDrag",[o(e,"x"),o(e,"y")])){var t=o(this,"dragEventsBuffer");if(s(this,"dragEventsBuffer",null),o(t,"length")>0){var n=t[0];a(this,"invokeCallback",[o(this,"onDraggingStateChanged"),n]);for(var r=0,i=t;r<i.length;r++){var c=i[r];a(this,"invokeCallback",[o(this,"onDrag"),c])}}}},t.prototype.shouldChangeGestureToDrag=function(e,t){var n=o(o(this,"pressedPoint"),"x")-e,r=o(o(this,"pressedPoint"),"y")-t;return 16<n*n+r*r},t.prototype.invokeCallback=function(e,t){try{a(e,"call",[this,t])}catch(e){a(console,"error",[e])}},t}(i.baseClass());t.Gesture=u,i.defineClass("0",u,{name:"Gesture",properties:[{name:"pressedPoint",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getReferenceType("../TypeDefinitions:Point"),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"dragEventsBuffer",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getCompoundType(i.TypeEnum.Or,[i.getObjectType({index:i.getReferenceType("../../framework:MouseEvent")}),i.getSingletonType(i.TypeEnum.Null)]),decorators:[]},{name:"_isLeaving",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"isDragging",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"needBufferDragEvent",isPublic:!1,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"isPressDown",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"isLeaving",isPublic:!1,isAccessor:!0,isReadable:!0,isWritable:!1,type:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]}],methods:[{name:"onKeyUp",isPublic:!0,parameterTypes:[i.getReferenceType("../../framework:KeyEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onKeyDown",isPublic:!0,parameterTypes:[i.getReferenceType("../../framework:KeyEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDestroy",isPublic:!0,parameterTypes:[],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDraggingStateChanged",isPublic:!1,parameterTypes:[i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onDrag",isPublic:!1,parameterTypes:[i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onHover",isPublic:!1,parameterTypes:[i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onClick",isPublic:!1,parameterTypes:[i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"makeSureItsDraggingEvent",isPublic:!1,parameterTypes:[i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"onMemberStateChanged",isPublic:!0,parameterTypes:[i.getReferenceType("../../appState:MemberState"),i.getReferenceType("../../appState:MemberState")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onMagixEvent",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.String),i.getSingletonType(i.TypeEnum.Any)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onSceneChanged",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onPressedAndDrag",isPublic:!1,parameterTypes:[i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onMouseDown",isPublic:!0,parameterTypes:[i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onMouseMove",isPublic:!0,parameterTypes:[i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onMouseUp",isPublic:!0,parameterTypes:[i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"onMouseLeave",isPublic:!0,parameterTypes:[i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"checkShouldChangeGestureToDrag",isPublic:!1,parameterTypes:[i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]},{name:"shouldChangeGestureToDrag",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"invokeCallback",isPublic:!1,parameterTypes:[i.getFunctionType(),i.getReferenceType("../../framework:MouseEvent")],returnType:i.getSingletonType(i.TypeEnum.Never),decorators:[]}]}),i=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0).__context("impls/EditorRectangleSpace","1.2.0"),a=o.creator,s=o.getter,c=o.setter,u=o.caller,p=n(0);n(0);var l=n(3);n(3),n(2),n(11);var h=n(9);n(9);var f=n(14);n(14);var d,y=n(10);n(10),o.defineType("0",o.getSingletonType(o.TypeEnum.Any)),function(e){e[e.None=0]="None",e[e.LeftTop=1]="LeftTop",e[e.RightTop=2]="RightTop",e[e.RightBottom=3]="RightBottom",e[e.LeftBottom=4]="LeftBottom",e[e.Top=5]="Top",e[e.Right=6]="Right",e[e.Bottom=7]="Bottom",e[e.Left=8]="Left"}(d||(d={})),o.defineType("1",o.getObjectType({properties:{component:o.getReferenceType("./abstract/Editable:Editable"),dx:o.getSingletonType(o.TypeEnum.Number),dy:o.getSingletonType(o.TypeEnum.Number),width:o.getSingletonType(o.TypeEnum.Number),height:o.getSingletonType(o.TypeEnum.Number)}})),o.defineType("2",o.getObjectType({properties:{deltaPoint:o.getReferenceType("./TypeDefinitions:Point"),targetId:o.getSingletonType(o.TypeEnum.String),beginHitPoint:o.getReferenceType("./TypeDefinitions:Point"),startRectangle:o.getReferenceType("./TypeDefinitions:Rectangle"),orientationUnitVector:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("./TypeDefinitions:Point"),o.getSingletonType(o.TypeEnum.Undefined)])}})),o.defineType("3",o.getCompoundType(o.TypeEnum.And,[o.getObjectType({properties:{belongsToUserId:o.getSingletonType(o.TypeEnum.Number),isShiftPress:o.getSingletonType(o.TypeEnum.Boolean),context:o.getReferenceType("../framework:ApplianceContext"),rectangle:o.getReferenceType("./TypeDefinitions:Rectangle"),rectangleWithHitMargin:o.getReferenceType("./TypeDefinitions:Rectangle"),operatePoint:o.getSingletonType(o.TypeEnum.Any),isOnlyHasTextareaShape:o.getSingletonType(o.TypeEnum.Boolean),draggingContext:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("#2"),o.getSingletonType(o.TypeEnum.Undefined)]),includeComponentNodes:o.getObjectType({index:o.getReferenceType("#1")}),hitTestingBoxMargin:o.getSingletonType(o.TypeEnum.Number),originX:o.getSingletonType(o.TypeEnum.Number),originY:o.getSingletonType(o.TypeEnum.Number),width:o.getSingletonType(o.TypeEnum.Number),height:o.getSingletonType(o.TypeEnum.Number),isUniformScale:o.getSingletonType(o.TypeEnum.Boolean)}}),o.getReferenceType("../framework:ApplianceComponent")])),o.defineExport("3","EditorRectangleSpace");var g=function(e){function t(t,n){var r=e.call(this)||this;return r.isShiftPress=!1,r.rectangle=a({x:0,y:0,width:0,height:0}),r.rectangleWithHitMargin=a({x:0,y:0,width:0,height:0}),r.operatePoint=s(d,"None"),r.isOnlyHasTextareaShape=!1,r.includeComponentNodes=a([]),c(r,"context",t),c(r,"belongsToUserId",n),r}return r(t,e),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originX",{get:function(){return s(s(this,"rectangleWithHitMargin"),"x")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originY",{get:function(){return s(s(this,"rectangleWithHitMargin"),"y")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return s(s(this,"rectangleWithHitMargin"),"width")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return s(s(this,"rectangleWithHitMargin"),"height")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUniformScale",{get:function(){if(s(this,"draggingContext"))switch(s(s(this,"draggingContext"),"targetId")){case"T":case"B":case"L":case"R":return!1}return s(this,"isShiftPress")||s(this,"isOnlyHasTextareaShape")},enumerable:!0,configurable:!0}),t.prototype.tryToStartEdit=function(e,t,n){var r=s(n,s(this,"key"));if(r){var o=u(this,"findOperationPointWithTargetId",[r]),p=o.x,l=o.y,h=o.point;return c(this,"operatePoint",h),c(this,"draggingContext",a({targetId:r,startRectangle:a(i({},s(this,"rectangle"))),beginHitPoint:a({x:e,y:t}),deltaPoint:a({x:p-e,y:l-t})})),!0}return!1},t.prototype.isIncludePoint=function(e,t){return u(y.RectangleTester,"testPoint",[s(s(this,"rectangle"),"x"),s(s(this,"rectangle"),"y"),s(s(this,"rectangle"),"width"),s(s(this,"rectangle"),"height"),e,t])},t.prototype.findOperationPointWithTargetId=function(e){switch(e){case"LT":return a({x:s(s(this,"rectangle"),"x"),y:s(s(this,"rectangle"),"y"),point:s(d,"LeftTop")});case"RT":return a({x:s(s(this,"rectangle"),"x")+s(s(this,"rectangle"),"width"),y:s(s(this,"rectangle"),"y"),point:s(d,"RightTop")});case"LB":return a({x:s(s(this,"rectangle"),"x"),y:s(s(this,"rectangle"),"y")+s(s(this,"rectangle"),"height"),point:s(d,"LeftBottom")});case"RB":return a({x:s(s(this,"rectangle"),"x")+s(s(this,"rectangle"),"width"),y:s(s(this,"rectangle"),"y")+s(s(this,"rectangle"),"height"),point:s(d,"RightBottom")});case"T":return a({x:s(s(this,"rectangle"),"x")+s(s(this,"rectangle"),"width")/2,y:s(s(this,"rectangle"),"y"),point:s(d,"Top")});case"R":return a({x:s(s(this,"rectangle"),"x")+s(s(this,"rectangle"),"width"),y:s(s(this,"rectangle"),"y")+s(s(this,"rectangle"),"height")/2,point:s(d,"Right")});case"B":return a({x:s(s(this,"rectangle"),"x")+s(s(this,"rectangle"),"width")/2,y:s(s(this,"rectangle"),"y")+s(s(this,"rectangle"),"height"),point:s(d,"Bottom")});case"L":return a({x:s(s(this,"rectangle"),"x"),y:s(s(this,"rectangle"),"y")+s(s(this,"rectangle"),"height")/2,point:s(d,"Left")})}throw new Error('unrecognized targetId of EditorRectangleSpace "'+e+'"')},t.prototype.dragToPoint=function(e,t){var n=u(this,"findDraggingTargetPoint",[e,t]);u(this,"updateRectangleWithDraggingTargetPoint",[n]),u(this,"refreshIncludesComponentsPositionAndSize",[]),u(this,"refreshRectangleWithHitMargin",[])},t.prototype.findDraggingTargetPoint=function(e,t){var n=s(this,"draggingContext"),r=n.deltaPoint,i=n.beginHitPoint,o=n.startRectangle,p=e+s(r,"x"),l=t+s(r,"y");if(s(this,"isUniformScale")){var h=s(o,"x")+s(o,"width")/2,f=s(o,"y")+s(o,"height")/2;if(!s(s(this,"draggingContext"),"orientationUnitVector")){var d=s(i,"x")+s(r,"x")-h,y=s(i,"y")+s(r,"y")-f,g=u(Math,"sqrt",[d*d+y*y]);c(s(this,"draggingContext"),"orientationUnitVector",a(0!==g?{x:d/g,y:y/g}:{x:1,y:1}))}var m=s(s(this,"draggingContext"),"orientationUnitVector"),b=l-f,v=(p-h)*s(m,"x")+b*s(m,"y");p=h+v*s(m,"x"),l=f+v*s(m,"y")}return a({x:p,y:l})},t.prototype.updateRectangleWithDraggingTargetPoint=function(e){var t=e.x,n=e.y,r=s(this,"draggingContext").startRectangle,i=s(r,"x"),o=s(r,"y"),a=s(r,"x")+s(r,"width"),p=s(r,"y")+s(r,"height");switch(s(this,"operatePoint")){case s(d,"LeftTop"):i=t,o=n;break;case s(d,"RightTop"):a=t,o=n;break;case s(d,"RightBottom"):a=t,p=n;break;case s(d,"LeftBottom"):i=t,p=n;break;case s(d,"Top"):o=n;break;case s(d,"Right"):a=t;break;case s(d,"Bottom"):p=n;break;case s(d,"Left"):i=t}c(s(this,"rectangle"),"x",u(Math,"min",[i,a])),c(s(this,"rectangle"),"y",u(Math,"min",[o,p])),c(s(this,"rectangle"),"width",u(Math,"abs",[i-a])),c(s(this,"rectangle"),"height",u(Math,"abs",[o-p]))},t.prototype.refreshIncludesComponentsPositionAndSize=function(){for(var e=0,t=s(this,"includeComponentNodes");e<t.length;e++){var n=t[e],r=n.component,i=n.dx,o=n.dy,a=n.width,p=n.height;c(r,"originX",s(s(this,"rectangle"),"x")+i*s(s(this,"rectangle"),"width")),c(r,"originY",s(s(this,"rectangle"),"y")+o*s(s(this,"rectangle"),"height")),c(r,"width",a*s(s(this,"rectangle"),"width")),c(r,"height",p*s(s(this,"rectangle"),"height")),!s(this,"isOnlyHasTextareaShape")&&r instanceof f.TextareaShape&&u(r,"adjustToKeepUniformScale",[])}},t.prototype.completeEdit=function(){c(this,"operatePoint",s(d,"None")),c(this,"draggingContext",void 0)},t.prototype.refreshWithIncludesComponents=function(e){var t=this;c(this,"rectangle",u(this,"findRectangleIncludePoints",[function(t){for(var n=0,r=e;n<r.length;n++){var i=r[n];t(s(i,"originX"),s(i,"originY")),t(s(i,"originX")+s(i,"width"),s(i,"originY")+s(i,"height"))}}])),c(this,"includeComponentNodes",u(e,"map",[function(e){var n,r,i,o;return 0!==s(s(t,"rectangle"),"width")?(n=(s(e,"originX")-s(s(t,"rectangle"),"x"))/s(s(t,"rectangle"),"width"),i=s(e,"width")/s(s(t,"rectangle"),"width")):(n=0,i=1),0!==s(s(t,"rectangle"),"height")?(r=(s(e,"originY")-s(s(t,"rectangle"),"y"))/s(s(t,"rectangle"),"height"),o=s(e,"height")/s(s(t,"rectangle"),"height")):(r=0,o=1),a({dx:n,dy:r,width:i,height:o,component:e})}])),u(this,"refreshRectangleWithHitMargin",[])},t.prototype.refreshRectangleWithHitMargin=function(){var e=this;c(this,"isOnlyHasTextareaShape",!u(s(this,"includeComponentNodes"),"some",[function(e){return!(s(e,"component")instanceof f.TextareaShape)}])),c(this,"rectangleWithHitMargin",u(this,"findRectangleIncludePoints",[function(t){for(var n=0,r=s(e,"includeComponentNodes");n<r.length;n++){var i=r[n].component,o=s(i,"hitTestingBoxMargin");t(s(i,"originX")-o,s(i,"originY")-o),t(s(i,"originX")+s(i,"width")+o,s(i,"originY")+s(i,"height")+o)}}]))},t.prototype.findRectangleIncludePoints=function(e){var t=s(Number,"MIN_SAFE_INTEGER"),n=s(Number,"MIN_SAFE_INTEGER"),r=s(Number,"MAX_SAFE_INTEGER"),i=s(Number,"MAX_SAFE_INTEGER");return e(function(e,o){t=u(Math,"max",[t,e]),r=u(Math,"min",[r,e]),n=u(Math,"max",[n,o]),i=u(Math,"min",[i,o])}),a({x:r,y:i,width:t-r,height:n-i})},t.prototype.renderTagBoxes=function(){var e=a({isDragging:!!s(this,"draggingContext"),isUniformScale:s(this,"isUniformScale"),belongs:s(this,"belongsToUserId")===s(p.getContext(),"observerId")?s(h.BelongsTo,"Me"):s(h.BelongsTo,"Others"),color:s(u(s(this,"context"),"getMemberState",[s(this,"belongsToUserId")]),"strokeColor")});return a({key:s(this,"key"),type:"editor",payload:e,left:s(s(this,"rectangleWithHitMargin"),"x"),top:s(s(this,"rectangleWithHitMargin"),"y"),right:s(s(this,"rectangleWithHitMargin"),"x")+s(s(this,"rectangleWithHitMargin"),"width"),bottom:s(s(this,"rectangleWithHitMargin"),"y")+s(s(this,"rectangleWithHitMargin"),"height")})},t}(o.wrapSuperClass(l.ApplianceComponent));t.EditorRectangleSpace=g,o.defineClass("3",g,{superClass:"../framework:ApplianceComponent",name:"EditorRectangleSpace",properties:[{name:"belongsToUserId",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getSingletonType(o.TypeEnum.Number),decorators:[]},{name:"isShiftPress",isPublic:!0,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getSingletonType(o.TypeEnum.Boolean),decorators:[]},{name:"context",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!1,type:o.getReferenceType("../framework:ApplianceContext"),decorators:[]},{name:"rectangle",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getReferenceType("./TypeDefinitions:Rectangle"),decorators:[]},{name:"rectangleWithHitMargin",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getReferenceType("./TypeDefinitions:Rectangle"),decorators:[]},{name:"operatePoint",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getSingletonType(o.TypeEnum.Any),decorators:[]},{name:"isOnlyHasTextareaShape",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getSingletonType(o.TypeEnum.Boolean),decorators:[]},{name:"draggingContext",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("#2"),o.getSingletonType(o.TypeEnum.Undefined)]),decorators:[]},{name:"includeComponentNodes",isPublic:!1,isAccessor:!1,isReadable:!0,isWritable:!0,type:o.getObjectType({index:o.getReferenceType("#1")}),decorators:[]},{name:"hitTestingBoxMargin",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getSingletonType(o.TypeEnum.Number),decorators:[]},{name:"originX",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getSingletonType(o.TypeEnum.Number),decorators:[]},{name:"originY",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getSingletonType(o.TypeEnum.Number),decorators:[]},{name:"width",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getSingletonType(o.TypeEnum.Number),decorators:[]},{name:"height",isPublic:!0,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getSingletonType(o.TypeEnum.Number),decorators:[]},{name:"isUniformScale",isPublic:!1,isAccessor:!0,isReadable:!0,isWritable:!1,type:o.getSingletonType(o.TypeEnum.Boolean),decorators:[]}],methods:[{name:"tryToStartEdit",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Number),o.getReferenceType("../framework:TargetsMap")],returnType:o.getSingletonType(o.TypeEnum.Boolean),decorators:[]},{name:"isIncludePoint",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Number)],returnType:o.getSingletonType(o.TypeEnum.Boolean),decorators:[]},{name:"findOperationPointWithTargetId",isPublic:!1,parameterTypes:[o.getSingletonType(o.TypeEnum.String)],returnType:o.getCompoundType(o.TypeEnum.And,[o.getReferenceType("./TypeDefinitions:Point"),o.getObjectType({properties:{point:o.getSingletonType(o.TypeEnum.Any)}})]),decorators:[]},{name:"dragToPoint",isPublic:!0,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Number)],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"findDraggingTargetPoint",isPublic:!1,parameterTypes:[o.getSingletonType(o.TypeEnum.Number),o.getSingletonType(o.TypeEnum.Number)],returnType:o.getReferenceType("./TypeDefinitions:Point"),decorators:[]},{name:"updateRectangleWithDraggingTargetPoint",isPublic:!1,parameterTypes:[o.getReferenceType("./TypeDefinitions:Point")],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"refreshIncludesComponentsPositionAndSize",isPublic:!1,parameterTypes:[],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"completeEdit",isPublic:!0,parameterTypes:[],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"refreshWithIncludesComponents",isPublic:!0,parameterTypes:[o.getObjectType({index:o.getReferenceType("./abstract/Editable:Editable")})],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"refreshRectangleWithHitMargin",isPublic:!1,parameterTypes:[],returnType:o.getSingletonType(o.TypeEnum.Never),decorators:[]},{name:"findRectangleIncludePoints",isPublic:!1,parameterTypes:[o.getFunctionType()],returnType:o.getReferenceType("./TypeDefinitions:Rectangle"),decorators:[]},{name:"renderTagBoxes",isPublic:!0,parameterTypes:[],returnType:o.getCompoundType(o.TypeEnum.Or,[o.getReferenceType("../framework:TagBox"),o.getSingletonType(o.TypeEnum.Null)]),decorators:[]}]}),o=null},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("hittest/EllipseTester","1.2.0"),o=i.getter,a=i.caller,s=n(8);n(8);var c=n(10);n(10),i.defineType("0",i.getObjectType({})),i.defineExport("0","EllipseTester");var u=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.circleCenterX=t,o.circleCenterY=n,o.width=r,o.height=i,o}return r(t,e),t.prototype.pointHitTest=function(e,t){return(e=(e-o(this,"circleCenterX"))/o(this,"width")*2)*e+(t=(t-o(this,"circleCenterY"))/o(this,"height")*2)*t<=1},t.prototype.rectHitTest=function(e,t,n,r){var i=this,u=!1,p=!1;if(a(c.RectangleTester,"iterate",[e,t,n,r,function(e,t){a(i,"pointHitTest",[e,t])?u=!0:p=!0}]),u&&p)return o(s.RectangleTestingResult,"Cross");if(u)return o(s.RectangleTestingResult,"IncludeRectangle");if(p){for(var l=a(c.RectangleTester,"allPoints",[e,t,n,r]),h=0;h<o(l,"length");++h){var f=o(l,h),d=o(l,(h+1)%o(l,"length"));if(o(f,"x")===o(d,"x")){if(a(this,"checkCrossVertical",[o(f,"x"),o(f,"y"),o(d,"y")]))return o(s.RectangleTestingResult,"Cross")}else if(a(this,"checkCrossHorizontal",[o(f,"y"),o(f,"x"),o(d,"x")]))return o(s.RectangleTestingResult,"Cross")}if(a(c.RectangleTester,"testPoint",[e,t,n,r,o(this,"circleCenterX"),o(this,"circleCenterY")]))return o(s.RectangleTestingResult,"IncludeByRectangle")}return o(s.RectangleTestingResult,"Disjoint")},t.prototype.checkCrossVertical=function(e,t,n){return e=(e-o(this,"circleCenterX"))/o(this,"width")*2,t=(t-o(this,"circleCenterY"))/o(this,"height")*2,n=(n-o(this,"circleCenterY"))/o(this,"height")*2,a(this,"checkCrossGeometrical",[a(Math,"abs",[e]),t,n])},t.prototype.checkCrossHorizontal=function(e,t,n){return e=(e-o(this,"circleCenterY"))/o(this,"height")*2,t=(t-o(this,"circleCenterX"))/o(this,"width")*2,n=(n-o(this,"circleCenterX"))/o(this,"width")*2,a(this,"checkCrossGeometrical",[a(Math,"abs",[e]),t,n])},t.prototype.checkCrossGeometrical=function(e,t,n){if(e>1)return!1;var r=a(Math,"sqrt",[1-e*e]),i=a(Math,"max",[t,n]),o=a(Math,"min",[t,n]);return i>=r&&r>=o||i>=-r&&-r>=o},t}(i.baseClass());t.EllipseTester=u,i.defineClass("0",u,{name:"EllipseTester",properties:[],methods:[{name:"pointHitTest",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"rectHitTest",isPublic:!0,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getReferenceType("./TypeDefinitions:RectangleTestingResult"),decorators:[]},{name:"checkCrossVertical",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"checkCrossHorizontal",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]},{name:"checkCrossGeometrical",isPublic:!1,parameterTypes:[i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number),i.getSingletonType(i.TypeEnum.Number)],returnType:i.getSingletonType(i.TypeEnum.Boolean),decorators:[]}]}),i=null},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__context("impls/algorithm/DouglasPeucker","1.2.0"),o=i.creator,a=i.setter,s=i.getter,c=i.caller;function u(e,t,n){return(s(n,"x")-s(e,"x"))*s(t,"x")+(s(n,"y")-s(e,"y"))*s(t,"y")}n(11),i.defineType("0",i.getObjectType({properties:{points:i.getObjectType({index:i.getReferenceType("../TypeDefinitions:Point")}),threshold:i.getSingletonType(i.TypeEnum.Number),beginIndex:i.getSingletonType(i.TypeEnum.Number),endIndex:i.getSingletonType(i.TypeEnum.Number)}})),i.defineExport("0","DouglasPeuckerParams"),t.pointsWithDouglasPeucker=function(e){for(var t=e.points,n=e.threshold,i=e.beginIndex,p=e.endIndex,l=o([]),h=o([]),f=i;f<=p;++f)a(h,f,!1);for(function e(t,n,r,i,p){var l=p-i+1;if(l>2){for(var h=s(t,i),f=s(t,p),d=function(e,t){var n=o({x:-t,y:e}),r=c(Math,"sqrt",[s(n,"x")*s(n,"x")+s(n,"y")*s(n,"y")]);return a(n,"x",s(n,"x")/r),a(n,"y",s(n,"y")/r),n}(s(f,"x")-s(h,"x"),s(f,"y")-s(h,"y")),y=-1,g=s(Number,"NEGATIVE_INFINITY"),m=i+1;m<p;++m){var b=s(t,m),v=u(h,d,b),T=c(Math,"abs",[v]);T>g&&(y=m,g=T)}if(g>r)e(t,n,r,i,y),e(t,n,r,y,p);else for(var m=i+1;m<p;++m)a(n,m,!0)}}(t,h,n,i,p),f=i;f<=p;++f)s(h,f)||c(l,"push",[o(r({},s(t,f)))]);return l},i=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("TypeDefinitions","1.2.0");n(9),r.exportExternal("./impls/types"),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(9)),n(4),r.exportExternal("./appState",{Color:"Color",DeviceType:"DeviceType",WorldViewRectangle:"WorldViewRectangle",GlobalState:"GlobalState",MemberState:"MemberState",ViewState:"ViewState",ViewMode:"ViewMode"});var i=n(4);t.DeviceType=i.DeviceType,t.ViewMode=i.ViewMode,n(92),r.exportExternal("./impls",{BundleTypes:"BundleTypes",ImageInformation:"ImageInformation"}),n(3),r.exportExternal("./framework",{TagBox:"TagBox",Scene:"Scene",MemberInformation:"MemberInformation",MemberDisplayer:"MemberDisplayer",TargetsMap:"TargetsMap",MouseEvent:"MouseEvent",KeyEvent:"KeyEvent"}),r=null},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(99),o=n(165),a=n(100),s=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.TypesMap.create.apply(i.TypesMap,e);this.eventTypesMap=a.SessionChannel.sessionEventTypesMap.extendsTypesMap(n)}return e.prototype.create=function(t,n){return void 0===n&&(n={}),new o.AkkoSocketImplement(t,this.eventTypesMap,r({},e.defaultSocketParams,n))},e.defaultSocketParams=Object.freeze({heartbeatInterval:4e4,heartbeatTimeout:12e4,sendingBufferLimit:5242880,onDisconnect:function(){},onDisconnectWithError:function(){},onPhaseChanged:function(){}}),e}();t.AkkoSocketFactory=s,function(e){e.Connecting="connecting",e.Connected="connected",e.Disconnecting="disconnecting",e.Disconnected="disconnected"}(t.AkkoSocketPhase||(t.AkkoSocketPhase={})),function(e){e.Normal="normal",e.WebSocketError="webSocketError",e.CommunicationError="communicationError",e.RemoteError="remoteError"}(t.AkkoSocketDisconnectReason||(t.AkkoSocketDisconnectReason={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){if(this.typeToIndexMap={},e.length>256)throw new Error("TypesMap can't only support more than 256 types");this.types=Object.freeze(e),this.typeToIndexMap=Object.freeze(this.createTypeToIndexMap(this.types))}return e.create=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new e(t.sort())},e.prototype.createTypeToIndexMap=function(e){for(var t={},n=0;n<e.length;++n){var r=e[n];if(r in t)throw new Error('find duplicated type "'+r+' in parameters of new TypesMap(...)"');t[r]=n}return t},e.prototype.findTypeId=function(e){var t=this.typeToIndexMap[e];if(void 0===t)throw new Error("can't find id with type "+e);return t},e.prototype.findTypeById=function(e){var t=this.types[e];if(!t)throw new Error("can't find type with id "+e);return t},e.prototype.extendsTypesMap=function(t){return new e(this.types.concat(t.types))},e}();t.TypesMap=r},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(99),o=n(167),a=n(168),s=["heartbeat","setHeartbeatTimeout","close"],c=function(){function e(e,t,n,i){var s=this;this.receivedWhenNotWorkingBuffer=[],this.remoteHeartbeatTimeout=void 0,this.crashByChannelError=!1,this.isWorking=!1,this.sendHeartbeat=function(){s.isWorking&&(s.sendHeartbeatDelayer.refreshAndInvokeAfterInterval(s.akkoSocket.params.heartbeatInterval),s.chanel.sendPackage("heartbeat"))},this.handleRemoteHeartbeatTimeout=function(){s.crashByChannelError||(s.crashByChannelError=!0,s.callbacks.onRemoteHeartbeatTimeout())},this.onReceivedPackage=function(e){if(!s.crashByChannelError)if(s.isWorking)try{s.handleReceivedPackage(e)}finally{s.delayRemoteHeartbeatTimeoutChecking()}else s.receivedWhenNotWorkingBuffer.push(e)},this.akkoSocket=e,this.chanel=new o.PackagesChannel(n,t,this.onReceivedPackage),this.callbacks=Object.freeze(r({},i)),this.sendHeartbeatDelayer=new a.Delayer(this.sendHeartbeat),this.remoteHeartbeatTimeoutDelayer=new a.Delayer(this.handleRemoteHeartbeatTimeout)}return e.prototype.send=function(e,t){if(this.isWorking){if(this.didBufferedAmountOverflow())throw this.crashByChannelError||(this.crashByChannelError=!0,this.callbacks.onSendingBufferOverflow()),new Error("sending buffer overflow");this.sendHeartbeatDelayer.refreshAndInvokeAfterInterval(this.akkoSocket.params.heartbeatInterval),this.chanel.sendPackage(e,t)}},e.prototype.didBufferedAmountOverflow=function(){return this.chanel.bufferedAmount>this.akkoSocket.params.sendingBufferLimit+this.chanel.maxPackageBytesInLatestThree},e.prototype.dispatchClose=function(e){var t=JSON.stringify(e);this.chanel.sendPackage("close",t)},e.prototype.start=function(){this.isWorking||(this.isWorking=!0,this.delayRemoteHeartbeatTimeoutChecking(),this.sendHeartbeatDelayer.refreshAndInvokeAfterInterval(this.akkoSocket.params.heartbeatInterval),this.chanel.sendPackage("setHeartbeatTimeout",this.akkoSocket.params.heartbeatTimeout),this.cleanReceivedWhenNotWorkingBuffer())},e.prototype.cleanReceivedWhenNotWorkingBuffer=function(){var e=this.receivedWhenNotWorkingBuffer.splice(0,this.receivedWhenNotWorkingBuffer.length);if(e.length>0)try{for(var t=0,n=e;t<n.length;t++){var r=n[t];this.handleReceivedPackage(r)}}finally{this.delayRemoteHeartbeatTimeoutChecking()}},e.prototype.stop=function(){this.isWorking&&(this.isWorking=!1,this.sendHeartbeatDelayer.cancel(),this.remoteHeartbeatTimeoutDelayer.cancel(),this.remoteHeartbeatTimeout=void 0)},e.prototype.handleReceivedPackage=function(e){if(-1===s.indexOf(e.type))this.callbacks.onEvent(e.type,e.data);else if("setHeartbeatTimeout"===e.type)"number"==typeof e.data&&e.data>0?this.remoteHeartbeatTimeout=e.data:console.warn("illegal remote heartbeat timeout: "+e.data);else if("close"===e.type){var t=void 0;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){console.warn("parse close payload as JSON failed: "+e.message)}this.callbacks.onCloseByRemote(t)}},e.prototype.delayRemoteHeartbeatTimeoutChecking=function(){void 0===this.remoteHeartbeatTimeout?this.remoteHeartbeatTimeoutDelayer.refreshAndInvokeAfterInterval(this.akkoSocket.params.heartbeatTimeout):this.remoteHeartbeatTimeoutDelayer.refreshAndInvokeAfterInterval(this.remoteHeartbeatTimeout)},e.sessionEventTypesMap=i.TypesMap.create.apply(i.TypesMap,s),e}();t.SessionChannel=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.WaitingData="waitingData",e.Playing="playing",e.Pause="pause",e.Buffering="buffering",e.Seeking="seeking"}(t.MediaPlayerPhase||(t.MediaPlayerPhase={}))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(54)),r(n(57)),r(n(192)),r(n(113)),r(n(220)),r(n(101))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.createPropsSyncNode=function(e){return new o(e)},t.wrapPropsSyncNodeReceivableComponent=function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.updateProps=function(e){n.setState(e)},n.propsSyncNode=e.propsSyncNode,n.state=Object.assign({},e,n.propsSyncNode.props),n}return r(n,t),n.prototype.componentWillReceiveProps=function(e){if(this.propsSyncNode!==e.propsSyncNode)throw new Error("can not change propsSyncNode in props");this.setState(Object.assign({},e,this.propsSyncNode.props))},n.prototype.componentWillMount=function(){this.propsSyncNode.addListener(this.updateProps)},n.prototype.componentWillUnmount=function(){this.propsSyncNode.removeListener(this.updateProps)},n.prototype.render=function(){return i.createElement(e,this.state)},n}(i.Component)};var o=function(){function e(e){this.listeners=[],this._props=Object.assign({},e)}return Object.defineProperty(e.prototype,"props",{get:function(){return this._props},enumerable:!0,configurable:!0}),e.prototype.setProps=function(e){this._props=Object.assign({},this._props,e);for(var t=0,n=this.listeners;t<n.length;t++){(0,n[t])(e)}},e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.removeListener=function(e){var t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.width=e,this.height=t,this.contentLength=e*t}return e.prototype.create=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(e.length>this.contentLength&&(e=e.splice(0,this.contentLength));e.length<this.contentLength;)e.push(0);return new i(this.width,this.height,e)},e.prototype.createByGenerator=function(e){for(var t=0,n=[],r=0;r<this.height;++r)for(var o=0;o<this.width;++o)n[t]=e(t,o,r),t++;return new i(this.width,this.height,n)},e.prototype.E=function(){if(this.width!==this.height)throw new Error("width is not equals to height");return this.createByGenerator(function(e,t,n){return t===n?1:0})},e}();t.MatrixFactory=r,t.Matrix2D=new r(2,2),t.Matrix3D=new r(3,3),t.Vector2D=new r(1,2),t.Vector3D=new r(1,3);var i=function(){function e(e,t,n){this.width=e,this.height=t,this.content=n}return e.prototype.clone=function(){if(this.content.find(function(e){return Number.isNaN(e)}))throw new Error("find value who isn't a number in matrix");return new e(this.width,this.height,this.content.slice())},e.prototype.get=function(e,t){return this.isOutOfRange(e,t)?NaN:this.content[e+t*this.width]},e.prototype.set=function(e,t,n){if(Number.isNaN(n))throw Error("can't set not number value at ("+e+", "+t+")");this.isOutOfRange(e,t)||(this.content[e+t*this.width]=n)},e.prototype.toArray=function(){return this.content.slice()},e.prototype.forEach=function(e){for(var t=0,n=0;n<this.height;++n)for(var r=0;r<this.width;++r)e(this.content[t],t,r,n),t++},e.prototype.isOutOfRange=function(e,t){return e<0||e>this.width||(t<0||t>this.height)},e.plus=function(t,n){if(t.width!==n.width||t.height!==n.height)throw new Error("Matrix size not match");var r=[];return t.forEach(function(e,t,i,o){return r[t]=e+n.get(i,o)}),new e(t.width,t.height,r)},e.inverseOf3D=function(e){var n=t.Matrix3D.create(),r=1/(e.get(0,0)*(e.get(1,1)*e.get(2,2)-e.get(2,1)*e.get(1,2))-e.get(0,1)*(e.get(1,0)*e.get(2,2)-e.get(2,0)*e.get(1,2))+e.get(0,2)*(e.get(1,0)*e.get(2,1)-e.get(2,0)*e.get(1,1)));if(r===1/0)throw new Error("matrix doesn't have inverse");return n.set(0,0,r*(e.get(1,1)*e.get(2,2)-e.get(2,1)*e.get(1,2))),n.set(0,1,r*(e.get(2,1)*e.get(0,2)-e.get(0,1)*e.get(2,2))),n.set(0,2,r*(e.get(0,1)*e.get(1,2)-e.get(1,1)*e.get(0,2))),n.set(1,0,r*(e.get(2,0)*e.get(1,2)-e.get(1,0)*e.get(2,2))),n.set(1,1,r*(e.get(0,0)*e.get(2,2)-e.get(2,0)*e.get(0,2))),n.set(1,2,r*(e.get(1,0)*e.get(0,2)-e.get(0,0)*e.get(1,2))),n.set(2,0,r*(e.get(1,0)*e.get(2,1)-e.get(2,0)*e.get(1,1))),n.set(2,1,r*(e.get(0,1)*e.get(2,0)-e.get(0,0)*e.get(2,1))),n.set(2,2,r*(e.get(0,0)*e.get(1,1)-e.get(0,1)*e.get(1,0))),n},e.multiply=function(e,t){if(e.height!==t.width)throw new Error("matrix1's height is not match matrix2's width");var n=e.width,i=t.height,o=e.height;return new r(n,i).createByGenerator(function(n,r,i){for(var a=0,s=0;s<o;++s)a+=e.get(r,s)*t.get(s,i);return a})},e.prototype.toString=function(){for(var e=[],t=0,n=0;n<this.height;++n)for(var r=e[n]=[],i=0;i<this.width;++i)r.push(this.content[t]),t++;return"{\n"+e.map(function(e){return"\t"+e.map(function(e){return Math.ceil(100*e)/100}).join("\t")}).join("\n")+"\n}"},e}();t.Matrix=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.isFreezed=!1,this.shouldInvokeAfterFreeze=!1,this.latestInvokeTimestamp=0,this.timer=-1,this._limitDuration=e,this.invoker=t,this.invokeWhenTimeout=this.invokeWhenTimeout.bind(this)}return Object.defineProperty(e.prototype,"limitDuration",{get:function(){return this._limitDuration},set:function(e){if(this._limitDuration!==e){if(this._limitDuration=e,-1!==this.timer){clearTimeout(this.timer);var t=this.nextInvokeTimeDuration();this.timer=setTimeout(this.invokeWhenTimeout,t)}this.invoke()}},enumerable:!0,configurable:!0}),e.prototype.invoke=function(){if(this.isFreezed)this.shouldInvokeAfterFreeze=!0;else if(-1===this.timer){var e=this.nextInvokeTimeDuration();this.timer=setTimeout(this.invokeWhenTimeout,e)}},e.prototype.nextInvokeTimeDuration=function(){var e=(new Date).getTime(),t=this.latestInvokeTimestamp+this.limitDuration-e;return Math.max(0,t)},e.prototype.invokeWhenTimeout=function(){this.timer=-1,this.latestInvokeTimestamp=(new Date).getTime(),this.invoker()},e.prototype.cancel=function(){this.isFreezed?this.shouldInvokeAfterFreeze=!1:-1!==this.timer&&(clearTimeout(this.timer),this.timer=-1)},e.prototype.freeze=function(){this.isFreezed||(-1!==this.timer&&(clearTimeout(this.timer),this.timer=-1,this.shouldInvokeAfterFreeze=!0),this.isFreezed=!0)},e.prototype.unfreeze=function(){this.isFreezed&&(this.isFreezed=!1,this.shouldInvokeAfterFreeze&&(this.shouldInvokeAfterFreeze=!1,this.invoke()))},e}();t.InvokeFrequencyLimiter=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(107),o=n(56),a=n(35),s=n(17),c=function(){function e(t,n,r,i){this.underclockingInvoker=new o.UnderclockingInvoker(a.HoverMouseEventLimitTimeInterval),this.isCursorInScene=!1,this.isPressed=!1,this.isActivity=!1,this.isKeepVisible=!1,this.inactivityTimer=null,this.cursorInformation=new u(t,r,i),this.camera=t,this.animationTickGen=n.createChildTickBeforeMe(),this.spring=e.cursorSpaceSpringFactory.create(this.animationTickGen,this.cursorInformation.point),this.memberId=r.memberId,this.isCursorInScene=r.isCursorInScene,this.isPressed=r.isPressed,this.isActivity=r.isActivity,this.isKeepVisible=r.isActivity}return Object.defineProperty(e.prototype,"fixedOnScreen",{get:function(){return this.cursorInformation.fixedOnScreen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this.isCursorInScene&&this.isKeepVisible},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.spring.stop(),this.underclockingInvoker.cancel()},e.prototype.updateMemberDisplayer=function(e,t,n){var r=this.cursorInformation.fixedOnScreen;this.cursorInformation.update(e,t)&&this.updateInformation(this.cursorInformation,n,r);var i=this.isActivity;this.isCursorInScene=e.isCursorInScene,this.isPressed=e.isPressed,this.isActivity=e.isActivity,i&&!this.isActivity?this.delayInactivity():!i&&this.isActivity&&(this.cleanInactivityDelayer(),this.isKeepVisible=!0)},e.prototype.updateInformation=function(e,t,n){var r=this;if(t&&(s.checkValueIsEquals(this.spring.point,e.point)||(this.delayInactivity(),this.underclockingInvoker.cancel(),this.spring.moveRightNow(e.point))),!n&&e.fixedOnScreen){var i={x:this.spring.point[0],y:this.spring.point[1]};this.pointToScreenFromWorld(i);var o=[i.x-this.spring.point[0],i.y-this.spring.point[1]];this.underclockingInvoker.cancel(),this.spring.moveToAndChangeCoordinate(o,e.point)}else n&&!e.fixedOnScreen?s.checkValueIsEquals(this.spring.point,e.point)||(this.delayInactivity(),this.underclockingInvoker.cancel(),this.spring.moveRightNow(e.point)):s.checkValueIsEquals(this.spring.point,e.point)||(this.delayInactivity(),this.underclockingInvoker.invoke(function(){return r.spring.moveTo(e.point)}))},e.prototype.cursorView=function(){var e={x:this.spring.point[0],y:this.spring.point[1]};return this.cursorInformation.fixedOnScreen||this.pointToScreenFromWorld(e),Object.freeze({memberId:this.memberId,x:e.x,y:e.y})},e.prototype.pointToScreenFromWorld=function(e){var t=this.camera,n=t.rectangle,r=t.width,i=t.height,o=r/n.width,a=i/n.height,s=Math.min(o,a),c=(r-s*n.width)/2,u=(i-s*n.height)/2;e.x=(e.x-n.originX)*s+c,e.y=(e.y-n.originY)*s+u},e.prototype.cleanInactivityDelayer=function(){null!==this.inactivityTimer&&(clearTimeout(this.inactivityTimer),this.inactivityTimer=null)},e.prototype.delayInactivity=function(){var e=this;null!==this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.isActivity||(this.isKeepVisible=!0,this.inactivityTimer=setTimeout(function(){e.isKeepVisible=!1,e.animationTickGen.invokeOnce(),e.inactivityTimer=null},5600))},e.cursorSpaceSpringFactory=new i.SpaceSpringFactory({matchingDistance:2,zeroSpeed:.55,kDistance:.17,velocityDamping:.55,heavyDampingRadius:15,heavyDampingSpeed:.25,pedesisSpeedMean:0,pedesisSpeedVariance:0},{matchingDistance:2,zeroSpeed:.55,kDistance:.12,velocityDamping:.35,heavyDampingRadius:15,heavyDampingSpeed:.35,pedesisSpeedMean:0,pedesisSpeedVariance:0}),e}();t.CursorNode=c;var u=function(){function e(e,t,n){this.camera=e,this.memberDisplayer=t,this.isFollowerFixedOnScreen=n,this.refreshWithParams(t,n)}return Object.defineProperty(e.prototype,"fixedOnScreen",{get:function(){return this._fixedOnScreen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){return this._point},enumerable:!0,configurable:!0}),e.prototype.update=function(e,t){if(this.isFollowerFixedOnScreen===t&&s.checkValueIsEquals(this.memberDisplayer,e))return!1;var n=this._fixedOnScreen,r=this._point;return this.isFollowerFixedOnScreen=t,this.memberDisplayer=e,this.refreshWithParams(e,t),n!==this._fixedOnScreen||!s.checkValueIsEquals(r,this._point)},e.prototype.refreshWithParams=function(e,t){if(t&&e.mode!==r.ViewMode.Freedom){var n=0===e.width?1:this.camera.width/e.width,i=0===e.height?1:this.camera.height/e.height,o=Math.min(n,i),a=(this.camera.width-o*e.width)/2,s=(this.camera.height-o*e.height)/2,c=e.cursorX*e.width*o+a,u=e.cursorY*e.height*o+s;this._fixedOnScreen=!0,this._point=[c,u]}else{c=e.cursorX*e.width+e.originX,u=e.cursorY*e.height+e.originY;this._fixedOnScreen=!1,this._point=[c,u]}},e}()},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(182),o=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.configurations=Object.freeze(e.map(function(e){return Object.freeze(r({},e))}))}return e.prototype.create=function(e,t){return new a(this.configurations.slice(),e,t)},e}();t.SpaceSpringFactory=o;var a=function(){function e(t,n,r,o){var a=this;this.animationTickGen=n,this._point=r,this.onPointUpdate=o,this.completeTick=!1,this.updateIdealPoint=function(t){e.setPoint(a.idealPoint,t),!a.animationTickGen.onTick&&a.shouldContinueMoving()&&(a.animationTickGen.onTick=a.onTick),a.completeTick=!1},this.onTick=function(){a.completeTick?a.stop():(a.executePhysicalSimulate(),a.onPointUpdate&&a.onPointUpdate(a._point),a.shouldContinueMoving()||(a.completeTick=!0))},this.configuration=t.splice(0,1)[0],this._point=r.slice(),this.idealPoint=r.slice(),this.velocity=r.map(function(){return 0}),t.length>0&&(this.guider=new e(t,n.createChildTickBeforeMe(),r,this.updateIdealPoint));var s=this.configuration.pedesisSpeedMean,c=this.configuration.pedesisSpeedVariance;this.gaussian=0!==s&&0!==c?i.gaussian(s,c):null,this.noPedesisRadius=(s+Math.sqrt(c))*e.noPedesisRadiusRate}return Object.defineProperty(e.prototype,"point",{get:function(){return this._point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlayingAnimation",{get:function(){return!!this.animationTickGen.onTick},enumerable:!0,configurable:!0}),e.prototype.moveRightNow=function(t){this.guider&&this.guider.moveRightNow(t),e.setPoint(this.idealPoint,t),e.setPoint(this._point,t),e.setPointZero(this.velocity),this.animationTickGen.onTick=void 0,this.completeTick=!1},e.prototype.moveTo=function(e){this.guider?this.guider.moveTo(e):this.updateIdealPoint(e)},e.prototype.moveToAndChangeCoordinate=function(e,t){for(var n=0;n<this._point.length;++n)this._point[n]+=e[n];this.guider?this.guider.moveToAndChangeCoordinate(e,t):this.updateIdealPoint(t)},e.prototype.stop=function(){e.setPoint(this.idealPoint,this._point),e.setPointZero(this.velocity),this.animationTickGen.onTick=void 0,this.completeTick=!1},e.prototype.executePhysicalSimulate=function(){for(var e=this.squareDistanceToIdealPoint(),t=this.velocityDamping(e),n=e>this.noPedesisRadius*this.noPedesisRadius,r=0;r<this._point.length;++r){var i=this.idealPoint[r]-this._point[r],o=this.configuration.kDistance*i;if(this.velocity[r]+=o,n&&this.gaussian){var a=this.gaussian.ppf(Math.random());Math.random()>=.5&&(a=-a),this.velocity[r]+=a}this._point[r]+=this.velocity[r],this.velocity[r]*=1-t}},e.prototype.velocityDamping=function(e){for(var t=0,n=0;n<this.velocity.length;++n)t+=this.velocity[n]*this.velocity[n];var r=this.configuration,i=r.heavyDampingRadius,o=r.heavyDampingSpeed;return t<o*o||e>i*i?this.configuration.velocityDamping:Math.min(1,t*this.configuration.velocityDamping)},e.prototype.squareDistanceToIdealPoint=function(){for(var e=0,t=0;t<this.velocity.length;++t){var n=this.idealPoint[t]-this._point[t];e+=n*n}return e},e.prototype.shouldContinueMoving=function(){for(var e=0;e<this._point.length;++e){if(Math.abs(this._point[e]-this.idealPoint[e])>this.configuration.matchingDistance)return!0;if(Math.abs(this.velocity[e])>this.configuration.zeroSpeed)return!0}return!1},e.setPoint=function(e,t){for(var n=0;n<e.length;++n)e[n]=n in t?t[n]:0},e.setPointZero=function(e){for(var t=0;t<e.length;++t)e[t]=0},e.noPedesisRadiusRate=2.7,e}();t.SpaceSpring=a},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(193),a=n(201),s=function(){return null};t.bindRoom=function(e,t){t?o.render(i.createElement(a.RoomWhiteboard,r({},t)),e):o.render(i.createElement(s,null),e)},t.bindPlayer=function(e,t){t?o.render(i.createElement(a.PlayerWhiteboard,r({},t)),e):o.render(i.createElement(s,null),e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(27);t.TextareaHeightIncrement=8,t.FixedTextareaBox=function(e){var n=e.params.payload,o=n.margin,a=n.textSize,s=i.findFixedRectangle(e.params,o),c=s.right-s.left,u=Math.max(a+t.TextareaHeightIncrement+2*o,s.bottom-s.top),p=e.params.payload.color,l=p[0],h=p[1],f=p[2],d={left:s.left,top:s.top,width:c,height:u,borderColor:"rgb("+l+","+h+","+f+")"};return r.createElement("div",{className:"textarea-box",style:d})}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i,o,a,s=n(12),c=n(111),u={keyup:{method:"onKeyUp",isOnDocument:!0},keydown:{method:"onKeyDown",isOnDocument:!0},mousedown:{method:"onMouseDown",isOnDocument:!1},mousemove:{method:"onMouseMove",isOnDocument:!1},mouseup:{method:"onMouseUp",isOnDocument:!0},mouseleave:{method:"onMouseLeave",isOnDocument:!1},wheel:{method:"onMouseWheel",isOnDocument:!0},touchstart:{method:"onTouchStart",isOnDocument:!1},touchmove:{method:"onTouchMove",isOnDocument:!1},touchend:{method:"onTouchEnd",isOnDocument:!1},touchcancel:{method:"onTouchCancel",isOnDocument:!1},gesturestart:{method:"onGestureStart",isOnDocument:!0},gesturechange:{method:"onGestureChange",isOnDocument:!0},gestureend:{method:"onGestureEnd",isOnDocument:!0}};!function(e){e[e.None=0]="None",e[e.Ignore=1]="Ignore",e[e.Operating=2]="Operating"}(i||(i={})),function(e){e[e.Start=0]="Start",e[e.Move=1]="Move",e[e.End=2]="End"}(o=t.EventStatus||(t.EventStatus={})),function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"}(a=t.KeyEventStatus||(t.KeyEventStatus={}));var p=function(){function e(e,t,n){this.operator=e,this._disableOperations=t,this.latestMousePosition={x:0,y:0},this.ref=null,this.status=i.None,this.lastGestureScale=1,this.acceptedTouches={},this.acceptedTouchesCount=0,this.acceptedKeys={},this.callbacks=Object.freeze(r({},n)),this.listeners=Object.freeze(this.createListeners())}return Object.defineProperty(e.prototype,"disableOperations",{get:function(){return this._disableOperations},set:function(e){this._disableOperations!==e&&(this._disableOperations=e,e&&this.cancelAllEvents())},enumerable:!0,configurable:!0}),e.prototype.cancelAllEvents=function(){for(var e in this.acceptedKeys){var t=this.acceptedKeys[e];this.operator.onKeyUp(t)}if(this.acceptedKeys={},this.status!==i.None&&this.status!==i.Ignore){switch(this.operator.deviceType){case s.DeviceType.Desktop:this.operator.onMouseUp(r({},this.latestMousePosition,{targetsMap:{}}));break;case s.DeviceType.Touch:var n=[];for(var o in this.acceptedTouches){var a=this.acceptedTouches[o],c=a.x,u=a.y;n.push({x:c,y:u,identifier:o,targetsMap:{}})}this.acceptedTouches={},this.acceptedTouchesCount=0,this.operator.onTouchCancel(n)}this.changeStatus(i.None)}},e.prototype.createListeners=function(){var e={};for(var t in u){var n=u[t].method,r=this[n].bind(this);e[n]=r}return e},e.prototype.isEventFiredOnRef=function(e){for(;e;){if(e===this.ref)return!0;e=e.parentElement}return!1},e.prototype.setHTMLDivElement=function(e){if(this.ref!==e){for(var t in u){var n=u[t],r=n.method,i=n.isOnDocument,o=this.listeners[r];if(e)(i?document.body:e).addEventListener(t,o,!0);else(i?document.body:this.ref).removeEventListener(t,o,!0)}this.ref=e}},e.prototype.eventPosition=function(e){var t=c.pagePositionWith(this.ref),n=t.x,r=t.y;return{x:Math.floor(e.pageX)-n,y:Math.floor(e.pageY)-r}},e.prototype.onKeyDown=function(e){if(!this.disableOperations&&this.filterKeyEvents(e,a.Down)){var t=e.key,n=e.altKey,r=e.ctrlKey,i=e.shiftKey;this.acceptedKeys[t]={key:t,altKey:n,ctrlKey:r,shiftKey:i},this.operator.onKeyDown({key:t,altKey:n,ctrlKey:r,shiftKey:i})}},e.prototype.onKeyUp=function(e){var t=e.key,n=e.altKey,r=e.ctrlKey,i=e.shiftKey;!this.disableOperations&&this.filterKeyEvents(e,a.Up)&&t in this.acceptedKeys&&(this.operator.onKeyUp({key:t,altKey:n,ctrlKey:r,shiftKey:i}),delete this.acceptedKeys[t])},e.prototype.onMouseDown=function(e){var t=this.callbacks.filterMouseEvents(e,o.Start);if(!this.disableOperations&&t&&this.isLeftMouseButton(e)&&this.status===i.None)if(e.target&&this.isEventFiredOnRef(e.target)){var n=this.eventPosition(e);this.latestMousePosition.x=n.x,this.latestMousePosition.y=n.y,this.changeStatus(i.Operating),this.operator.onMouseDown({x:n.x,y:n.y,targetsMap:t})}else this.changeStatus(i.Ignore)},e.prototype.onMouseMove=function(e){if(!this.disableOperations&&void 0!==this.callbacks.filterMouseEvents(e,o.Move)&&(this.status===i.Operating||this.status===i.None)){var t=this.eventPosition(e);this.latestMousePosition.x=t.x,this.latestMousePosition.y=t.y,this.operator.onMouseMove({x:t.x,y:t.y,targetsMap:{}})}},e.prototype.onMouseLeave=function(e){if(!this.disableOperations&&void 0!==this.callbacks.filterMouseEvents(e,o.Move)&&(this.status===i.Operating||this.status===i.None)){var t=this.eventPosition(e);this.latestMousePosition.x=t.x,this.latestMousePosition.y=t.y,this.operator.onMouseLeave({x:t.x,y:t.y,targetsMap:{}})}},e.prototype.onMouseUp=function(e){if(!this.disableOperations&&void 0!==this.callbacks.filterMouseEvents(e,o.Move)){if(this.status===i.Operating){var t=this.eventPosition(e);this.operator.onMouseUp({x:t.x,y:t.y,targetsMap:{}})}this.changeStatus(i.None)}},e.prototype.onMouseWheel=function(e){if(this.isEventFiredOnRef(e.target)){if(e.preventDefault(),!this.disableOperations){var t=c.pagePositionWith(this.ref),n=t.x,r=t.y,i=e.deltaX,o=e.deltaY,a=e.pageX-n,s=e.pageY-r,u=Math.sqrt(i*i+o*o);i+o<0&&(u=-u);var p={offsetX:0,offsetY:0,x:a,y:s,scale:u};this.isMacTouchpadTwoFingerZoom(e)?p.scale=.5*-p.scale:this.isMacTouchpadTwoFingerScroll(e)?(p.offsetX=-i,p.offsetY=-o,p.x=a,p.y=s,p.scale=0):p.scale=.035*p.scale,this.operator.onViewTransform(p)}}else this.isMacTouchpadTwoFingerZoom(e)&&e.preventDefault()},e.prototype.isLeftMouseButton=function(e){return 0===e.button},e.prototype.isMacTouchpadTwoFingerZoom=function(e){return-1!==navigator.platform.indexOf("Mac")&&e.ctrlKey},e.prototype.isMacTouchpadTwoFingerScroll=function(e){return-1!==navigator.platform.indexOf("Mac")&&(e.wheelDelta%120!=0||0!==e.movementX||0!==e.deltaX)},e.prototype.onGestureStart=function(e){e.preventDefault(),this.lastGestureScale=1},e.prototype.onGestureChange=function(t){t.preventDefault();var n=t.scale,r={offsetX:0,offsetY:0,x:t.layerX,y:t.layerY,scale:(n/this.lastGestureScale-1)*e.SafariScaleNumber};this.operator.onViewTransform(r),this.lastGestureScale=n},e.prototype.onGestureEnd=function(e){e.preventDefault()},e.prototype.onTouchStart=function(e){if(!this.disableOperations&&this.status!==i.Ignore){e.preventDefault();for(var t=e.changedTouches,n=[],r=0;r<t.length;++r){var a=t.item(r),s=""+a.identifier,c=this.callbacks.filterTouchEvents(a,s,o.Start);if(this.isEventFiredOnRef(a.target)){var u=this.eventPosition(a),p=u.x,l=u.y;this.acceptedTouches[s]={x:p,y:l},this.acceptedTouchesCount++,c&&n.push({x:p,y:l,identifier:s,targetsMap:c})}}n.length>0&&(this.changeStatus(i.Operating),this.operator.onTouchStart(n))}},e.prototype.onTouchMove=function(e){if(this.status===i.Operating){e.preventDefault();for(var t=e.touches,n=[],r=0;r<t.length;++r){var a=t.item(r),s=""+a.identifier,c=this.callbacks.filterTouchEvents(a,s,o.Move);if(s in this.acceptedTouches){var u=this.eventPosition(a),p=u.x,l=u.y,h=this.acceptedTouches[s];h.x=p,h.y=l,c&&n.push({x:p,y:l,identifier:s,targetsMap:c})}}n.length>0&&this.operator.onTouchMove(n)}},e.prototype.onTouchEnd=function(e){if(this.status===i.Operating){e.preventDefault();var t=this.cleanAcceptedTouchesByTouchEvent(e);t.length>0&&this.operator.onTouchEnd(t)}},e.prototype.onTouchCancel=function(e){if(this.status===i.Operating){e.preventDefault();var t=this.cleanAcceptedTouchesByTouchEvent(e);t.length>0&&this.operator.onTouchCancel(t)}},e.prototype.filterKeyEvents=function(e,t){return!this.callbacks.filterKeyEvents||this.callbacks.filterKeyEvents(e,t)},e.prototype.cleanAcceptedTouchesByTouchEvent=function(e){for(var t=e.changedTouches,n=[],r=0;r<t.length;++r){var a=t.item(r),s=""+a.identifier,c=this.callbacks.filterTouchEvents(a,s,o.End);if(s in this.acceptedTouches&&(delete this.acceptedTouches[s],this.acceptedTouchesCount--,c)){var u=this.eventPosition(a),p=u.x,l=u.y;n.push({x:p,y:l,identifier:s,targetsMap:c})}}return 0===this.acceptedTouchesCount&&this.changeStatus(i.None),n},e.prototype.changeStatus=function(e){if(this.status!==e){var t=this.status===i.Operating,n=e===i.Operating;this.status=e,t!==n&&this.callbacks.onIsMouseOrTouchOperatingChanged(n)}},e.SafariScaleNumber=100,e}();t.OperationProxy=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pagePositionWith=function(e){for(var t={x:0,y:0};e;)t.x+=e.offsetLeft,t.y+=e.offsetTop,e=e.offsetParent;return document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)?(t.x-=document.documentElement.scrollLeft,t.y-=document.documentElement.scrollTop):document.body&&(document.body.scrollTop||document.body.scrollLeft)?(t.x-=document.body.scrollLeft,t.y-=document.body.scrollTop):(window.pageXOffset||window.pageYOffset)&&(t.x-=window.pageXOffset,t.y-=window.pageYOffset),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=function(){function e(e){var t=e.stateKeys,n=e.state,i=e.onStateChanged;this.stateKeysSet=this.createStateKeysSet(t),this._exportState=this.createExportState(t,n),this.diffBundle=new r.DiffBundle(n),this.onStateChanged=i}return e.prototype.createStateKeysSet=function(e){for(var t={},n=0,r=e;n<r.length;n++){t[r[n]]=!0}return t},e.prototype.createExportState=function(e,t){for(var n={},r=0,i=e;r<i.length;r++){var o=i[r];n[o]=t[o]}return n},e.prototype.setAndCompare=function(e){var t=this.diffBundle.setAndCompare(e),n={},r=0;for(var i in t)if(i in this.stateKeysSet){var o=t[i].target;n[i]=o,this._exportState[i]=o,r++}return this.onStateChanged&&r>0&&this.onStateChanged(n),t},e.prototype.setProperty=function(e,t){return e in this.stateKeysSet&&(this._exportState[e]=t),this.diffBundle.bundle[e]=t},Object.defineProperty(e.prototype,"exportState",{get:function(){return this._exportState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.diffBundle.bundle},enumerable:!0,configurable:!0}),e}();t.StateTrigger=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.WaitingFirstFrame="waitingFirstFrame",e.Playing="playing",e.Pause="pause",e.Stop="stop",e.TouchedEnding="touchedEnding",e.Buffering="buffering"}(t.PlayerPhase||(t.PlayerPhase={})),function(e){e.Directory="directory",e.Freedom="freedom"}(t.ObserverMode||(t.ObserverMode={}))},function(e,t,n){"use strict";var r=n(59);e.exports=r.WhiteWebSdk},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=new(n(36).IdGenerator);t.generateSelfloopSerializerObject=function(e,t){var n={id:e,types:Object.freeze(t.slice())};return n.key=n,n.index=n,n.properties=Object.freeze({}),Object.freeze(n)},function(e){e.Any="any",e.Never="never",e.Undefined="undefined",e.Null="null",e.String="string",e.Number="number",e.Boolean="boolean",e.Function="function",e.Object="object",e.And="and",e.Or="or",e.Generic="generic",e.Generator="generator",e.Reference="reference"}(r=t.TypeEnum||(t.TypeEnum={}));var o=function(){for(var e={},t=0,n=[r.Any,r.Never,r.Undefined,r.Null,r.String,r.Number,r.Boolean];t<n.length;t++){var o=n[t];e[o]={id:i.generate(),typeEnum:o}}return Object.freeze(e)}();function a(e){return o[e]}t.getSingletonType=a,t.getFunctionType=function(){return{id:i.generate(),typeEnum:r.Function}},t.getObjectType=function(e){var t=void 0===e?{}:e,n=t.key,o=t.index,s=t.properties;return{id:i.generate(),typeEnum:r.Object,key:n||a(r.Undefined),index:o||a(r.Undefined),properties:s||{}}},t.getCompoundType=function(e,t){return void 0===t&&(t=[]),{id:i.generate(),typeEnum:e,children:t}},t.getGenericType=function(e){return{id:i.generate(),typeEnum:r.Generic,index:e}},t.getGeneratorType=function(e){var t=e.template,n=e.params;return{id:i.generate(),typeEnum:r.Generator,template:t,params:n||[]}},t.getReferenceType=function(e){return{id:i.generate(),typeEnum:r.Reference,symbol:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),i=n(117),o=n(36),a=function(){function e(e,t){void 0===e&&(e=[]),this.bufferIdStack=[],this.templateEnvironment=new i.TemplateEnvironment(this.createContext(t)),this.tempObjectCache=new s(this.convertCollapsedNodeToTempObject.bind(this)),this.push.apply(this,e)}return e.prototype.createContext=function(e){return e||(e=function(e){throw new Error('can not handle symbol "'+e.symbol+'", because not implement replacer')}),Object.freeze({referenceTypeReplacer:e})},e.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var i=r[n],o=this.templateEnvironment.getTemplate(i).getHandle([]).collapsedNode,a=this.tempObjectCache.fetchIdWithCollapsedNode(o);this.bufferIdStack.push(a)}},e.prototype.getSerializerObjectsAndCleanBuffer=function(){var e=this.generateAllSerializerObjectsMap();return this.bufferIdStack=[],e},e.prototype.generateAllSerializerObjectsMap=function(){for(var e=[],t={},n=function(n){return e[t[n]]},r=[],i=0,o=this.tempObjectCache.allIds;i<o.length;i++){var a=o[i];t[a]=e.length,e.push({}),r.push(this.tempObjectCache.tempObjectWithId(a))}for(var s=0;s<r.length;++s){var c=r[s],u=e[s];this.fillTempObjectIntoSerializerObject(c,u,s,n)}return this.bufferIdStack.map(n)},e.prototype.fillTempObjectIntoSerializerObject=function(e,t,n,r){t.id=n,t.types=Object.freeze(e.types),t.key=r(e.key),t.index=r(e.index);var i={};for(var o in e.properties){var a=e.properties[o];i[o]=r(a)}t.properties=Object.freeze(i),Object.freeze(t)},e.prototype.convertCollapsedNodeToTempObject=function(e){for(;e.handle;)e=e.handle.collapsedNode;var t=e.types,n=e.object,r={};for(var i in n.properties){var o=n.properties[i];r[i]=this.tempObjectCache.fetchIdWithCollapsedNode(o)}return{types:t.slice(),key:this.tempObjectCache.fetchIdWithCollapsedNode(n.key),index:this.tempObjectCache.fetchIdWithCollapsedNode(n.index),properties:r}},e}();t.Serializer=a;var s=function(){function e(e){this.collapsedNodeToTempObjectConverter=e,this.borderNodeIdGenerator=new o.IdGenerator,this.existIdsSet={},this.id2TempObjectMap={},this.borderNodes=[],this.setupPrimitiveTypes()}return e.prototype.setupPrimitiveTypes=function(){this.id2TempObjectMap[e.AnyTemplateObjectId]=e.AnyTempObject,this.borderNodes.push({types:[r.TypeEnum.Any],id:e.AnyTemplateObjectId});for(var t=0,n=[r.TypeEnum.Never,r.TypeEnum.Undefined,r.TypeEnum.Null,r.TypeEnum.String,r.TypeEnum.Number,r.TypeEnum.Boolean,r.TypeEnum.Function];t<n.length;t++){var i=n[t];this.fetchBorderNodeId([i])}},Object.defineProperty(e.prototype,"allIds",{get:function(){var e=[];for(var t in this.id2TempObjectMap)e.push(t);return e},enumerable:!0,configurable:!0}),e.prototype.tempObjectWithId=function(e){return this.id2TempObjectMap[e]},e.prototype.fetchIdWithCollapsedNode=function(e){return this.hasObjectType(e)?(this.convertCollapsedNodeToTempObject(e),e.id):this.fetchBorderNodeId(e.types)},e.prototype.convertCollapsedNodeToTempObject=function(e){if(this.collapsedNodeToTempObjectConverter){var t=e.id;this.existIdsSet[t]||(this.existIdsSet[t]=!0,this.id2TempObjectMap[t]=this.collapsedNodeToTempObjectConverter(e))}},e.prototype.hasObjectType=function(e){for(var t=0,n=e.types;t<n.length;t++){if(n[t]===r.TypeEnum.Object)return!0}return!1},e.prototype.fetchBorderNodeId=function(t){var n=this;(t=t.slice()).sort();var r=this.borderNodes.find(function(e){return n.isTypesEquals(t,e.types)});if(r)return r.id;var i="b"+this.borderNodeIdGenerator.generate();return this.borderNodes.push({types:t,id:i}),this.id2TempObjectMap[i]={types:t,key:e.AnyTemplateObjectId,index:e.AnyTemplateObjectId,properties:{}},i},e.prototype.isTypesEquals=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},e.AnyTemplateObjectId="any",e.AnyTempObject={types:[r.TypeEnum.Any],key:e.AnyTemplateObjectId,index:e.AnyTemplateObjectId,properties:{}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(61),i=n(62),o=n(118),a=function(){function e(e){this.serializerContext=e,this.templatesTable={}}return e.prototype.getTemplate=function(e){var t=this.templatesTable[e.id];return t||(t=new s(this,e),this.templatesTable[e.id]=t),t},e}();t.TemplateEnvironment=a;var s=function(){function e(e,t){this.templateEnvironment=e,this.templateType=t,this.handlesCache=[]}return e.prototype.getHandle=function(e){var t=this.getHandleByParams(e);if(!t){t={state:r.HandleState.Indeterminate},this.setHandleWithParams(t,e.slice());var n=this.createCollapsedNode(e);t.collapsedNode=n,t.state=n.hasCircular?r.HandleState.Circular:r.HandleState.Noncircular}return t},e.prototype.createCollapsedNode=function(e){var t=new i.ExpandedExpressionGenerator(this.templateEnvironment,this.templateType,e).getExpandedExpression();return new o.CollapsedExpressionGenerator(t).getCollapsedExpression()},e.prototype.getHandleByParams=function(t){for(var n=0,r=this.handlesCache;n<r.length;n++){var i=r[n];if(e.isParamsEquals(i.params,t))return i.handle}},e.prototype.setHandleWithParams=function(e,t){if(this.handlesCache.length>=2500)throw new Error("the template's definition is divergence");this.handlesCache.push({handle:e,params:t})},e.isParamsEquals=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){var r=e[n],i=t[n];if(r!==i){if(!("id"in r&&"id"in i))return!1;if(r.id!==i.id)return!1}}return!0},e}()},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(61),o=n(62),a=n(18),s=n(36),c=function(){function e(e){this.rootExpandedNode=e}return e.prototype.getCollapsedExpression=function(){return this.collapseNode(this.rootExpandedNode)},e.prototype.collapseNode=function(t){switch(t.clazz){case o.ExpandedNodeClass.Border:return{id:e.idGenerator.generate(),hasCircular:!1,types:[t.type.typeEnum]};case o.ExpandedNodeClass.Object:return this.collapseObjectExpandedNode(t);case o.ExpandedNodeClass.Handle:return this.collapseHandleExpandedNode(t);case o.ExpandedNodeClass.Compound:return this.collapseCompoundExpandedNode(t,t.type.typeEnum)}},e.prototype.collapseObjectExpandedNode=function(t){var n=t.key,r=t.index,i=t.properties,o=this.collapseNode(n),s=this.collapseNode(r),c=o.hasCircular||s.hasCircular,u={};for(var p in i){var l=i[p],h=this.collapseNode(l);u[p]=h,c=c||h.hasCircular}var f={key:o,index:s,properties:u};return this.isCollapsedObjectHasNeverPropertyTypes(f)?e.NeverCollapsedNode:{id:e.idGenerator.generate(),hasCircular:c,types:[a.TypeEnum.Object],object:f}},e.prototype.collapseHandleExpandedNode=function(t){var n=t.handle;switch(n.state){case i.HandleState.Noncircular:return n.collapsedNode;case i.HandleState.Indeterminate:case i.HandleState.Circular:return{id:e.idGenerator.generate(),hasCircular:!0,types:[a.TypeEnum.Object],handle:n}}},e.prototype.collapseCompoundExpandedNode=function(t,n){for(var r=[],o=0,s=t.children;o<s.length;o++){var c=s[o];r.push(this.collapseNode(c))}if(0===r.length)return e.NeverCollapsedNode;if(1===r.length)return r[0];for(var u=0,p=r;u<p.length;u++){var l=p[u];if(l.handle&&l.handle.state===i.HandleState.Indeterminate){var h=n===a.TypeEnum.And?"&":"|";throw new Error('can not operate an indeterminate expression with "'+h+'" sign')}}return n===a.TypeEnum.And?this.pruneAndMergeNodes(r):this.flattenNodes(r)},e.prototype.pruneAndMergeNodes=function(t){var n=this.collectCrossTypeEnumsWith(t);if(0===n.length||n.find(function(e){return e===a.TypeEnum.Never}))return e.NeverCollapsedNode;var r=this.collectAllObjectCollapsedNodesIn(t);return this.handleObjectCollapsedNodesWithTypeEnums(r,n,a.TypeEnum.And)},e.prototype.flattenNodes=function(t){var n=this.collectUnionTypeEnumsWith(t);if(0===(n=n.filter(function(e){return e!==a.TypeEnum.Never})).length)return e.NeverCollapsedNode;if(n.find(function(e){return e===a.TypeEnum.Any}))return{id:e.idGenerator.generate(),hasCircular:!1,types:[a.TypeEnum.Any]};var r=this.collectAllObjectCollapsedNodesIn(t);return this.handleObjectCollapsedNodesWithTypeEnums(r,n,a.TypeEnum.Or)},e.prototype.collectCrossTypeEnumsWith=function(e){for(var t={},n=0,r=e;n<r.length;n++)for(var i=0,o=r[n].types;i<o.length;i++){var a=o[i];void 0===(u=t[a])&&(u=0),t[a]=u+1}var s=[];for(var c in t){var u;(u=t[c])===e.length&&s.push(c)}return s},e.prototype.collectUnionTypeEnumsWith=function(e){for(var t={},n=0,r=e;n<r.length;n++)for(var i=0,o=r[n].types;i<o.length;i++){t[o[i]]=!0}var a=[];for(var s in t)t[s]&&a.push(s);return a},e.prototype.collectAllObjectCollapsedNodesIn=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];(i.object||i.handle)&&t.push(i)}return t},e.prototype.handleObjectCollapsedNodesWithTypeEnums=function(t,n,i){if(0===t.length)return{id:e.idGenerator.generate(),hasCircular:!1,types:n};if(1===t.length)return r({},t[0],{id:e.idGenerator.generate(),types:n});var o=[];if(t=t.filter(function(e){return!e.handle||(o.push(e),!1)}),o.length>=2){var s=i===a.TypeEnum.And?"&":"|";throw new Error("can not "+o.length+' circular expression with "'+s+'" sign')}t.push.apply(t,o);for(var c=t[0].object,u=1;u<t.length;++u){if(i===a.TypeEnum.And&&this.isCollapsedObjectHasNeverPropertyTypes(c))return e.NeverCollapsedNode;var p=t[u],l=this.getObjectFromObjectCollapsedNode(p);c=i===a.TypeEnum.And?this.factorizeWithAndOperation(c,l):this.factorizeWithOrOperation(c,l)}return this.isCollapsedObjectHasNeverPropertyTypes(c)?e.NeverCollapsedNode:{id:e.idGenerator.generate(),types:n,hasCircular:this.hasCircularIn(t),object:c}},e.prototype.getObjectFromObjectCollapsedNode=function(e){for(;;){if(e.object)return e.object;e=e.handle.collapsedNode}},e.prototype.hasCircularIn=function(e){for(var t=0,n=e;t<n.length;t++){if(n[t].hasCircular)return!0}return!1},e.prototype.factorizeWithAndOperation=function(e,t){var n=[],r=[],i=[];for(var o in e.properties)o in t.properties?n.push(o):r.push(o);for(var o in t.properties)o in e.properties||i.push(o);for(var a={},s=0,c=n;s<c.length;s++){o=c[s];var u=e.properties[o],p=t.properties[o];a[o]=this.pruneAndMergeNodes([u,p])}for(var l=0,h=r;l<h.length;l++){a[o=h[l]]=e.properties[o]}for(var f=0,d=i;f<d.length;f++){a[o=d[f]]=t.properties[o]}return{key:this.pruneAndMergeKeyOrIndexNodes(e.key,t.key),index:this.pruneAndMergeKeyOrIndexNodes(e.index,t.index),properties:a}},e.prototype.factorizeWithOrOperation=function(e,t){var n=[];for(var r in e.properties)r in t.properties&&n.push(r);for(var i={},o=0,a=n;o<a.length;o++){r=a[o];var s=e.properties[r],c=t.properties[r];i[r]=this.flattenNodes([s,c])}return{key:this.flattenNodesKeyOrIndexNodes(e.key,t.key),index:this.flattenNodesKeyOrIndexNodes(e.index,t.index),properties:i}},e.prototype.pruneAndMergeKeyOrIndexNodes=function(e,t){return this.isCollapsedNodeTypeEqual(e,a.TypeEnum.Undefined)?t:this.isCollapsedNodeTypeEqual(t,a.TypeEnum.Undefined)?e:this.pruneAndMergeNodes([e,t])},e.prototype.flattenNodesKeyOrIndexNodes=function(e,t){return this.isCollapsedNodeTypeEqual(e,a.TypeEnum.Undefined)?t:this.isCollapsedNodeTypeEqual(t,a.TypeEnum.Undefined)?e:this.flattenNodes([e,t])},e.prototype.isCollapsedObjectHasNeverPropertyTypes=function(e){if(this.isCollapsedNodeTypeEqual(e.key,a.TypeEnum.Never))return!0;if(this.isCollapsedNodeTypeEqual(e.index,a.TypeEnum.Never))return!0;for(var t in e.properties)if(this.isCollapsedNodeTypeEqual(e.properties[t],a.TypeEnum.Never))return!0;return!1},e.prototype.isCollapsedNodeTypeEqual=function(e,t){return 1===e.types.length&&e.types[0]===t},e.idGenerator=new s.IdGenerator,e.NeverCollapsedNode={id:e.idGenerator.generate(),hasCircular:!1,types:[a.TypeEnum.Never]},e}();t.CollapsedExpressionGenerator=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(120);t.Initializer=r.Initializer;var i=n(63);t.Library=i.Library;var o=n(28);t.standardizeSymbolString=o.standardizeSymbolString},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(121),o=n(63),a=n(124),s=function(){function e(e,t,n){var s=this;this.version=e,this.akkoObjectBaseClass=t,this.librariesStack=[],this.registerLibrary=function(){s.librariesStack.push(new i.LibraryContext(s,s.akkoObjectBaseClass,s.coreFunctions))},this.isAkkoObject=function(e){return"object"==typeof e&&e instanceof s.akkoObjectBaseClass},this.getClassReflection=function(e){if("function"==typeof e){var t=e[a.ReflectionPropertyName];if("object"==typeof t&&t instanceof a.ClassReflectionImplement)return t}else if(s.isAkkoObject(e))return s.getClassReflection(e.constructor)},this.context=function(e,t){if(s.version!==t)throw new Error("can not support version "+t+" of module (only support "+s.version+")");var n=s.librariesStack[s.librariesStack.length-1];if(!n)throw new Error("can't find context. you can only import AkkoLibrary's index.ts outside");return n.moduleContext(e)},this.createLibrary=function(e){if("function"!=typeof e)throw new Error("akko library index.ts must export default class, instead of "+typeof e);if(!s.isAkkoObjectBaseClass(e))throw new Error("akko library index.ts must export default class, the class must extends AkkoClass");var t=s.librariesStack.pop();if(!t)throw new Error("can't find context. you can only import AkkoLibrary's index.ts outside");return new o.Library(e,a.windUp(t))},this.coreFunctions=Object.freeze(r({},n))}return e.prototype.isAkkoObjectBaseClass=function(e){for(var t=e.prototype;t;){if(t===this.akkoObjectBaseClass.prototype)return!0;t=Object.getPrototypeOf(t)}return!1},e}();t.Initializer=s},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(122),o=n(28),a=n(18),s=Object.freeze({TypeEnum:a.TypeEnum,getSingletonType:a.getSingletonType,getFunctionType:a.getFunctionType,getObjectType:a.getObjectType,getCompoundType:a.getCompoundType,getGenericType:a.getGenericType,getGeneratorType:a.getGeneratorType}),c=function(){function e(e,t,n){this.initializer=e,this.akkoObjectBaseClass=t,this.coreFunctions=n,this.moduleContexts={}}return e.prototype.moduleContext=function(e){var t=this.moduleContexts[e];return t||(t=new i.ModuleContext(this,e,this.akkoObjectBaseClass),this.moduleContexts[e]=t),r({},s,this.coreFunctions,{createLibrary:this.initializer.createLibrary,wrapSuperClass:t.wrapSuperClass,baseClass:t.baseClass,defineClass:t.defineClass,defineType:t.defineType,defineExport:t.defineExport,defineExportDefault:t.defineExportDefault,exportExternal:t.exportExternal,getReferenceType:t.getReferenceType})},e.prototype.findFinalTypeAndSymbol=function(e){var t=this.findContextWithModuleSignature(e.moduleSignature);if(o.isPrivateSymbol(e))return{symbol:e,type:t.typeWithId(e.id)};if(o.isPublicSymbol(e))return t.findFinalTypeAndSymbol(e.typeSignature);throw new Error("unrecognized scope "+e.scope)},e.prototype.findContextWithModuleSignature=function(e){var t=this.moduleContexts[e];if(!t){var n=e+"/index";t=this.moduleContexts[n]}if(!t)throw new Error('not found module "'+e+'"');return t},e.prototype.forEachClassDefinitionParams=function(e){var t=function(t){var r=n.moduleContexts[t];r.forEachClassDefinitionParams(function(t){e(r,t)})},n=this;for(var r in this.moduleContexts)t(r)},e}();t.LibraryContext=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),i=n(28),o=function(){function e(e,t,n){var o=this;this.libraryContext=e,this.moduleSignature=t,this.akkoObjectBaseClass=n,this.typesTable={},this.classDefinitionParamsBuffer=[],this.exportSignaturesTable={},this.exportExternalTable={},this.exportOtherModules=[],this.defineClass=function(e,t,n){o.classDefinitionParamsBuffer.push({id:e,constructor:t,parameter:n})},this.defineType=function(e,t){o.typesTable[e]=t},this.defineExport=function(e,t){o.exportSignaturesTable[t]=e},this.defineExportDefault=function(e){o.exportSignaturesTable.default=e},this.getReferenceType=function(e){var t=i.standardizeSymbolString(o.moduleSignature,e);return r.getReferenceType(t)},this.exportExternal=function(e,t){var n=i.covertRelativeModuleSignatureToAbsolution(o.moduleSignature,e);if(t)for(var r in t){var a=t[r],s=i.convertStringToSymbol(n+":"+a);if(o.exportExternalTable[r])throw new Error("duplicate export type "+r);o.exportExternalTable[r]=s}else o.exportOtherModules.push(n)},this.wrapSuperClass=function(e){if(e===Object)return o.akkoObjectBaseClass;if("function"!=typeof e)return e;if(!o.isAkkoObjectClass(e))throw new Error("can not extends external class "+e.name);return e},this.baseClass=function(){return o.akkoObjectBaseClass}}return e.prototype.forEachClassDefinitionParams=function(e){this.classDefinitionParamsBuffer.forEach(e)},e.prototype.findFinalTypeAndSymbol=function(e){var t=this.findFinalTypeAndSymbolOrUndefined(e);if(!t)throw new Error("type "+e+" is not export in "+this.moduleSignature);return t},e.prototype.findFinalTypeAndSymbolOrUndefined=function(e){var t=this.exportSignaturesTable[e];if(t)return{type:this.typesTable[t],symbol:i.convertStringToSymbol(this.moduleSignature+":"+e)};var n=this.exportExternalTable[e];if(n)return this.libraryContext.findFinalTypeAndSymbol(n);for(var r=0,o=this.exportOtherModules;r<o.length;r++){var a=o[r],s=this.libraryContext.findContextWithModuleSignature(a).findFinalTypeAndSymbolOrUndefined(e);if(s)return s}},e.prototype.typeWithId=function(e){if(!(e in this.typesTable))throw new Error('id "'+e+'" not found');return this.typesTable[e]},e.prototype.isAkkoObjectClass=function(e){for(var t=e.prototype;t;){if(t!==this.akkoObjectBaseClass.prototype)return!0;t=Object.getPrototypeOf(t)}return!1},e}();t.ModuleContext=o},function(e,t,n){"use strict";function r(e){for(var t=[],n=0,r=0,i=e;r<i.length;r++){var o=i[r];".."===o?n++:t.push(o)}return{doubleDotsCount:n,pureCells:t}}function i(e){for(var t=[],n=0;n<e;++n)t.push("..");return t}Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[];return e.map(function(e){return function(e){var t=e.split("/");return t.length>0&&("."===t[0]&&t.shift(),""===t[t.length-1]&&t.pop()),t}(e)}).forEach(function(e){n=0!==n.length&&function(e){return e.length>0&&""!==e[0]}(e)?function(e,t){var n=r(e),o=r(t);if(n.pureCells.length>o.doubleDotsCount){for(var a=0;a<o.doubleDotsCount;++a)n.pureCells.pop();return i(n.doubleDotsCount).concat(n.pureCells,o.pureCells)}var s=o.doubleDotsCount-n.pureCells.length;return i(n.doubleDotsCount+s).concat(o.pureCells)}(n,e):e}),n.join("/")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(60),i=n(64),o=n(28);t.ReflectionPropertyName="Reflection";var a=function(){return function(e){this.id=e.id,this.name=e.name,this.superClass=e.superClass,this.clazz=e.clazz,this.serializerObject=e.serializerObject,this.properties=e.properties,this.methods=e.methods,this.methodNames=e.methodNames}}();function s(e,t){var n=e.superClassSymbol;if(n){var r=-1;if(o.isPublicSymbol(n)){var i=n.moduleSignature,a=n.typeSignature;r=t.findIndex(function(e){return e.moduleSignature===i&&e.name===a})}else o.isPrivateSymbol(n)&&(r=t.findIndex(function(t){return t.moduleSignature===e.moduleSignature&&t.typeId===n.id}));if(-1===r)throw new Error("can't find superClass with signature \""+o.convertSymbolToString(n)+'"');return r}}function c(e,t,n,r){var i=[];for(var o in e.properties)i.push(u(e,o,n));if(void 0!==r){var a=t[r];for(var s in a.properties)s in e.properties||i.push(u(a,s,n))}i.sort(function(e,t){return g(e.name,t.name)});for(var c={},p=0,l=i;p<l.length;p++){var h=l[p];c[h.name]=h}return c}function u(e,t,n){var r=e.properties[t],i=r.isPublic,o=r.isTransient,a=r.typeIndex,s=r.decorators;return Object.freeze({isPublic:i,isTransient:o,name:t,decorators:s,serializerObject:n[a]})}function p(e,t,n,r){var i=[];for(var o in e.methods)i.push(l(e,o,n));if(void 0!==r){var a=t[r];for(var s in a.methods)s in e.methods||i.push(l(a,s,n))}i.sort(function(e,t){return g(e.name,t.name)});for(var c={},u=0,p=i;u<p.length;u++){var h=p[u];c[h.name]=h}return c}function l(e,t,n){var r=e.methods[t],i=r.isPublic,o=r.parameterIndexes,a=r.resultIndex,s=r.decorators,c=o.map(function(e){return n[e]}),u=n[a],p=Object.freeze({parameters:Object.freeze(c),result:u});return Object.freeze({isPublic:i,name:t,decorators:s,serializerObject:p,belongsClass:e.constructor})}function h(e,t){return function(n){return n instanceof t||(console.warn("found decorator of "+e+" that isn't supported by akko"),!1)}}function f(e,t){var n=e.length;return e.push(t),n}function d(e,t){return g(e.moduleSignature+":"+e.name,t.moduleSignature+":"+t.name)}function y(e,n){if(void 0!==Object.getOwnPropertyDescriptor(e,t.ReflectionPropertyName))throw new Error("class "+n.name+' has defined static property "'+t.ReflectionPropertyName);try{Object.defineProperty(e,t.ReflectionPropertyName,{value:n,configurable:!1,enumerable:!1,writable:!1})}catch(e){throw new Error("fail to bind Reflection for class "+n.name+": "+e.message)}}function g(e,t){return e===t?0:e>t?1:-1}t.ClassReflectionImplement=a,t.windUp=function(e){for(var t=function(e){var t=[],n=[];return e.forEachClassDefinitionParams(function(r,a){var s=function(e,t,n){if(n){var r=o.convertStringToSymbol(o.standardizeSymbolString(t,n));return e.findFinalTypeAndSymbol(r).symbol}}(e,r.moduleSignature,a.parameter.superClass),c=function(e,t){for(var n=t.parameter,r={},o=0,a=n.properties;o<a.length;o++){var s=a[o],c=s.name,u=s.isPublic,p=s.isAccessor,l=s.type,d=s.decorators;p||(r[c]={isPublic:u,isTransient:d.some(function(e){return e===i.transient}),typeIndex:f(e,l),decorators:d.filter(h(n.name+"."+c,i.AkkoPropertyDecorator))})}return r}(n,a),u=function(e,t){for(var n=t.parameter,r={},o=0,a=n.methods;o<a.length;o++){var s=a[o],c=s.name,u=s.isPublic,p=s.parameterTypes,l=s.returnType,d=s.decorators;r[c]={isPublic:u,parameterIndexes:p.map(function(t){return f(e,t)}),resultIndex:f(e,l),decorators:d.filter(h(n.name+"."+c,i.AkkoMethodDecorator))}}return r}(n,a);t.push({superClassSymbol:s,name:a.parameter.name,moduleSignature:r.moduleSignature,constructor:a.constructor,typeId:a.id,objectIndex:f(n,r.typeWithId(a.id)),properties:c,methods:u})}),{mappers:t,types:n}}(e),n=t.mappers,u=t.types,l=new r.Serializer(u,function(t){var n=o.convertStringToSymbol(t.symbol);return e.findFinalTypeAndSymbol(n).type}).getSerializerObjectsAndCleanBuffer(),g=0,m={},b=0,v=l;b<v.length;b++){var T=v[b];m[T.id]=T}for(var S={},x=n.sort(d),E=[],w=0;w<x.length;++w){var P=x[w],k=s(P,x);E.push(k);var C=c(P,x,l,k),O=p(P,x,l,k);S[g]={id:g,name:P.name,clazz:P.constructor,serializerObject:l[P.objectIndex],properties:Object.freeze(C),methods:Object.freeze(O),methodNames:Object.freeze(Object.keys(O))},g++}for(var _=0;_<E.length;++_)void 0!==(k=E[_])&&(S[_].superClass=S[k].clazz);return function(e){for(var t in e){var n=new a(e[t]);y(n.clazz,n),e[t]=n}}(S),{classReflectionsMap:S,serializerObjectsMap:m}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(65);t.transient=new r.AkkoPropertyDecorator},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=n(72),a=n(156),s=function(){function e(e,t){var n=!!t.enableAnimationFrame,r=(new a.ResourceManagerFactory).create({convertIdToUrl:t.convertIdToUrl});if(this.library=e,this.imageFactory=new o.ImageFactory(this.library,r,t.jsxFactory,!0),this.playerFactory=new o.ReconstructorFactory(this.library,r,t.jsxFactory,n,t.persistenceServerOrigin,t.assetsPrefix),t.clientFactory){var i={enableAnimationFrame:n},s=new o.ConnectionFactory(t.clientFactory);this.magixFactory=new o.MagixFactory(this.library,r,t.jsxFactory,s,t.netStateAdapter,i)}}return e.prototype.createImageWithSnapshot=function(e){return this.imageFactory.createWithSnapshot(e)},e.prototype.createImageWithParameters=function(e){return this.imageFactory.createWithParameters(e)},e.prototype.createEventFrameBuffer=function(e){var t=r({},e,{type:i.ActionFrameType.Event,beginGenerationId:0,frameId:e.frameId,originalFrameId:e.frameId,authorId:e.authorId,timestamp:Date.now()});return i.serializeActionFrame(this.library,t)},e.prototype.createMagix=function(e){if(void 0===e&&(e={}),!this.magixFactory)throw new Error("can't find clientFactory");return this.magixFactory.createMagix(e)},e.prototype.createReconstructor=function(e,t){return void 0===t&&(t={}),this.playerFactory.createReconstructor(e,t)},e}();t.AkkoFactory=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15);function i(e,t){var n=t.banList,r=t.proxy,i={},o=e.name||e.constructor.name+".prototype";if(r)for(var a in r)i[a]=r[a];if(n)for(var s=function(e){i[e]=function(){throw new Error(o+"."+e+" is ban in Magix")}},c=0,u=n;c<u.length;c++){s(a=u[c])}return Object.freeze(i)}t.ObjectInterceptProxy=i(Object,{banList:["getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","create","defineProperty","defineProperties"],proxy:{assign:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.getContext().__identifierGenerator.bind(Object.assign.apply(this,e))}}}),t.ArrayPrototypeInterceptProxy=i(Array.prototype,{proxy:{concat:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.getContext().__identifierGenerator.bind(Array.prototype.concat.apply(this,e))},reverse:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.getContext().__identifierGenerator.bind(Array.prototype.reverse.apply(this,e))},splice:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.getContext().__identifierGenerator.bind(Array.prototype.splice.apply(this,e))},map:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.getContext().__identifierGenerator.bind(Array.prototype.map.apply(this,e))},filter:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.getContext().__identifierGenerator.bind(Array.prototype.filter.apply(this,e))},sort:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.getContext().__identifierGenerator.bind(Array.prototype.sort.apply(this,e))}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),i=n(67),o=n(69),a=n(68),s=new r.Initializer(i.AkkoVersion,a.AkkoObject,{creator:o.creator,getter:o.getter,setter:o.setter,caller:o.caller,remover:o.remover,prefix:o.prefix,postfix:o.postfix});t.__context=s.context,t.__register=s.registerLibrary,t.isAkkoObject=s.isAkkoObject,t.getClassReflection=s.getClassReflection,o.setClassReflectionGetter(t.getClassReflection)},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(130),o=n(71),a=n(132),s=n(13),c=n(133),u=n(40),p=n(38);function l(e,t){e.writeInteger32(t.frameId),e.writeInteger32(t.originalFrameId),e.writeInteger53(t.timestamp),e.writeUnsignedInteger16(t.authorId)}function h(e){return{frameId:e.readInteger32(),originalFrameId:e.readInteger32(),timestamp:e.readInteger53(),authorId:e.readUnsignedInteger16()}}t.serializeSnapshotFrame=function(e,t,n){var r=new i.Writer;l(r,t),function(e,t){var n=t.allObserverIds,r=t.nextUserId;e.writeInteger32(n.length),e.writeInteger32(r);for(var i=0,o=n;i<o.length;i++){var a=o[i],s=t.identifierGeneratorWithObserverId(a).latestGenerationId;e.writeUnsignedInteger32(a),e.writeUnsignedInteger32(s)}}(r,t.context);var o=s.getClassReflection(e.rootClass);return a.serializeAkkoObject(r,o,t.object,n),r.toBuffer()},t.deserializeSnapshotFrame=function(e,t){var n=new o.Reader(new DataView(t)),i=h(n),a=function(e){for(var t=e.readInteger32(),n=e.readInteger32(),r=u.IdentifierContext.create(n),i=0;i<t;++i){var o=e.readUnsignedInteger32(),a=e.readUnsignedInteger32();r.putObserver(o,a+1)}return r}(n),p=s.getClassReflection(e.rootClass),l=c.deserializeAkkoObject(n,e,p);return r({},i,{context:a,object:l})},t.serializeActionFrame=function(e,t,n){var r=new i.Writer;if(l(r,t),r.writeByte(t.type),r.writeUnsignedInteger32(t.beginGenerationId),p.isInvokerFrame(t)){r.writeInteger32(t.methodId);var o=s.getClassReflection(e.rootClass),c=o.methodNames,u=o.methods[c[t.methodId]].serializerObject;a.serializeParameters(r,u.parameters,t.parameters,n)}else if(p.isEventFrame(t)){var h=void 0;if(void 0===t.payload)h="undefined";else try{h=JSON.stringify(t.payload)}catch(e){throw new Error("event payload is not JSON: "+e.message)}r.writeByte(t.scope),r.writeString(t.event),r.writeString(h)}return r.toBuffer()},t.deserializeActionFrame=function(e,t){var n=new o.Reader(new DataView(t)),i=h(n),a=n.readByte(),u=n.readUnsignedInteger32();if(a===p.ActionFrameType.Invoker){var l=n.readInteger32(),f=s.getClassReflection(e.rootClass),d=f.methods[f.methodNames[l]].serializerObject,y=c.deserializeParameters(n,e,d.parameters);return r({},i,{type:a,beginGenerationId:u,methodId:l,parameters:y})}if(a===p.ActionFrameType.Event){var g=n.readByte(),m=n.readString(),b=n.readString(),v=void 0;if("undefined"===b)v=void 0;else try{v=JSON.parse(b)}catch(e){throw new Error("event payload parse failed: "+e.message)}return r({},i,{type:a,beginGenerationId:u,scope:g,event:m,payload:v})}if(a===p.ActionFrameType.Ack)return r({},i,{type:a,beginGenerationId:u});throw new Error("unrecognized ActionFrame's type "+a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(70),i=n(7),o=n(30),a=n(131),s=function(){function e(){this.buffer=new a.ExtendableBuffer}return Object.defineProperty(e.prototype,"length",{get:function(){return this.buffer.length},enumerable:!0,configurable:!0}),e.prototype.writeByte=function(e){this.buffer.pushUInt8(e)},e.prototype.writeUnsignedInteger16=function(e){this.buffer.pushUint16(e)},e.prototype.writeInteger32=function(e){this.buffer.pushInt32(e)},e.prototype.writeUnsignedInteger32=function(e){this.buffer.pushUint32(e)},e.prototype.writeInteger53=function(e){var t=0|e,n=(e-t)/o.Pow32;this.buffer.pushInt32(t),this.buffer.pushInt32(n)},e.prototype.writeFloat64=function(e){this.buffer.pushFloat64(e)},e.prototype.writeString=function(e){var t=r.length(e);this.writeInteger32(t),r.write(e,this.buffer)},e.prototype.writeIdentifier=function(e){var t=i.observerIdWithIdentifier(e),n=i.generationIdWithIdentifier(e);this.writeUnsignedInteger16(t),this.writeUnsignedInteger32(n)},e.prototype.toBuffer=function(){return this.buffer.toBuffer()},e}();t.Writer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._length=0,this.bufferChunks=[],this.appendNewChunk()}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.toBuffer=function(){for(var e=new ArrayBuffer(this.length),t=new DataView(e),n=0,r=0,i=this.bufferChunks;r<i.length;r++)for(var o=i[r],a=o.length,s=o.view,c=0;c<a;++c)t.setUint8(n,s.getUint8(c)),n++;return e},e.prototype.pushUInt8=function(e){this.currentChunk.length+1>256&&this.appendNewChunk(),this.currentChunk.view.setUint8(this.currentChunk.length,e),this.currentChunk.length+=1,this._length+=1},e.prototype.pushUint16=function(e){this.currentChunk.length+2>256&&this.appendNewChunk(),this.currentChunk.view.setUint16(this.currentChunk.length,e,!0),this.currentChunk.length+=2,this._length+=2},e.prototype.pushInt32=function(e){this.currentChunk.length+4>256&&this.appendNewChunk(),this.currentChunk.view.setInt32(this.currentChunk.length,e,!0),this.currentChunk.length+=4,this._length+=4},e.prototype.pushUint32=function(e){this.currentChunk.length+4>256&&this.appendNewChunk(),this.currentChunk.view.setUint32(this.currentChunk.length,e,!0),this.currentChunk.length+=4,this._length+=4},e.prototype.pushFloat64=function(e){this.currentChunk.length+8>256&&this.appendNewChunk(),this.currentChunk.view.setFloat64(this.currentChunk.length,e,!0),this.currentChunk.length+=8,this._length+=8},e.prototype.appendNewChunk=function(){var e=new ArrayBuffer(256),t=new DataView(e);this.currentChunk={buffer:e,view:t,length:0},this.bufferChunks.push(this.currentChunk)},e}();t.ExtendableBuffer=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(39),i=n(29),o=n(13);t.serializeAkkoObject=function(e,t,n,r){new a(e,r).serializeAkkoObject(t,n)},t.serializeParameters=function(e,t,n,r){new a(e,r).serializeParameters(t,n)};var a=function(){function e(e,t){this.writer=e,this.identifierGenerator=t,this.touchedObjectTasksSet={},this.tasksQueue=[]}return e.prototype.serializeAkkoObject=function(e,t){var n=r.findIdentifierWith(t),i=this.checkObjectType(t);this.addTaskIfNeed(n,t,i,e.serializerObject),this.handleAndCleanAllTasks()},e.prototype.serializeParameters=function(e,t){this.writer.writeInteger32(t.length);for(var n=0;n<t.length;++n){var i=e[n];i||(i=r.NeverSerializerObject);var o=t[n];this.serializeValue(i,o)}this.handleAndCleanAllTasks()},e.prototype.handleAndCleanAllTasks=function(){for(;this.tasksQueue.length>0;){var e=this.tasksQueue.shift(),t=e.type,n=e.identifier,a=e.object,s=e.serializerObject;switch(this.writer.writeIdentifier(n),this.writer.writeByte(t),t){case r.ObjectType.Array:this.handleArrayTask(s,a);break;case r.ObjectType.FlatObject:this.handleFlatObjectTask(s,a);break;case r.ObjectType.AkkoObject:var c=a,u=o.getClassReflection(c);this.handleAkkoObjectTask(u,c)}}this.writer.writeIdentifier(i.NullIdentifier)},e.prototype.handleArrayTask=function(e,t){var n=e.index;this.writer.writeInteger32(t.length);for(var r=0,i=t;r<i.length;r++){var o=i[r];this.serializeValue(n,o)}},e.prototype.handleFlatObjectTask=function(e,t){for(var n in e.properties){var i=e.properties[n];n in t?this.serializeValue(i,t[n]):this.writer.writeByte(r.AkkoPrimitiveType.Never)}this.serializeFreedomZone(e,t)},e.prototype.handleAkkoObjectTask=function(e,t){for(var n in this.writer.writeInteger32(o.getClassReflection(t).id),e.properties){var i=e.properties[n],a=i.isTransient,s=i.serializerObject;a||(n in t?this.serializeValue(s,t[n]):this.writer.writeByte(r.AkkoPrimitiveType.Never))}},e.prototype.serializeFreedomZone=function(e,t){var n=[];for(var r in t)r in e.properties||n.push(r);this.writer.writeInteger32(n.length);for(var i=0,o=n;i<o.length;i++){r=o[i];this.writer.writeString(r),this.serializeValue(e.key,t[r])}},e.prototype.serializeValue=function(e,t){"object"!==typeof t?this.serializeNotObjectValue(t):null===t?this.writer.writeByte(r.AkkoPrimitiveType.Null):this.serializeObjectValue(e,t)},e.prototype.serializeNotObjectValue=function(e){var t=typeof e;if("undefined"===t)this.writer.writeByte(r.AkkoPrimitiveType.Undefined);else if("string"===t)this.writer.writeByte(r.AkkoPrimitiveType.String),this.writer.writeString(e);else if("number"===t)Number.isSafeInteger(e)?(this.writer.writeByte(r.AkkoPrimitiveType.Integer),this.writer.writeInteger53(e)):(this.writer.writeByte(r.AkkoPrimitiveType.Float),this.writer.writeFloat64(e));else{if("boolean"!==t)throw new Error("not support "+t+" now");e?this.writer.writeByte(r.AkkoPrimitiveType.True):this.writer.writeByte(r.AkkoPrimitiveType.False)}},e.prototype.serializeObjectValue=function(e,t){this.identifierGenerator&&this.identifierGenerator.bind(t);var n=r.findIdentifierWith(t),i=this.checkObjectType(t);switch(i){case r.ObjectType.Array:this.writer.writeByte(r.AkkoPrimitiveType.Array);break;case r.ObjectType.FlatObject:this.writer.writeByte(r.AkkoPrimitiveType.FlatObject);break;case r.ObjectType.AkkoObject:this.writer.writeByte(r.AkkoPrimitiveType.AkkoObject)}this.writer.writeIdentifier(n),this.addTaskIfNeed(n,t,i,e)},e.prototype.addTaskIfNeed=function(e,t,n,r){var o=i.stringWithIdentifier(e);this.touchedObjectTasksSet[o]||(this.touchedObjectTasksSet[o]=!0,this.tasksQueue.push({type:n,identifier:e,object:t,serializerObject:r}))},e.prototype.checkObjectType=function(e){if(e.constructor===Array)return r.ObjectType.Array;if(e.constructor===Object)return r.ObjectType.FlatObject;if(o.isAkkoObject(e))return r.ObjectType.AkkoObject;throw new Error("type of object "+e.constructor.name+" is not supported")},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),i=n(39),o=n(37);t.deserializeAkkoObject=function(e,t,n){return new a(e,t).deserializeAkkoObject(n)},t.deserializeParameters=function(e,t,n){return new a(e,t).deserializeParameters(n)};var a=function(){function e(e,t){this.reader=e,this.library=t,this.speculateSerializerObjects={},this.akkoObjectConstructorRouters=[],this.referenceObjectIdsRouterMap={}}return e.prototype.deserializeAkkoObject=function(e){var t=this.reader.readIdentifier(),n=r.stringWithIdentifier(t);this.speculateSerializerObjects[n]=e.serializerObject;var i=this.handleObject(t);return this.deserializeRemainObjectsZone(i),i},e.prototype.deserializeParameters=function(e){for(var t=this.reader.readInteger32(),n=[],o=[],a=0;a<t;++a){var s=e[a];s||(s=i.NeverSerializerObject);var c=this.deserializeValue(s,n,a);if(c===i.AkkoPrimitiveType.Array||c===i.AkkoPrimitiveType.FlatObject||c===i.AkkoPrimitiveType.AkkoObject){var u=r.stringWithIdentifier(n[a]);this.speculateSerializerObjects[u]=s,o.push(u)}else o.push(void 0)}var p=this.deserializeRemainObjectsZone();for(a=0;a<o.length;++a){(u=o[a])&&(n[a]=p[u])}return n},e.prototype.deserializeRemainObjectsZone=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},o=0,a=e;o<a.length;o++){var s=a[o],c=i.findIdentifierWith(s);n[r.stringWithIdentifier(c)]=s}for(var u=this.reader.readIdentifier();!r.isNullIdentifier(u);){var p=this.handleObject(u);n[r.stringWithIdentifier(u)]=p,u=this.reader.readIdentifier()}this.replaceIdWithObjects(n);for(var l=0,h=this.akkoObjectConstructorRouters;l<h.length;l++){var f=h[l],d=(p=f.object,f.constructor);p.constructor=d,Object.setPrototypeOf(p,d.prototype)}return n},e.prototype.handleObject=function(e){switch(this.reader.readByte()){case i.ObjectType.Array:return this.handleArray(e);case i.ObjectType.FlatObject:return this.handleFlatObject(e);case i.ObjectType.AkkoObject:return this.handleAkkoObject(e)}},e.prototype.handleArray=function(e){var t=r.stringWithIdentifier(e),n=this.speculateSerializerObjects[t],i=this.reader.readInteger32(),a=[];o.bindIdentifier(a,e);for(var s=0;s<i;++s)this.deserializeValue(n.index,a,s);return a},e.prototype.handleFlatObject=function(e){var t=r.stringWithIdentifier(e),n=this.speculateSerializerObjects[t],i={};for(var a in o.bindIdentifier(i,e),n.properties){var s=n.properties[a];this.deserializeValue(s,i,a)}for(var c=this.reader.readInteger32(),u=0;u<c;++u){a=this.reader.readString();this.deserializeValue(n.key,i,a)}return i},e.prototype.handleAkkoObject=function(e){var t=this.reader.readInteger32(),n=this.library.classReflectionWithId(t),r={};for(var i in o.bindIdentifier(r,e),n.properties){var a=n.properties[i],s=a.isTransient,c=a.serializerObject;s||this.deserializeValue(c,r,i)}return this.akkoObjectConstructorRouters.push({object:r,constructor:n.clazz}),r},e.prototype.deserializeValue=function(e,t,n){var r=this.reader.readByte();switch(r){case i.AkkoPrimitiveType.Undefined:t[n]=void 0;break;case i.AkkoPrimitiveType.Null:t[n]=null;break;case i.AkkoPrimitiveType.String:t[n]=this.reader.readString();break;case i.AkkoPrimitiveType.Integer:t[n]=this.reader.readInteger53();break;case i.AkkoPrimitiveType.Float:t[n]=this.reader.readFloat64();break;case i.AkkoPrimitiveType.Function:break;case i.AkkoPrimitiveType.True:t[n]=!0;break;case i.AkkoPrimitiveType.False:t[n]=!1;break;case i.AkkoPrimitiveType.FlatObject:case i.AkkoPrimitiveType.AkkoObject:case i.AkkoPrimitiveType.Array:this.deserializeObjectLike(e,t,n)}return r},e.prototype.deserializeObjectLike=function(e,t,n){var i=this.reader.readIdentifier(),o=r.stringWithIdentifier(i);this.speculateSerializerObjects[o]=e;var a=this.referenceObjectIdsRouterMap[o];a||(a=[],this.referenceObjectIdsRouterMap[o]=a),t[n]=i,a.push({target:t,key:n})},e.prototype.replaceIdWithObjects=function(e){for(var t in this.referenceObjectIdsRouterMap){var n=e[t];if(!n)throw new Error('find dangling references Identifier "'+t+'"');for(var r=0,i=this.referenceObjectIdsRouterMap[t];r<i.length;r++){var o=i[r];o.target[o.key]=n}}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(38),i=n(71),o=n(30),a=18,s=a+4+1;t.translateToAckFrame=function(e){for(var t=new DataView(e),n=new ArrayBuffer(s),i=new DataView(n),o=0;o<s;++o)i.setUint8(o,t.getUint8(o));return i.setUint8(a,r.ActionFrameType.Ack),n};var c=function(){function e(e){if(e.byteLength<a)throw new Error("ArrayBuffer is to short");this.frameBuffer=e,this.dataView=new DataView(e)}return Object.defineProperty(e.prototype,"frameId",{get:function(){return this.dataView.getInt32(0,!0)},set:function(e){this.dataView.setInt32(0,e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalFrameId",{get:function(){return this.dataView.getInt32(4,!0)},set:function(e){this.dataView.setInt32(4,e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){var e=this.dataView.getInt32(8,!0);return this.dataView.getInt32(12,!0)*o.Pow32+e},set:function(e){var t=0|e,n=(e-t)/o.Pow32;this.dataView.setInt32(8,t,!0),this.dataView.setInt32(12,n,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authorId",{get:function(){return this.dataView.getUint16(16,!0)},set:function(e){this.dataView.setUint16(16,e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.dataView.getUint8(a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beginGenerationId",{get:function(){return this.dataView.getUint32(a+1,!0)},set:function(e){this.dataView.setUint32(a+1,e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventScope",{get:function(){return this.dataView.getInt8(s)},enumerable:!0,configurable:!0}),e.prototype.fetchEventContent=function(){var e=new i.Reader(this.dataView);e.skipBytes(a);var t=e.readByte();if(e.skipBytes(4),t===r.ActionFrameType.Event){var n=e.readByte();return{event:e.readString(),scope:n}}},e}();t.FramePicker=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),i=n(136),o=n(74),a=n(75),s=n(40),c=n(76),u=n(7),p=function(){function e(e,t,n,r){void 0===r&&(r=!1),this.library=e,this.resource=t,this.jsxFactory=n,this.checkFrameId=r}return e.prototype.createWithParameters=function(e,t){var n=this,i=s.IdentifierContext.create(),o=i.identifierGeneratorWithObserverId(s.AdminObserverId),c=Object.freeze({__identifierGenerator:o,__previousGenerationId:o.latestGenerationId,environment:r.Environment.Real,timestamp:Date.now(),authorId:t,observerId:t,resource:this.resource});e=a.filterParameters(e,{identifierGenerator:o});var u=r.runWithContext({willRejectSet:!1,foundModify:!1},c,this.jsxFactory,function(){return new((t=n.library.rootClass).bind.apply(t,[void 0].concat(e)));var t});return new l({object:u,library:this.library,jsxFactory:this.jsxFactory,checkFrameId:this.checkFrameId,observerId:t,identifierContext:i,frameId:0,timestamp:c.timestamp,resource:this.resource})},e.prototype.createWithSnapshot=function(e,t,n){var r=u.deserializeSnapshotFrame(this.library,t),i=new l({object:r.object,library:this.library,jsxFactory:this.jsxFactory,checkFrameId:this.checkFrameId,observerId:e,identifierContext:r.context,frameId:r.frameId,timestamp:r.timestamp,resource:this.resource});if(n)for(var o=0,a=n;o<a.length;o++){var s=a[o];try{i.appendActionFrame(s)}catch(e){}}return i},e}();t.StateFactory=p;var l=function(){function e(e){this.wantOriginalFrameIdMap={},this.library=e.library,this.jsxFactory=e.jsxFactory,this.checkFrameId=e.checkFrameId,this.objectInvoker=new i.ObjectInvoker(e.library,e.object),this.observerId=e.observerId,this.resource=e.resource,this.identifierContext=e.identifierContext,this._frameId=e.frameId,this._timestamp=e.timestamp}return Object.defineProperty(e.prototype,"allUserIds",{get:function(){return this.identifierContext.allObserverIds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameId",{get:function(){return this._frameId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextUserId",{get:function(){return this.identifierContext.nextUserId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this._timestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"observerLatestGenerationId",{get:function(){return this.identifierContext.identifierGeneratorWithObserverId(this.observerId).latestGenerationId},enumerable:!0,configurable:!0}),e.prototype.createOperator=function(e){var t=this;void 0===e&&(e={});var n=e.actionFrameCatcher,r=e.escapeObjectFilter,i=this.frameId+1,o=n&&function(e){var r=t.identifierContext.identifierGeneratorWithObserverId(e.authorId),i=u.serializeActionFrame(t.library,e,r);n(i)};return new c.StateOperator(this,this.jsxFactory,this.identifierContext,i,{invoke:function(e,n){return t.objectInvoker.invoke(e,n)},dispatch:function(e,n,r){return t.objectInvoker.dispatch(e,n,r)},addObserver:function(e){return t.identifierContext.putObserver(e,0)},removeObserver:function(e){return t.identifierContext.removeObserver(e)},catchActionFrame:o,escapeObjectFilter:r})},e.prototype.makeSureObserverGenerationIdAfter=function(e){this.identifierContext.identifierGeneratorWithObserverId(this.observerId).makeSureGenerationIdAfter(e)},e.prototype.appendActionFrame=function(e){var t=this,n=u.deserializeActionFrame(this.library,e);this.isSystemEvent(n,"Enter")&&this.identifierContext.putObserver(n.authorId,0),this.identifierContext.hasObserver(n.authorId)&&this.checkIsWantFrame(n);var i=this.identifierContext.identifierGeneratorWithObserverId(n.authorId);i.makeSureGenerationIdAfter(n.beginGenerationId);var o=Object.freeze({__identifierGenerator:i,__previousGenerationId:i.latestGenerationId,environment:r.Environment.Real,timestamp:n.timestamp,authorId:n.authorId,observerId:this.observerId,resource:this.resource});try{r.runWithContext({willRejectSet:!1,foundModify:!1},o,this.jsxFactory,function(){if(u.isInvokerFrame(n))t.objectInvoker.invoke(n.methodId,n.parameters);else if(u.isEventFrame(n)){var e=a.filterParameters([n.payload],{identifierGenerator:i})[0];t.objectInvoker.dispatch(n.event,e,n.scope)}})}finally{if(this._frameId=n.frameId,this._timestamp=n.timestamp,this.isSystemEvent(n,"Leave")&&(this.identifierContext.removeObserver(n.authorId),delete this.wantOriginalFrameIdMap[n.authorId]),this.eventFrameReceiver&&u.isEventFrame(n))try{this.eventFrameReceiver(n)}catch(e){console.error(e)}}},e.prototype.checkIsWantFrame=function(e){var t=e.authorId,n=e.originalFrameId,r=this.wantOriginalFrameIdMap[t];this.checkFrameId&&void 0!==r&&r!==n&&console.warn("find [userId="+t+"] not expected frameId "+n+", expect "+r),this.wantOriginalFrameIdMap[t]=n+1},e.prototype.snapshot=function(){var e={frameId:this._frameId,originalFrameId:this._frameId,timestamp:this._timestamp,authorId:this.observerId,context:this.identifierContext,object:this.objectInvoker.object},t=this.identifierContext.identifierGeneratorWithObserverId(this.observerId);return u.serializeSnapshotFrame(this.library,e,t)},e.prototype.hasUserId=function(e){return this.identifierContext.hasObserver(e)},e.prototype.clone=function(){var t=o.AkkoValueCopier.copy(this.objectInvoker.object),n=this.identifierContext.clone();return new e({object:t,library:this.library,jsxFactory:this.jsxFactory,checkFrameId:this.checkFrameId,observerId:this.observerId,identifierContext:n,resource:this.resource,frameId:this._frameId,timestamp:this._timestamp})},e.prototype.isSystemEvent=function(e,t){return u.isEventFrame(e)&&e.scope===u.EventScope.System&&e.event===t},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),i=n(41),o=function(){function e(e,t){this.library=e,this.object=t;var n=r.getClassReflection(e.rootClass),o=[];for(var a in n.methods){var s=n.methods[a].decorators.find(function(e){return e instanceof i.EventDecorator});s&&o.push(Object.freeze({filter:s.eventFilter,method:a}))}this.methodNames=n.methodNames,this.eventHandlers=Object.freeze(o)}return e.prototype.invoke=function(e,t){var n=this.methodNames[e];return this.object[n].apply(this.object,t)},e.prototype.dispatch=function(e,t,n){for(var r=0,i=this.eventHandlers;r<i.length;r++){var o=i[r],a=o.filter,s=o.method;a(e,t,n)&&this.object[s].apply(this.object,[e,t,n])}},e}();t.ObjectInvoker=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23);t.noEffects=new r.AkkoMethodDecorator},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(23),o=n(139);t.event=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new a(e)};var a=function(e){function t(t){var n=e.call(this)||this;return n.eventFilter=new o.EventFilterHub(t).filter,n}return r(t,e),t}(i.AkkoMethodDecorator);t.EventDecorator=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(140))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e){var t=this;this.filters=[],this.filter=function(e,n,r){for(var i=0,o=t.filters;i<o.length;i++)if((0,o[i])(e,n,r))return!0;return!1};for(var n=[],r=function(e){var t=void 0;if("function"==typeof e)t=e;else if("string"==typeof e)t=function(t){return t===e};else{if(!(e instanceof RegExp))throw new Error("unrecognized condition "+e);t=function(t){return e.test(t)}}n.push(t)},i=0,o=e;i<o.length;i++)r(o[i]);this.filters=Object.freeze(n)}}();t.EventFilterHub=r},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(73),c=n(142),u=n(80),p=n(79),l=n(147),h=n(148),f=function(){function e(e,t,n,i,o,a){this.imageFactory=new s.ImageFactory(e,t,n,!0),this.connectionFactory=i,this.netStateAdapter=o,this.magixConfiguration=Object.freeze(r({},a))}return e.prototype.createMagix=function(e){return void 0===e&&(e={}),new d(this.netStateAdapter,this.imageFactory,this.connectionFactory,this.magixConfiguration,e)},e}();t.MagixFactory=f,function(e){e.Ready="ready",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnecting="disconnecting",e.Disconnected="disconnected"}(a=t.MagixPhase||(t.MagixPhase={}));var d=function(){function e(e,t,n,r,i){var o=this;this.imageFactory=t,this.connectionFactory=n,this.magixConfiguration=r,this.callbacks=i,this._phase=a.Ready,this.onOffline=function(){o.sessionDescription&&(o.sessionDescription.connection.disconnect(!0).catch(function(e){return console.error(e)}),o.onDisconnectWithError(new Error("net offline"),!0))},this.onReceivedActionFrame=function(e){o.sessionDescription.magixSession.receivedActionFrame(e)},this.onGeneratedActionFrame=function(e){try{o.sessionDescription.connection.pushActionFrameToSendingQueue(e)}catch(e){o.callbacks.onReceivedWarning&&o.callbacks.onReceivedWarning(e.message)}},this.onRootChanged=function(){o.callbacks.onRootChanged&&(o.animationFrameTicker?o.animationFrameTicker.invoke():o.callbacks.onRootChanged())},this.onDisconnectWithError=function(e,t){var n=o.sessionDescription;o.sessionDescription&&(o.sessionDescription.magixSession.destroy(),delete o.sessionDescription),t&&o._phase===a.Connected?o.reconnect(n).catch(function(e){delete o.connectionParams,o.callbacks.onDisconnectWithError&&o.callbacks.onDisconnectWithError(e)}):o.phase!==a.Disconnected&&(delete o.connectionParams,o.changePhase(a.Disconnected),o.callbacks.onDisconnectWithError&&o.callbacks.onDisconnectWithError(e))},this.onKickedWithReason=function(e){o.sessionDescription&&(o.sessionDescription.magixSession.destroy(),delete o.sessionDescription,delete o.connectionParams),o.changePhase(a.Disconnected),o.callbacks.onKickedWithReason&&o.callbacks.onKickedWithReason(e)},this.fireRootChanged=function(){o.callbacks.onRootChanged&&o.callbacks.onRootChanged()},this.callbacks=u.wrapCallbacks(i),this.netStatePaddingNode=e&&new h.NetStatePaddingNode(e,this.onOffline),r.enableAnimationFrame&&(this.animationFrameTicker=new p.AnimationFrameTicker(this.fireRootChanged))}return Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"session",{get:function(){return this.lastSessionUUID},enumerable:!0,configurable:!0}),e.prototype.changePhase=function(e){this._phase!==e&&(this._phase=e,this.callbacks.onPhaseChanged&&this.callbacks.onPhaseChanged(e),this.netStatePaddingNode&&this.netStatePaddingNode.didDispose&&(e===a.Disconnecting||e===a.Disconnected)&&this.netStatePaddingNode.dispose())},Object.defineProperty(e.prototype,"observerId",{get:function(){if(!this.sessionDescription)throw new Error("observer id not exist when Magix's phase is "+this.phase);return this.sessionDescription.magixSession.observerId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imagePhase",{get:function(){if(!this.sessionDescription)throw new Error("image phase not exist when Magix's phase is "+this.phase);return this.sessionDescription.magixSession.imagePhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"triggerObject",{get:function(){if(!this.sessionDescription)throw new Error("trigger object not exist when Magix's phase is "+this.phase);return this.sessionDescription.magixSession.triggerObject},enumerable:!0,configurable:!0}),e.prototype.connect=function(e){return i(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:if(this.phase!==a.Ready)throw new Error("can't connect when Magix's phase is "+this.phase);this.changePhase(a.Connecting),delete this.currentSessionToken,this.connectionParams=Object.freeze({uuid:e.uuid,roomToken:e.roomToken,userToken:e.userToken,payload:JSON.stringify(e.payload)}),r.label=1;case 1:return r.trys.push([1,3,,4]),t=this,[4,this.connectAndBuildSession()];case 2:return t.sessionDescription=r.sent(),this.lastSessionUUID=this.sessionDescription.uuid,this.changePhase(a.Connected),[3,4];case 3:throw n=r.sent(),this.changePhase(a.Disconnected),n;case 4:return[2]}})})},e.prototype.reconnect=function(e){return i(this,void 0,void 0,function(){var t,n,r,s=this;return o(this,function(c){switch(c.label){case 0:this.changePhase(a.Reconnecting),t={reconnect:function(){return s.connectAndBuildSession(e)},cancelReconnect:function(e){return i(s,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return e.magixSession.destroy(),[4,e.connection.disconnect()];case 1:return t.sent(),[2]}})})}},this.reconnectionOperator=new l.ReconnectionOperator(t,this.netStatePaddingNode),c.label=1;case 1:return c.trys.push([1,3,,4]),n=this,[4,this.reconnectionOperator.reconnect()];case 2:return n.sessionDescription=c.sent(),this.sessionDescription&&(this.lastSessionUUID=this.sessionDescription.uuid),delete this.reconnectionOperator,this.changePhase(a.Connected),this.onRootChanged(),[3,4];case 3:throw r=c.sent(),delete this.reconnectionOperator,this.changePhase(a.Disconnected),r;case 4:return[2]}})})},e.prototype.connectAndBuildSession=function(e){return i(this,void 0,void 0,function(){var t,n,i,a,s,u=this;return o(this,function(o){switch(o.label){case 0:return t=r({},this.connectionParams),e&&Object.assign(t,{previousUserId:e.magixSession.observerId}),this.currentSessionToken&&Object.assign(t,{sessionToken:this.currentSessionToken}),[4,this.connectionFactory.connect(t,{onReceivedWarning:function(e){return u.callbacks.onReceivedWarning&&u.callbacks.onReceivedWarning(e)},onDisconnectWithError:this.onDisconnectWithError,onKickedWithReason:this.onKickedWithReason,onReceivedActionFrame:this.onReceivedActionFrame})];case 1:return n=o.sent(),this.currentSessionToken=n.sessionToken,i=e&&e.magixSession,a=new c.MagixSession(this.imageFactory,n,i,this.magixConfiguration,{onImagePhaseChanged:function(e){return u.callbacks.onImagePhaseChanged&&u.callbacks.onImagePhaseChanged(e)},onGeneratedActionFrame:this.onGeneratedActionFrame,onRootChanged:this.onRootChanged,onEventFire:this.callbacks.onEventFire,onReceivedRttReport:this.callbacks.onReceivedRttReport,onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame||function(e,t){return console.error(t)},escapeObjectFilter:this.callbacks.escapeObjectFilter}),(s=Object.freeze({uuid:n.sessionUUID,connection:n.connection,magixSession:a})).connection.startReceiveActionFrames(),[2,s]}})})},e.prototype.disconnect=function(){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return this.phase!==a.Reconnecting?[3,2]:(delete this.connectionParams,[4,this.reconnectionOperator.cancelReconnect()]);case 1:return e.sent(),[3,8];case 2:if(this.phase!==a.Connected)return[3,7];this.changePhase(a.Disconnecting),e.label=3;case 3:return e.trys.push([3,,5,6]),this.sessionDescription.magixSession.destroy(),[4,this.sessionDescription.connection.disconnect()];case 4:return e.sent(),delete this.sessionDescription,delete this.connectionParams,[3,6];case 5:return this.changePhase(a.Disconnected),[7];case 6:return[3,8];case 7:throw new Error("can't disconnect when Magix's phase is "+this.phase);case 8:return[2]}})})},e.prototype.dispatch=function(e,t){if(this.phase!==a.Connected)throw new Error("can't dispatch event when Magix's phase is "+this.phase);this.sessionDescription.magixSession.dispatch(e,t)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=n(7),o=n(24),a=function(){function e(t,n,a,s,c){var u=s.enableAnimationFrame,p=this;this.paddingEvents=[],this.receivedActionFrame=function(e){p.playerBuffer.pushFrames([new i.FramePicker(e)])},this.onPlayActionFrames=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];p.image.appendActionFrame(r.frameBuffer)}e.some(function(e){return e.authorId!==p.image.observerId})&&p.onRootChanged()},this.onAfterInvokedByTrigger=function(e){e===r.TriggerInvokeMode.Modifiable&&p.onRootChanged()};var l=n.userId,h=a?a.image:null,f=e.splitActionFramesWithEnterEvent(l,n.actionFrames);this.sessionToken=n.sessionToken,this.onRootChanged=c.onRootChanged,this.image=t.createWithSnapshot({snapshotFrame:n.snapshot,actionFrames:f.beforeEnterActionFrames,observerId:l,triggerSourceImage:h,nextObserverFrameId:n.firstCommitFrameId,callbacks:{escapeObjectFilter:c.escapeObjectFilter,onPhaseChanged:c.onImagePhaseChanged,onCatchActionFrame:c.onGeneratedActionFrame,onCatchErrorWhenAppendFrame:c.onCatchErrorWhenAppendFrame,onReceivedRttReport:c.onReceivedRttReport,onAfterInvokedByTrigger:this.onAfterInvokedByTrigger,onEventFire:c.onEventFire&&this.createEventFireCallback(c.onEventFire)}});var d=[];if(f.enterFrameActionFrame){var y=f.enterFrameActionFrame;if(c.onEventFire){var g=i.deserializeActionFrame(t.library,y);this.createEventFireCallback(c.onEventFire)({event:g.event,payload:g.payload,scope:g.scope,authorId:g.authorId})}d.push(y)}d.push.apply(d,f.afterEnterActionFrames);for(var m=0,b=d;m<b.length;m++){g=b[m];this.image.appendActionFrame(g)}this.playerBuffer=o.playerBufferFactory.create({mode:o.PlayerBufferMode.Realtime,enableAnimationFrame:u,initFrameTimestamp:this.image.timestamp,callbacks:{onPlayActionFrames:this.onPlayActionFrames}}),this.handleAndReleasePaddingEvents(c.onEventFire),this.playerBuffer.play()}return e.prototype.handleAndReleasePaddingEvents=function(e){var t=this;e||(this.paddingEvents=void 0),Promise.resolve().then(function(){if(t.paddingEvents){for(var n=0,r=t.paddingEvents;n<r.length;n++){var i=r[n];try{e(i)}catch(e){console.error(e)}}t.paddingEvents=void 0}})},e.splitActionFramesWithEnterEvent=function(e,t){for(var n={beforeEnterActionFrames:[],afterEnterActionFrames:[]},r=!1,o=0,a=t;o<a.length;o++){var s=a[o];if(r)n.afterEnterActionFrames.push(s);else{var c=new i.FramePicker(s),u=c.fetchEventContent();u&&u.scope===i.EventScope.System&&"Enter"===u.event&&c.authorId===e?(r=!0,n.enterFrameActionFrame=s):n.beforeEnterActionFrames.push(s)}}return n},Object.defineProperty(e.prototype,"observerId",{get:function(){return this.image.observerId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imagePhase",{get:function(){return this.image.phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"triggerObject",{get:function(){return this.image.triggerObject},enumerable:!0,configurable:!0}),e.prototype.dispatch=function(e,t){var n={event:e,payload:t,scope:i.EventScope.Custom,authorId:this.image.observerId};this.image.dispatch(n),this.onRootChanged()},e.prototype.destroy=function(){this.image.destroy()},e.prototype.createEventFireCallback=function(e){var t=this;return function(n){t.paddingEvents?t.paddingEvents.push(n):e(n)}},e}();t.MagixSession=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=n(144),o=n(146),a=function(){function e(){}return e.prototype.create=function(e){switch(e.mode){case r.PlayerBufferMode.Realtime:return new i.RealtimePlayerBuffer(e);case r.PlayerBufferMode.Reconstruction:return new o.ReconstructionPlayerBuffer(e)}},e}();t.PlayerBufferFactory=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(78),o=[{duration:1200,rate:1},{duration:1e3,rate:.75},{duration:3e3,rate:.5},{duration:5e3,rate:.25}];var a=function(){for(var e=0,t=0,n=o;t<n.length;t++){e+=n[t].duration}return e}(),s=function(e){function t(t){var n=e.call(this,t)||this;return n.meanDelayTimeOffset=0,n.latestPlayFrameTimestamp=t.initFrameTimestamp,n.latestPlayDeviceTimestamp=Date.now(),n}return r(t,e),t.prototype.onPlayingContinue=function(){},t.prototype.onPlayingStop=function(){},t.prototype.onTick=function(){for(var e=[],t=Date.now(),n=t+this.frameInterval;this.currentBufferInterval>a;)e.push(this.takeNextFrame());for(;this.framesBufferLength>0;){var r=this.nextFrame,i=this.playTimestampReferPrevious(r)/2+(r.timestamp+this.meanDelayTimeOffset)/2;if(this.reportFrame(t,r),!(i<=n))break;e.push(this.takeNextFrame())}e.length>0&&this.playFrames(e),this.callbacks.onBufferRemainLow&&this.currentBufferRemainTimeInterval<this.remainLowTimeInterval&&this.callbacks.onBufferRemainLow()},t.prototype.reportFrame=function(e,t){var n=e-t.timestamp;this.meanDelayTimeOffset=n/2+this.meanDelayTimeOffset/2},t.prototype.playTimestampReferPrevious=function(e){var t=function(e){for(var t=0,n=o;t<n.length;t++){var r=n[t];if(e<=r.duration)return r.rate;e-=r.duration}throw new Error("durationTime is too large:"+e)}(this.currentBufferInterval)*(e.timestamp-this.latestPlayFrameTimestamp);return this.latestPlayDeviceTimestamp+t},Object.defineProperty(t.prototype,"currentBufferRemainTimeInterval",{get:function(){if(this.framesBufferLength>0){var e=this.newestPushFrame.timestamp-this.latestPlayFrameTimestamp,t=Date.now()-this.latestPlayDeviceTimestamp;return Math.max(0,e-t)}return 0},enumerable:!0,configurable:!0}),t.prototype.playFrames=function(e){try{this.callbacks.onPlayActionFrames&&this.callbacks.onPlayActionFrames(e)}catch(e){console.error(e)}finally{var t=e[e.length-1];this.latestPlayFrameTimestamp=t.timestamp,this.latestPlayDeviceTimestamp=Date.now()}},t}(i.AbstractPlayerBuffer);t.RealtimePlayerBuffer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.isFreezed=!1,this.shouldInvokeAfterFreeze=!1,this.latestInvokeTimestamp=0,this.timer=-1,this._limitDuration=e,this.invoker=t,this.invokeWhenTimeout=this.invokeWhenTimeout.bind(this)}return Object.defineProperty(e.prototype,"limitDuration",{get:function(){return this._limitDuration},set:function(e){if(this._limitDuration!==e){if(this._limitDuration=e,-1!==this.timer){clearTimeout(this.timer);var t=this.nextInvokeTimeDuration();this.timer=setTimeout(this.invokeWhenTimeout,t)}this.invoke()}},enumerable:!0,configurable:!0}),e.prototype.invoke=function(){if(this.isFreezed)this.shouldInvokeAfterFreeze=!0;else if(-1===this.timer){var e=this.nextInvokeTimeDuration();this.timer=setTimeout(this.invokeWhenTimeout,e)}},e.prototype.nextInvokeTimeDuration=function(){var e=Date.now(),t=this.latestInvokeTimestamp+this.limitDuration-e;return Math.max(0,t)},e.prototype.invokeWhenTimeout=function(){this.timer=-1,this.latestInvokeTimestamp=Date.now(),this.invoker()},e.prototype.cancel=function(){this.isFreezed?this.shouldInvokeAfterFreeze=!1:-1!==this.timer&&(clearTimeout(this.timer),this.timer=-1)},e.prototype.freeze=function(){this.isFreezed||(-1!==this.timer&&(clearTimeout(this.timer),this.timer=-1,this.shouldInvokeAfterFreeze=!0),this.isFreezed=!0)},e.prototype.unfreeze=function(){this.isFreezed&&(this.isFreezed=!1,this.shouldInvokeAfterFreeze&&(this.shouldInvokeAfterFreeze=!1,this.invoke()))},e}();t.InvokeFrequencyLimiter=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.playingBeginDeviceTimestamp=Date.now(),n.playingBeginFrameTimestamp=t.initFrameTimestamp,n.stopPlayingDeviceTimestamp=Date.now(),n.lastPlayingStopFrameTimestamp=t.initFrameTimestamp,n.lastPlayingStopDuration=0,n}return r(t,e),t.prototype.onPlayingContinue=function(){this.playingBeginDeviceTimestamp=Date.now(),this.playingBeginFrameTimestamp=this.lastPlayingStopFrameTimestamp},t.prototype.onPlayingStop=function(){var e=Date.now(),t=e-this.playingBeginDeviceTimestamp;this.stopPlayingDeviceTimestamp=e,this.lastPlayingStopFrameTimestamp=this.playingBeginFrameTimestamp+t,this.lastPlayingStopDuration=0},t.prototype.onTick=function(){for(var e=[],t=Date.now()-this.playingBeginDeviceTimestamp,n=this.playingBeginFrameTimestamp+t+this.frameInterval;this.framesBufferLength>0&&this.nextFrame.timestamp<=n;)e.push(this.takeNextFrame());if(e.length>0)try{this.callbacks.onPlayActionFrames&&this.callbacks.onPlayActionFrames(e)}catch(e){console.error(e)}if(this.callbacks.onTick)if(e.length>0){var r=e[e.length-1].timestamp;this.callbacks.onTick(r,!1)}else this.callbacks.onTick(n,!0);this.callbacks.onBufferRemainLow&&this.currentBufferInterval<this.remainLowTimeInterval&&this.callbacks.onBufferRemainLow()},t}(n(78).AbstractPlayerBuffer);t.ReconstructionPlayerBuffer=i},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a,s=Object.freeze([1e3,1e3,1e3,3e3,3e3,5e3,5e3]);!function(e){e.Ready="ready",e.Reconnecting="reconnecting",e.Canceled="canceled",e.Complete="complete",e.Failed="failed"}(a||(a={}));var c=function(){function e(e,t){this.phase=a.Ready,this.willCancel=!1,this.netStatePaddingNode=t,this.callbacks=Object.freeze(r({},e))}return e.prototype.reconnect=function(){return i(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:if(this.phase!==a.Ready)return[2,void 0];this.phase=a.Reconnecting,e=void 0,this.reconnectEndPromise=new Promise(function(t){return e=t}),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,this.reconnectMultiTimes()];case 2:return[2,t.sent()];case 3:return e(),[7];case 4:return[2]}})})},e.prototype.reconnectMultiTimes=function(){return i(this,void 0,void 0,function(){var e,t,n,r,i,c,u;return o(this,function(o){switch(o.label){case 0:e=void 0,n=0,o.label=1;case 1:if(!(n<s.length+1))return[3,16];t=Date.now(),o.label=2;case 2:return o.trys.push([2,12,,13]),this.netStatePaddingNode?[4,this.netStatePaddingNode.makeSureOnline()]:[3,4];case 3:o.sent(),o.label=4;case 4:return[4,this.callbacks.reconnect()];case 5:if(r=o.sent(),!this.willCancel)return[3,10];o.label=6;case 6:return o.trys.push([6,8,,9]),[4,this.callbacks.cancelReconnect(r)];case 7:return o.sent(),[3,9];case 8:return i=o.sent(),console.error(i),[3,9];case 9:throw this.phase=a.Canceled,new Error("reconnect did cancel");case 10:return this.phase=a.Complete,[2,r];case 11:return[3,13];case 12:return c=o.sent(),e=c,[3,13];case 13:if(this.willCancel)throw this.phase=a.Canceled,new Error("reconnect did cancel");return void 0===(u=s[n])?[3,15]:t+u-Date.now()>0?[4,function(e){return new Promise(function(t){return setTimeout(t,e)})}(u)]:[3,15];case 14:if(o.sent(),this.willCancel)throw this.phase=a.Canceled,new Error("reconnect did cancel");o.label=15;case 15:return++n,[3,1];case 16:throw this.phase=a.Failed,e}})})},e.prototype.cancelReconnect=function(){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return this.phase!==a.Reconnecting?[3,2]:(this.willCancel=!0,[4,this.reconnectEndPromise]);case 1:e.sent(),e.label=2;case 2:return[2]}})})},e}();t.ReconnectionOperator=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=this;this.netState=e,this.onOfflineListener=t,this.paddingResolver=[],this._didDispose=!1,this.onOnline=function(){n._isOnline=!0,n.handleAllPaddingResolver(!0)},this.onOffline=function(){n._isOnline=!1,n.onOfflineListener&&n.onOfflineListener()},e.addListener(this.listener={onOnline:this.onOnline,onOffline:this.onOffline}),this._isOnline=e.isOnline}return Object.defineProperty(e.prototype,"isOnline",{get:function(){return this._isOnline},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"didDispose",{get:function(){return this._didDispose},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){try{this.handleAllPaddingResolver(!1),this.netState.removeListener(this.listener)}finally{this._didDispose=!0}},e.prototype.makeSureOnline=function(){var e=this;return this._didDispose?Promise.resolve(!1):this._isOnline?Promise.resolve(!0):new Promise(function(t){e.paddingResolver.push(t)})},e.prototype.handleAllPaddingResolver=function(e){for(var t=0,n=this.paddingResolver.splice(0,this.paddingResolver.length);t<n.length;t++){(0,n[t])(e)}},e}();t.NetStatePaddingNode=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(83),a=n(7),s=function(){function e(e,t){this.persistenceServerOrigin=e,this.assetsPrefix=t}return e.prototype.create=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,(t=new c(this.persistenceServerOrigin,this.assetsPrefix,e.room)).setupWithParams(e)];case 1:return n.sent(),[2,t]}})})},e}();t.FramesSequenceFactory=s;var c=function(){function e(e,t,n){switch(this.persistenceServerOrigin=e,this.assetsPrefix=t,this.framesBuffer=[],this.setup=null,this.nextChunkId=0,this.roomUUID=n.uuid,this.roomMode=n.mode,this.endFrameId=n.endFrameId,this.chunkFramesCount=n.chunkFramesCount,n.mode){case"transitory":throw new Error("can't create sequence for transitory room");case"persistent":case"historied":break;default:throw new Error("unrecognized room mode "+n.mode)}}return e.prototype.takeFramesSequenceSetup=function(){if(!this.setup)throw new Error("not found FramesSequenceSetup or it had bean taken");try{return this.setup}finally{this.setup=null}},e.prototype.takeFramesBuffer=function(){return this.framesBuffer.splice(0,this.framesBuffer.length)},Object.defineProperty(e.prototype,"framesLength",{get:function(){return this.framesBuffer.length},enumerable:!0,configurable:!0}),e.prototype.setupWithParams=function(e){var t=e.frameId,n=e.timestamp,a=e.chunksCount;return r(this,void 0,void 0,function(){var e,r,s,c,u,p,l,h,f,d,y,g,m,b,v,T,S=this;return i(this,function(i){switch(i.label){case 0:return e={count:a},void 0!==t&&(e.frameId=t),void 0!==n&&(e.timestamp=n),r=this.persistenceServerOrigin+"/v1/rooms/"+this.roomUUID+"/frames?"+o.stringify(e),[4,fetch(r,{method:"get",headers:{"content-type":"application/json",Accept:"application/json"}})];case 1:return s=i.sent(),[4,this.assertStatusWith(s,200,r)];case 2:return i.sent(),[4,s.json()];case 3:return c=i.sent(),u=c.snapshot.frameId,(p=c.chunks.map(function(e){return{chunkId:e.beginFrameId,bytes:e.bytes}})).length>0?(l=p[0].chunkId,[4,this.tryThrice(function(){return Promise.all([S.fetchSnapshot(u)].concat(p.map(function(e){return S.fetchChunk(e.chunkId,e.bytes)})))})]):[3,5];case 4:for(h=i.sent(),v=h[0],f=h.slice(1),d=0,y=f;d<y.length;d++)g=y[d],(T=this.framesBuffer).push.apply(T,this.parseChunk(g));return void 0!==l&&u>l&&(m=u-l+1,this.framesBuffer.splice(0,m)),b=this.spliceSetupFrames(u,t,n),this.setup={snapshot:v,initFrameTimestamp:n,frames:b},this.nextChunkId=Math.max.apply(Math,p.map(function(e){return e.chunkId}))+this.chunkFramesCount,[3,7];case 5:return[4,this.tryThrice(function(){return S.fetchSnapshot(u)})];case 6:v=i.sent(),this.setup={snapshot:v,frames:[]},i.label=7;case 7:return[2]}})})},e.prototype.fetchSnapshot=function(t){return r(this,void 0,void 0,function(){var n,r;return i(this,function(i){switch(i.label){case 0:return n="historied"===this.roomMode?this.assetsPrefix+"/"+this.roomUUID+"/snapshots/"+t+".snapshot":this.assetsPrefix+"/"+this.roomUUID+"/persistence.snapshot",[4,fetch(n,{method:"get",headers:{"content-type":"application/json",Accept:"application/octet-stream"}})];case 1:return r=i.sent(),[4,this.assertStatusWith(r,200,n)];case 2:return i.sent(),[4,e.arrayBufferWithResponse(r)];case 3:return[2,i.sent()]}})})},e.prototype.spliceSetupFrames=function(e,t,n){var r=0;if(void 0!==t)r=t-e;else if(void 0!==n)for(var i=0,o=this.framesBuffer;i<o.length;i++){var s=o[i];if(new a.FramePicker(s).timestamp>n)break;r++}return this.framesBuffer.splice(0,r)},e.prototype.fetchNextChunk=function(){return r(this,void 0,void 0,function(){var e,t,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return this.nextChunkId>this.endFrameId?[2,void 0]:(e=this.persistenceServerOrigin+"/v1/rooms/"+this.roomUUID+"/chunks/"+this.nextChunkId,[4,fetch(e,{method:"get",headers:{"content-type":"application/json",Accept:"application/json"}})]);case 1:return t=i.sent(),[4,this.assertStatusWith(t,200,e)];case 2:return i.sent(),[4,t.json()];case 3:return n=i.sent(),r=n.bytes,[4,this.fetchChunk(this.nextChunkId,r)];case 4:return o=i.sent(),a=this.parseChunk(o),this.nextChunkId+=this.chunkFramesCount,[2,a]}})})},e.prototype.fetchChunk=function(t,n){return r(this,void 0,void 0,function(){var r,o;return i(this,function(i){switch(i.label){case 0:return r=this.assetsPrefix+"/"+this.roomUUID+"/chunks/"+t+".chunk",[4,fetch(r,{method:"get",headers:{"content-type":"application/json",Accept:"application/octet-stream",Range:"bytes=0-"+n}})];case 1:return o=i.sent(),[4,this.assertStatusWith(o,206,r)];case 2:return i.sent(),[4,e.arrayBufferWithResponse(o)];case 3:return[2,i.sent()]}})})},e.prototype.parseChunk=function(e){for(var t=new DataView(e),n=[],r=0;r<t.byteLength;){var i=t.getUint16(r,!0),o=new ArrayBuffer(i),a=new DataView(o);r+=2;for(var s=0;s<i;++s)a.setUint8(s,t.getUint8(r+s));r+=i,n.push(o)}return n},e.prototype.tryThrice=function(e){return r(this,void 0,void 0,function(){var t,n,r;return i(this,function(i){switch(i.label){case 0:t=void 0,n=0,i.label=1;case 1:if(!(n<3))return[3,6];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,e()];case 3:return[2,i.sent()];case 4:return r=i.sent(),t=r,[3,5];case 5:return++n,[3,1];case 6:throw t}})})},e.prototype.assertStatusWith=function(e,t,n){return r(this,void 0,void 0,function(){var r,o;return i(this,function(i){switch(i.label){case 0:return e.status===t?[3,3]:(r="without error message","application/json"!==e.headers.get("content-type")?[3,2]:[4,e.json()]);case 1:(o=i.sent()).error&&(r=o.error),i.label=2;case 2:throw new Error("fetch "+n+" failed with error status code "+e.status+": "+r);case 3:return[2]}})})},e.arrayBufferWithResponse=function(e){return r(this,void 0,void 0,function(){var t,n,r,o;return i(this,function(i){switch(i.label){case 0:return e.arrayBuffer?[4,e.arrayBuffer()]:[3,2];case 1:return[2,i.sent()];case 2:return[4,e.buffer()];case 3:for(t=i.sent(),n=new ArrayBuffer(t.length),r=new DataView(n),o=0;o<t.length;++o)r.setUint8(o,t.readUInt8(o));return[2,n]}})})},e}()},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function a(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},n=i.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=a(n[0]);r!==n[0]&&(t[n[0]]=r)}n=i.exec(e)}t["%C2"]="";for(var o=Object.keys(t),s=0;s<o.length;s++){var c=o[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),s=n(153),c=n(81),u=n(24),p=function(){function e(e,t,n,i,o){var u=this;this._phase=c.ReconstructorPhase.WaitingFirstFrame,this._scheduleTime=0,this.isPlaying=!1,this.isSeeking=!1,this.didStop=!1,this.didTouchEnding=!1,this.currentSeekingTaskId=0,this.currentLine=void 0,this.onTouchEnding=function(){u.didTouchEnding=!0,u.refreshCurrentPhase()},this.onTick=function(e){var t=e-u.beginTimestamp;u._scheduleTime=t,u.callbacks.onScheduleTimeChanged&&u.callbacks.onScheduleTimeChanged(t)},this.onPhaseChanged=function(){u.refreshCurrentPhase()},this.invokeByTrigger=function(e,t,n){if(!u.currentLine)throw new Error("first frame didn't load");return u.currentLine.invokeByTrigger(e,t,n)},this.uuid=e.uuid,this.trigger=new a.Trigger(t.library),this.triggerObject=this.trigger.object,this.timeDuration=e.endTimestamp-e.beginTimestamp,this.framesCount=e.endFrameId+1,this.beginTimestamp=e.beginTimestamp,this.callbacks=Object.freeze(r({},o)),this.lineFactory=new s.ReconstructorLineFactory({room:e,stateFactory:t,framesSequenceFactory:n,enableAnimationFrame:i}),this.trigger.receiver=this.invokeByTrigger}return Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduleTime",{get:function(){return this._scheduleTime},enumerable:!0,configurable:!0}),e.prototype.play=function(){this.assertNotStop(),this.isPlaying||this.isSeeking||(this.currentLine?this.currentLine.play():this.seekToFrameId(0)),this.isPlaying=!0,this.refreshCurrentPhase()},e.prototype.pause=function(){this.assertNotStop(),this.isPlaying&&!this.isSeeking&&this.currentLine&&this.currentLine.pause(),this.isPlaying=!1,this.refreshCurrentPhase()},e.prototype.stop=function(){this.assertNotStop(),this.isSeeking&&this.currentSeekingTaskId++,this.currentLine&&(this.isPlaying&&!this.isSeeking&&this.currentLine.destroy(),this.currentLine=void 0),this.didStop=!0,this.refreshCurrentPhase()},e.prototype.seekToFrameId=function(e){var t=this;this.assertNotStop(),e=Math.max(e,0),e=Math.min(e,this.framesCount),this.startSeekingTask(function(n){return t.lineFactory.createWithFrameId(e,n)})},e.prototype.seekToScheduleTime=function(e){var t=this;this.assertNotStop(),e=Math.max(e,0),e=Math.min(e,this.timeDuration),Number.isSafeInteger(e)||(e=Math.floor(e));var n=this.beginTimestamp+e;this.startSeekingTask(function(e){return t.lineFactory.createWithTimestamp(n,e)})},e.prototype.startSeekingTask=function(e){return i(this,void 0,void 0,function(){var t,n,r;return o(this,function(i){switch(i.label){case 0:this.currentLine&&this.currentLine.destroy(),this.currentSeekingTaskId++,this.isSeeking=!0,this.didTouchEnding=!1,this.refreshCurrentPhase(),t=this.currentSeekingTaskId,i.label=1;case 1:return i.trys.push([1,,3,4]),n=this.wrapCallbacksWithTaskChecking(t,{escapeObjectFilter:this.callbacks.escapeObjectFilter,onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame,onCatchErrorWhenFetchBuffer:this.callbacks.onCatchErrorWhenFetchBuffer,onRootChanged:this.callbacks.onRootChanged,onEventFire:this.callbacks.onEventFire,onTouchEnding:this.onTouchEnding,onTick:this.onTick,onPhaseChanged:this.onPhaseChanged}),[4,e(n)];case 2:return r=i.sent(),this.currentSeekingTaskId===t?this.changeCurrentLine(r):r.destroy(),[3,4];case 3:return this.currentSeekingTaskId===t&&(this.isSeeking=!1,this.refreshCurrentPhase()),[7];case 4:return[2]}})})},e.prototype.changeCurrentLine=function(e){this.currentLine=e,this.isPlaying&&e.play(),this.callbacks.onRootChanged&&this.callbacks.onRootChanged(),this.onTick(e.beginTimestamp)},e.prototype.wrapCallbacksWithTaskChecking=function(e,t){var n=this,r={},i=function(i){var o=t[i];r[i]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(e===n.currentSeekingTaskId)return o.apply(void 0,t)}};for(var o in t)i(o);return r},e.prototype.refreshCurrentPhase=function(){var e=this.currentPhase();this._phase!==e&&(this._phase=e,this.callbacks.onPhaseChanged&&this.callbacks.onPhaseChanged(e))},e.prototype.currentPhase=function(){if(this.didStop)return c.ReconstructorPhase.Stop;if(!this.currentLine)return c.ReconstructorPhase.WaitingFirstFrame;if(this.isSeeking)return c.ReconstructorPhase.Seeking;switch(this.currentLine.phase){case u.PlayerBufferPhase.Playing:return c.ReconstructorPhase.Playing;case u.PlayerBufferPhase.Pausing:return c.ReconstructorPhase.Pause;case u.PlayerBufferPhase.Empty:return this.didTouchEnding?c.ReconstructorPhase.TouchedEnding:c.ReconstructorPhase.Buffering}},e.prototype.assertNotStop=function(){if(this.didStop)throw new Error("Reconstructor did stop")},e}();t.ReconstructorImplement=p},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),a=n(7),s=n(13),c=n(24),u=function(){function e(e){this.room=e.room,this.stateFactory=e.stateFactory,this.framesSequenceFactory=e.framesSequenceFactory,this.enableAnimationFrame=e.enableAnimationFrame}return e.prototype.createWithFrameId=function(e,t){return r(this,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:return[4,this.framesSequenceFactory.create({room:this.room,frameId:e,chunksCount:1})];case 1:return n=r.sent(),[2,new p(this.stateFactory,n,this.enableAnimationFrame,t)]}})})},e.prototype.createWithTimestamp=function(e,t){return r(this,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:return[4,this.framesSequenceFactory.create({room:this.room,timestamp:e,chunksCount:1})];case 1:return n=r.sent(),[2,new p(this.stateFactory,n,this.enableAnimationFrame,t)]}})})},e}();t.ReconstructorLineFactory=u;var p=function(){function e(e,t,n,r){var i=this;this.isDownloading=!1,this.didTouchEnding=!1,this.didDestroy=!1,this.onPlayActionFrames=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];try{i.stateOperator.state.appendActionFrame(r.frameBuffer)}catch(e){i.callbacks.onCatchErrorWhenAppendFrame&&i.callbacks.onCatchErrorWhenAppendFrame(r.authorId,e)}}i.callbacks.onRootChanged&&i.callbacks.onRootChanged()},this.onBufferRemainLow=function(){i.didTouchEnding||i.isDownloading||i.fetchNextChunk()},this.receiveEventFrame=function(e){i.callbacks.onEventFire&&i.callbacks.onEventFire({event:e.event,payload:e.payload,scope:e.scope,authorId:e.authorId})};var a=t.takeFramesSequenceSetup(),s=a.snapshot,u=a.frames,p=a.initFrameTimestamp,l=e.createWithSnapshot(o.AdminObserverId,s,u);l.eventFrameReceiver=this.receiveEventFrame,this.beginTimestamp=l.timestamp,this.stateOperator=l.createOperator({escapeObjectFilter:r.escapeObjectFilter}),this.playerBuffer=c.playerBufferFactory.create({mode:c.PlayerBufferMode.Reconstruction,enableAnimationFrame:n,initFrameTimestamp:void 0===p?this.stateOperator.state.timestamp:p,callbacks:{onBufferRemainLow:this.onBufferRemainLow,onPlayActionFrames:this.onPlayActionFrames,onPhaseChanged:r.onPhaseChanged,onTick:r.onTick}}),this.playerBuffer.pushFrames(this.takeFramePickers(t)),this.sequence=t,this.callbacks=r}return e.prototype.takeFramePickers=function(e){for(var t=[],n=0,r=e.takeFramesBuffer();n<r.length;n++){var i=r[n];t.push(new a.FramePicker(i))}return t},e.prototype.play=function(){this.playerBuffer.play()},e.prototype.pause=function(){this.playerBuffer.pause()},e.prototype.destroy=function(){this.didDestroy||(this.playerBuffer.pause(),this.didDestroy=!0)},Object.defineProperty(e.prototype,"phase",{get:function(){return this.playerBuffer.phase},enumerable:!0,configurable:!0}),e.prototype.invokeByTrigger=function(e,t,n){if(n===o.TriggerInvokeMode.Modifiable){var r=this.stateOperator.state.library.rootClass,i=s.getClassReflection(r).methods[e].name;throw new Error("disable to invoke method "+i+" of trigger object. it's modifiable method. you can only invoke no-effects methods")}return this.stateOperator.invoke(e,t,n)},e.prototype.fetchNextChunk=function(){return r(this,void 0,void 0,function(){var e,t,n,r,o,s;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),this.isDownloading=!0,[4,this.sequence.fetchNextChunk()];case 1:if(e=i.sent()){for(t=[],n=0,r=e;n<r.length;n++)o=r[n],t.push(new a.FramePicker(o));this.playerBuffer.pushFrames(t)}else this.didTouchEnding=!0,this.callbacks.onTouchEnding&&this.callbacks.onTouchEnding();return[3,4];case 2:return s=i.sent(),this.callbacks.onCatchErrorWhenFetchBuffer&&this.callbacks.onCatchErrorWhenFetchBuffer(s),[3,4];case 3:return this.isDownloading=!1,[7];case 4:return[2]}})})},e}();t.ReconstructorLineImplement=p},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(7),s=n(80),c=function(){function e(e){this.clientFactory=e}return e.prototype.connect=function(e,t){return r(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,new u(this.clientFactory,t).connect(e)];case 1:return[2,n.sent()]}})})},e}();t.ConnectionFactory=c,function(e){e.Ready="ready",e.Connecting="connecting",e.Connected="connected",e.Disconnecting="disconnecting",e.Disconnected="disconnected"}(o=t.ConnectionPhase||(t.ConnectionPhase={}));var u=function(){function e(e,t){var n=this;this.clientFactory=e,this.callbacks=t,this.phase=o.Ready,this.client=void 0,this.connectionBuilder=void 0,this.onReceivedSetup=function(e){n.phase===o.Connecting&&n.connectionBuilder.receivedSetup(e)},this.onReceivedActionFrame=function(e){n.phase===o.Connecting?n.connectionBuilder.receivedActionFrame(e):n.phase===o.Connected&&(n.actionFramesInterceptBuffer?n.actionFramesInterceptBuffer.push(e):n.callbacks.onReceivedActionFrame(e))},this.onDisconnectByServer=function(e,t){t?n.disconnectWithError(t,!1):e&&n.kickedByServer(e)},this.onDisconnectWithSocketError=function(e){n.disconnectWithError(e,!0)},this.callbacks=s.wrapCallbacks(t)}return e.prototype.connect=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,s,c,u,l,h,f,d,y;return i(this,function(i){switch(i.label){case 0:this.assertPhase(o.Ready),i.label=1;case 1:return i.trys.push([1,4,,5]),this.connectionBuilder=new p(e.previousUserId),this.phase=o.Connecting,t=this,[4,this.clientFactory.createRoomClient(e,{onReceivedSetup:this.onReceivedSetup,onReceivedActionFrame:this.onReceivedActionFrame,onReceivedWarning:this.callbacks.onReceivedWarning,onDisconnectWithSocketError:this.onDisconnectWithSocketError,onDisconnectByServer:this.onDisconnectByServer})];case 2:return t.client=i.sent(),[4,this.connectionBuilder.promise];case 3:return n=i.sent(),r=n.snapshotPicker,a=n.actionPickers,s=n.userId,c=n.firstCommitFrameId,u=n.sessionUUID,l=n.sessionToken,h=this.handleBuilderResult(a,r),f=h.snapshot,d=h.actionFrames,this.phase=o.Connected,this.connectionBuilder=void 0,this.actionFramesInterceptBuffer=[],[2,{connection:this,snapshot:f,actionFrames:d,userId:s,firstCommitFrameId:c,sessionUUID:u,sessionToken:l}];case 4:throw y=i.sent(),this.phase=o.Disconnected,y;case 5:return[2]}})})},e.prototype.handleBuilderResult=function(e,t){return e=(e=e.sort(function(e,t){return e.frameId-t.frameId})).filter(function(e){return e.frameId>t.frameId}),{snapshot:t.frameBuffer,actionFrames:e.map(function(e){return e.frameBuffer})}},e.prototype.disconnectWithError=function(e,t){this.phase===o.Connecting?this.connectionBuilder.reject(e):this.phase!==o.Connected&&this.phase!==o.Disconnecting||(this.callbacks.onDisconnectWithError(e,t),this.phase=o.Disconnected)},e.prototype.kickedByServer=function(e){this.phase===o.Connecting?this.connectionBuilder.reject(new Error("kicked by server: "+e)):this.phase!==o.Connected&&this.phase!==o.Disconnecting||(this.callbacks.onKickedWithReason(e),this.phase=o.Disconnected)},e.prototype.startReceiveActionFrames=function(){if(this.actionFramesInterceptBuffer){for(var e=0,t=this.actionFramesInterceptBuffer;e<t.length;e++){var n=t[e];this.callbacks.onReceivedActionFrame(n)}this.actionFramesInterceptBuffer=void 0}},e.prototype.disconnect=function(e){return void 0===e&&(e=!1),r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:this.assertPhase(o.Connected),this.phase=o.Disconnecting,t.label=1;case 1:return t.trys.push([1,,3,4]),[4,this.client.disconnect(e)];case 2:return t.sent(),[3,4];case 3:return this.phase=o.Disconnected,[7];case 4:return[2]}})})},e.prototype.pushActionFrameToSendingQueue=function(e){this.phase===o.Connected&&this.client.sendActionFrame(e)},e.prototype.assertPhase=function(e){if(this.phase!==e)throw new Error("except phase "+e+" but it's "+this.phase)},e}(),p=function(){function e(e){var t=this;this.previousUserId=e,this.connectingActionPickers=[],this.userId=void 0,this.sessionUUID=void 0,this.sessionToken=void 0,this.firstCommitFrameId=void 0,this.receivedActionFrame=function(e){var n=new a.FramePicker(e);if(n.type===a.ActionFrameType.Ack)throw new Error("can't received ACK frame before connected");t.connectingActionPickers.push(n),t.isPickerEnterEventOfUserId(n)&&t.waitEnterActionFrame()},this.receivedSetup=function(e){var n=e.userId,r=e.sessionUUID,i=e.sessionToken,o=e.firstCommitFrameId,s=e.snapshot;t.userId=n,t.sessionUUID=r,t.sessionToken=i,t.firstCommitFrameId=o,t.didReceiveSetup(new a.FramePicker(s)),t.previousUserId===n?t.waitEnterActionFrame():t.connectingActionPickers.some(function(e){return t.isPickerEnterEventOfUserId(e)})&&t.waitEnterActionFrame()};var n=new Promise(function(e){t.didReceiveSetup=e}),r=new Promise(function(e){t.waitEnterActionFrame=e}),i=new Promise(function(e,n){t.rejectByOutside=n}),o=Promise.all([n,r]).then(function(e){var n=e[0];return{userId:t.userId,firstCommitFrameId:t.firstCommitFrameId,sessionUUID:t.sessionUUID,sessionToken:t.sessionToken,snapshotPicker:n,actionPickers:t.connectingActionPickers}});this.promise=Promise.race([o,i]).then(function(e){return e})}return e.prototype.reject=function(e){this.rejectByOutside(e)},e.prototype.isPickerEnterEventOfUserId=function(e){if(void 0===this.userId)return!1;if(e.authorId===this.userId){var t=e.fetchEventContent();if(t&&t.scope===a.EventScope.System&&"Enter"===t.event)return!0}return!1},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.RoomDelete="roomDelete",e.RoomZombie="roomZombie",e.RoomBan="roomBan",e.KickByAdmin="kickByAdmin",e.ReplaceByOther="replaceByOther"}(t.KickReason||(t.KickReason={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(157))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(158),i=function(){function e(){}return e.prototype.create=function(e){return void 0===e&&(e={}),new r.ResourceManagerImplement(e)},e}();t.ResourceManagerFactory=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.callbacks=Object.freeze(this.wrapCallbacks(e))}return e.prototype.wrapCallbacks=function(t){for(var n={},r=function(e){var r=t[e];n[e]=r||function(){throw new Error("can't call. "+e+" not register")}},i=0,o=e.callbackKeys;i<o.length;i++){r(o[i])}return Object.freeze(n)},e.prototype.convertIdToUrl=function(e){return this.callbacks.convertIdToUrl(e)},e.callbackKeys=Object.freeze(["convertIdToUrl"]),e}();t.ResourceManagerImplement=r},function(e,t,n){"use strict";
/** @license React v16.4.2
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(31),i=n(42),o=n(43),a=n(44),s="function"==typeof Symbol&&Symbol.for,c=s?Symbol.for("react.element"):60103,u=s?Symbol.for("react.portal"):60106,p=s?Symbol.for("react.fragment"):60107,l=s?Symbol.for("react.strict_mode"):60108,h=s?Symbol.for("react.profiler"):60114,f=s?Symbol.for("react.provider"):60109,d=s?Symbol.for("react.context"):60110,y=s?Symbol.for("react.async_mode"):60111,g=s?Symbol.for("react.forward_ref"):60112;s&&Symbol.for("react.timeout");var m="function"==typeof Symbol&&Symbol.iterator;function b(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);i(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function T(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||v}function S(){}function x(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||v}T.prototype.isReactComponent={},T.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&b("85"),this.updater.enqueueSetState(this,e,t,"setState")},T.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=T.prototype;var E=x.prototype=new S;E.constructor=x,r(E,T.prototype),E.isPureReactComponent=!0;var w={current:null},P=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r=void 0,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)P.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),p=0;p<s;p++)u[p]=arguments[p+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:c,type:e,key:o,ref:a,props:i,_owner:w.current}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===c}var _=/\/+/g,R=[];function M(e,t,n,r){if(R.length){var i=R.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function I(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>R.length&&R.push(e)}function N(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o=!1;if(null===e)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case c:case u:o=!0}}if(o)return n(r,e,""===t?"."+A(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){var s=t+A(i=e[a],a);o+=N(i,s,n,r)}else if(null===e||void 0===e?s=null:s="function"==typeof(s=m&&e[m]||e["@@iterator"])?s:null,"function"==typeof s)for(e=s.call(e),a=0;!(i=e.next()).done;)o+=N(i=i.value,s=t+A(i,a++),n,r);else"object"===i&&b("31","[object Object]"===(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return o}function A(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function j(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?D(e,r,n,a.thatReturnsArgument):null!=e&&(O(e)&&(t=i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(_,"$&/")+"/")+n,e={$$typeof:c,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),r.push(e))}function D(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(_,"$&/")+"/"),t=M(t,o,r,i),null==e||N(e,"",F,t),I(t)}var B={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return D(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=M(null,null,t,n),null==e||N(e,"",j,t),I(t)},count:function(e){return null==e?0:N(e,"",a.thatReturnsNull,null)},toArray:function(e){var t=[];return D(e,t,null,a.thatReturnsArgument),t},only:function(e){return O(e)||b("143"),e}},createRef:function(){return{current:null}},Component:T,PureComponent:x,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_currentValue2:e,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null}).Provider={$$typeof:f,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:g,render:e}},Fragment:p,StrictMode:l,unstable_AsyncMode:y,unstable_Profiler:h,createElement:C,cloneElement:function(e,t,n){(null===e||void 0===e)&&b("267",e);var i=void 0,o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,u=w.current),void 0!==t.key&&(a=""+t.key);var p=void 0;for(i in e.type&&e.type.defaultProps&&(p=e.type.defaultProps),t)P.call(t,i)&&!k.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==p?p[i]:t[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){p=Array(i);for(var l=0;l<i;l++)p[l]=arguments[l+2];o.children=p}return{$$typeof:c,type:e.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(e){var t=C.bind(null,e);return t.type=e,t},isValidElement:O,version:"16.4.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:w,assign:r}},W={default:B},U=W&&B||W;e.exports=U.default?U.default:U},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__context("impls/Bundles","1.2.0");n(47),n(48),n(49),n(50),n(51),n(52),n(53),r.defineType("0",r.getObjectType({properties:{selector:r.getReferenceType("./Selector:Selector"),pencil:r.getReferenceType("./Pencil:PencilAppliance"),rectangle:r.getReferenceType("./Rectangle:RectangleAppliance"),ellipse:r.getReferenceType("./Ellipse:EllipseAppliance"),eraser:r.getReferenceType("./Eraser:Eraser"),arrow:r.getReferenceType("./Arraw:ArrowAppliance"),text:r.getReferenceType("./Text:TextAppliance")}})),r.defineExport("0","BundleTypes"),r=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(162))},function(e,t,n){"use strict";(function(e){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(83),s=n(0),c=n(164);WebSocket=WebSocket||e.WebSocket;var u=function(){function e(e){this.serverUrl=e,this.socketFactory=new c.AkkoSocketFactory("setup","snapshot","action")}return e.prototype.createRoomClient=function(e,t){return i(this,void 0,void 0,function(){var n,r;return o(this,function(i){switch(i.label){case 0:return n=this.createWebSocket(e),[4,(r=new p(this.socketFactory,n,t)).connect()];case 1:return i.sent(),[2,r]}})})},e.prototype.createWebSocket=function(e){var t=e.uuid,n=e.userToken,r=e.sessionToken,i=e.roomToken,o=e.payload,c=void 0===o?null:o,u={akkoVersion:s.AkkoVersion,room:t,token:i,payload:c};return n&&(u.userToken=n),r&&(u.sessionToken=r),new WebSocket(this.serverUrl+"?"+a.stringify(u))},e}();t.WebSocketClientFactory=u;var p=function(){function e(e,t,n){var i=this;this.onDisconnect=function(e){var t=e.reason,n=e.message;switch(t){case c.AkkoSocketDisconnectReason.WebSocketError:case c.AkkoSocketDisconnectReason.CommunicationError:i.callbacks.onDisconnectWithSocketError(new Error(n));break;case c.AkkoSocketDisconnectReason.Normal:i.callbacks.onDisconnectByServer(t);break;case c.AkkoSocketDisconnectReason.RemoteError:i.callbacks.onDisconnectByServer(void 0,new Error(n))}},this.receivedSetup=function(e){var t;try{t=JSON.parse(e)}catch(e){try{i.callbacks.onDisconnectWithSocketError(e)}finally{i.socket.disconnect()}throw e}i.setupCollection=t,i.checkDidReceivedAllSetupInfo()},this.receivedSnapshot=function(e){i.snapshot=e,i.checkDidReceivedAllSetupInfo()},this.callbacks=Object.freeze(r({},n)),this.socket=e.create(t,{onDisconnect:this.onDisconnect}),this.socket.on("action",n.onReceivedActionFrame),this.socket.on("setup",this.receivedSetup),this.socket.on("snapshot",this.receivedSnapshot)}return e.prototype.checkDidReceivedAllSetupInfo=function(){this.setupCollection&&this.snapshot&&(this.callbacks.onReceivedSetup({userId:this.setupCollection.userId,firstCommitFrameId:this.setupCollection.frameId,snapshot:this.snapshot,sessionUUID:this.setupCollection.uuid,sessionToken:this.setupCollection.token}),delete this.setupCollection,delete this.snapshot)},e.prototype.connect=function(){return this.socket.waitToConnected()},e.prototype.disconnect=function(e){return void 0===e&&(e=!1),i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return e?(this.socket.disconnectForce(),[3,3]):[3,1];case 1:return[4,this.socket.disconnect()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.sendActionFrame=function(e){this.socket.emit("action",e)},e}();t.WebSocketClient=p}).call(this,n(163))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(98))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(166),c=n(98),u=n(100),p=function(e){function t(t,n,r){var o=e.call(this)||this;return o.connectFailError=void 0,o.onError=function(){console.warn("websocket received error")},o.onCloseByRemote=function(e){if(o._phase===c.AkkoSocketPhase.Connected){o.sessionChannel.stop(),o.socket.close(1e3),o.updatePhase(c.AkkoSocketPhase.Disconnected);var t=e&&e.error,n=e&&e.reason;t?o.params.onDisconnect({reason:c.AkkoSocketDisconnectReason.RemoteError,message:t}):o.params.onDisconnect({reason:c.AkkoSocketDisconnectReason.Normal,message:n||"ok"})}},o.onClose=function(e){var t=e.code,n=void 0===t?1e3:t,r=e.reason;if(o._phase===c.AkkoSocketPhase.Connected){var i=o.errorMessageWithCode(n)||"disconnected with code "+n+' "'+r+'"';o.sessionChannel.stop(),o.updatePhase(c.AkkoSocketPhase.Disconnected),o.params.onDisconnect({reason:c.AkkoSocketDisconnectReason.WebSocketError,message:i,webSocketCode:n})}},o.socket=t,o.socket.binaryType="arraybuffer",o.params=Object.freeze(i({},r)),o.sessionChannel=new u.SessionChannel(o,t,n,{onCloseByRemote:o.onCloseByRemote,onEvent:function(e,t){return o.dispatchToListeners(e,t)},onRemoteHeartbeatTimeout:function(){return o.onCommunicationErrorMessage("remote heartbeat timeout")},onSendingBufferOverflow:function(){return o.onCommunicationErrorMessage("sending buffer overflow")}}),o.initializePhaseWithSocketReadyState(),o}return r(t,e),t.prototype.initializePhaseWithSocketReadyState=function(){if(this.socket.readyState===s.ReadyState.CONNECTING)this._phase=c.AkkoSocketPhase.Connecting,this.connect();else{if(this.socket.readyState!==s.ReadyState.OPEN)throw new Error("WebSocket's readyState can be only CLOSED or OPEN, instead of "+this.socket.readyState);this._phase=c.AkkoSocketPhase.Connected,this.addSessionListeners(),this.sessionChannel.start()}},Object.defineProperty(t.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),t.prototype.updatePhase=function(e){if(this._phase!==e)try{this.params.onPhaseChanged(e)}finally{this._phase=e}},t.prototype.emit=function(e,t){if(this._phase!==c.AkkoSocketPhase.Connected)throw new Error("AkkoSocket can't emit when phase is "+this.phase);this.sessionChannel.send(e,t)},t.prototype.connect=function(){return o(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.waitToConnected()];case 1:return t.sent(),this.addSessionListeners(),this.sessionChannel.start(),this.updatePhase(c.AkkoSocketPhase.Connected),[3,3];case 2:return e=t.sent(),this.updatePhase(c.AkkoSocketPhase.Disconnected),this.connectFailError=e,[3,3];case 3:return[2]}})})},t.prototype.addSessionListeners=function(){this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("error",this.onError)},t.prototype.waitToConnected=function(){var e=this;if(this.connectFailError)throw this.connectFailError;if(this._phase===c.AkkoSocketPhase.Connected)return Promise.resolve();if(this._phase===c.AkkoSocketPhase.Connecting)return new Promise(function(t,n){var r=function(){e.socket.removeEventListener("open",r),e.socket.removeEventListener("error",i),t()},i=function(t){e.socket.removeEventListener("open",r),e.socket.removeEventListener("error",i),n(new Error(t.message||"connect failed"))};e.socket.addEventListener("open",r),e.socket.addEventListener("error",i)});throw new Error("AkkoSocket's phase had became "+this._phase)},t.prototype.disconnect=function(e){return e?this.disconnectWithCodeAndReason({reason:e}):this.disconnectWithCodeAndReason()},t.prototype.disconnectWithError=function(e){return this.disconnectWithCodeAndReason({error:e.message})},t.prototype.disconnectForce=function(){if(this._phase===c.AkkoSocketPhase.Connected){this.sessionChannel.stop(),this.socket.close(1001),this.updatePhase(c.AkkoSocketPhase.Disconnected)}},t.prototype.disconnectWithCodeAndReason=function(e){return o(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:if(this._phase!==c.AkkoSocketPhase.Connected)throw new Error("AkkoSocket can't disconnect when phase is "+this.phase);return this.updatePhase(c.AkkoSocketPhase.Disconnecting),this.sessionChannel.dispatchClose(e),[4,this.waitUtilCloseAndCheckTimeout()];case 1:return n.sent()&&(t=1e3,this.socket.close(t)),this.sessionChannel.stop(),this.updatePhase(c.AkkoSocketPhase.Disconnected),[2]}})})},t.prototype.waitUtilCloseAndCheckTimeout=function(){var e=this,t=null,n=new Promise(function(e){t=setTimeout(function(){t=null,e(!0)},3e3)}),r=new Promise(function(t){e.socket.readyState===s.ReadyState.CLOSED?t(!1):e.socket.addEventListener("close",function(){return t(!1)})});return Promise.race([n,r]).then(function(e){return null!==t&&clearTimeout(t),e})},t.prototype.onCommunicationErrorMessage=function(e){this._phase===c.AkkoSocketPhase.Connected&&(this.disconnectWithError(new Error("CommunicationError: "+e)),this.params.onDisconnect({reason:c.AkkoSocketDisconnectReason.CommunicationError,message:e}))},t.prototype.errorMessageWithCode=function(e){switch(e){case 1e3:return"CLOSE_NORMAL";case 1001:return"CLOSE_GOING_AWAY";case 1002:return"CLOSE_PROTOCOL_ERROR";case 1003:return"CLOSE_UNSUPPORTED";case 1005:return"CLOSE_NO_STATUS";case 1006:return"CLOSE_ABNORMAL";case 1007:return"Unsupported Data";case 1008:return"Policy Violation";case 1009:return"CLOSE_TOO_LARGE";case 1010:return"Missing Extension";case 1011:return"Internal Error";case 1012:return"Service Restart";case 1013:return"Try Again Later";case 1015:return"TLS Handshake";default:return}},t}(n(169).EventsManagers);t.AkkoSocketImplement=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(t.ReadyState||(t.ReadyState={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=Math.pow(2,32),o=!0;!function(e){e[e.ArrayBuffer=0]="ArrayBuffer",e[e.String=1]="String",e[e.Integer=2]="Integer"}(r||(r={}));var a=function(){function e(e,t,n){var r=this;this.typesMap=e,this.socket=t,this.receiver=n,this.latestThreePackageBytes=[],this.nextSelfPackageId=0,this._latestReceivedRemoteId=-1,this.onMessage=function(e){if(r.receivedPackageHeadBuffer){var t=r.receivedPackageHeadBuffer,n=e.data,i=r.parsePackage(t,n);r._latestReceivedRemoteId=Math.max(i.id,r._latestReceivedRemoteId),r.receivedPackageHeadBuffer=void 0,r.receiver(i)}else r.receivedPackageHeadBuffer=e.data},t.binaryType="arraybuffer",t.addEventListener("message",this.onMessage)}return Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this.socket.bufferedAmount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPackageBytesInLatestThree",{get:function(){return Math.max.apply(Math,[0].concat(this.latestThreePackageBytes))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latestReceivedRemoteId",{get:function(){return this.latestReceivedRemoteId},enumerable:!0,configurable:!0}),e.prototype.sendPackage=function(e,t){void 0===t&&(t=0);var n=Object.freeze({id:this.nextSelfPackageId,receivedId:this._latestReceivedRemoteId,type:e,data:t});this.nextSelfPackageId++;var r=this.createPackageHead(n),i=this.wrapPackageData(n.data),o=r.byteLength+i.byteLength;return this.socket.send(r),this.socket.send(i),this.latestThreePackageBytes[0]=this.latestThreePackageBytes[1],this.latestThreePackageBytes[1]=this.latestThreePackageBytes[2],this.latestThreePackageBytes[2]=o,n.id},e.prototype.createPackageHead=function(e){var t=new ArrayBuffer(18),n=new DataView(t);return s(n,0,e.id),s(n,8,e.receivedId),n.setUint8(16,this.typesMap.findTypeId(e.type)),n.setUint8(17,this.findDataTypeWith(e.data)),t},e.prototype.findDataTypeWith=function(e){switch(typeof e){case"number":return r.Integer;case"string":return r.String;default:return r.ArrayBuffer}},e.prototype.wrapPackageData=function(e){if("string"==typeof e){for(var t=new String(e),n=new ArrayBuffer(2*t.length),r=new DataView(n),i=0;i<t.length;++i)r.setUint16(2*i,65535&t.charCodeAt(i),o);return n}if("number"==typeof e){n=new ArrayBuffer(8);return s(r=new DataView(n),0,e),n}return e},e.prototype.parsePackage=function(e,t){var n,i=new DataView(e),a=c(i,0),s=c(i,8),u=i.getUint8(16),p=i.getUint8(17);switch(p){case r.String:for(var l=t.byteLength/2,h=[],f=new DataView(t),d=0;d<l;++d)h[d]=f.getUint16(2*d,o);n=String.fromCharCode.apply(String,h);break;case r.Integer:n=c(f=new DataView(t),0);break;case r.ArrayBuffer:n=t;break;default:throw new Error("unrecognized data type "+p)}return Object.freeze({id:a,receivedId:s,type:this.typesMap.findTypeById(u),data:n})},e}();function s(e,t,n){var r=n%i,a=(n-r)/i;e.setInt32(t,r,o),e.setInt32(t+4,a,o)}function c(e,t){var n=e.getInt32(t,o);return e.getInt32(t+4,o)*i+n}t.PackagesChannel=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){var t=this;this.invoker=e,this.timer=null,this.invokeWhenTimeout=function(){t.timer=null,t.invoker()}}return e.prototype.refreshAndInvokeAfterInterval=function(e){null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.invokeWhenTimeout,e)},e.prototype.cancel=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e}();t.Delayer=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.eventListeners={}}return e.prototype.on=function(e,t){var n=this.eventListeners[e];n||(n=[],this.eventListeners[e]=n),-1===n.indexOf(t)&&n.push(t)},e.prototype.off=function(e,t){var n=this.eventListeners[e];if(n){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this.eventListeners[e])}},e.prototype.once=function(e,t){var n=this,r=function(i){try{t(i)}finally{n.off(e,r)}};this.on(e,r)},e.prototype.dispatchToListeners=function(e,t){var n=this.eventListeners[e];if(n)for(var r=0,i=n;r<i.length;r++){var o=i[r];try{o(t)}catch(e){console.error(e)}}},e}();t.EventsManagers=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(171);function o(e){if(e)try{e()}catch(e){console.error(e)}}!function(e){e[e.TickBeforeMe=0]="TickBeforeMe",e[e.TickAfterMe=1]="TickAfterMe"}(r||(r={}));var a=function(){function e(){var e=this;this.onTick=function(){e.rootGen.tick()};var t=i.createAnimationFrameRefresher(i.AnimationFrameRefresherType.Browser,this.onTick);this.rootGen=new s(r.TickAfterMe,t)}return e.prototype.create=function(){return this.rootGen.createChildTickAfterMe()},e}();t.AnimationTickGenFactory=a;var s=function(){function e(t,n,r){this.relationship=t,this.refresher=n,this.parent=r,this.id=e.nextId++,this.childGensCount=0,this.previousCount=0,this.tickBeforeMeGens={},this.tickAfterMeGens={}}return e.prototype.tick=function(){for(var e in this.tickBeforeMeGens)this.tickBeforeMeGens[e].tick();for(var e in o(this._onTick),o(this.onceInvoker),this.tickAfterMeGens)this.tickAfterMeGens[e].tick();o(this.onAfterTick),this.onceInvoker&&(this.onceInvoker=void 0,this.checkIfNeedAddOrRemoveFromParent())},e.prototype.createChildTickBeforeMe=function(){return new e(r.TickBeforeMe,this.refresher,this)},e.prototype.createChildTickAfterMe=function(){return new e(r.TickAfterMe,this.refresher,this)},e.prototype.invokeOnce=function(t){void 0===t&&(t=e.EmptyInvoker),this.onceInvoker?this.onceInvoker=t:(this.onceInvoker=t,this.checkIfNeedAddOrRemoveFromParent())},Object.defineProperty(e.prototype,"onTick",{get:function(){return this._onTick},set:function(e){this._onTick=e,this.checkIfNeedAddOrRemoveFromParent()},enumerable:!0,configurable:!0}),e.prototype.checkIfNeedAddOrRemoveFromParent=function(){var e=(this._onTick?1:0)+(this.onceInvoker?1:0)+this.childGensCount;this.previousCount!==e&&(this.parent?this.previousCount>0&&0===e?this.parent.removeChildGen(this):0===this.previousCount&&1===e&&this.parent.addChildGen(this):0===e?this.refresher.stop():1===e&&this.refresher.start(),this.previousCount=e)},e.prototype.addChildGen=function(e){(e.relationship===r.TickBeforeMe?this.tickBeforeMeGens:this.tickAfterMeGens)[e.id]=e,this.childGensCount++,this.checkIfNeedAddOrRemoveFromParent()},e.prototype.removeChildGen=function(e){delete(e.relationship===r.TickBeforeMe?this.tickBeforeMeGens:this.tickAfterMeGens)[e.id],this.childGensCount--,this.checkIfNeedAddOrRemoveFromParent()},e.nextId=0,e.EmptyInvoker=function(){},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e.Browser="browser",e.Node="node"}(r=t.AnimationFrameRefresherType||(t.AnimationFrameRefresherType={})),t.createAnimationFrameRefresher=function(e,t){return e===r.Node?new o(t):new i(t)};var i=function(){function e(e){var t=this;this.ticker=e,this.animationFrameId=void 0,this.interceptNextTick=!1,this.onTick=function(){t.interceptNextTick||(t.ticker(),t.interceptNextTick||(void 0!==t.animationFrameId&&cancelAnimationFrame(t.animationFrameId),t.animationFrameId=requestAnimationFrame(t.onTick))),t.interceptNextTick=!1}}return e.prototype.start=function(){void 0!==this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.animationFrameId=requestAnimationFrame(this.onTick),this.interceptNextTick=!1},e.prototype.stop=function(){this.interceptNextTick=!0},e}(),o=function(){function e(e){this.ticker=e,this.timer=void 0}return e.prototype.start=function(){void 0===this.timer&&(this.timer=setInterval(this.ticker,34))},e.prototype.stop=function(){void 0!==this.timer&&(clearInterval(this.timer),this.timer=void 0)},e}()},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(101),c=function(){function e(e,t){this.akkoFactory=e,this.mediaPlayerFactory=t}return e.prototype.create=function(e,t,n){return void 0===n&&(n={}),new u(this.akkoFactory,this.mediaPlayerFactory).setup(e,t,n)},e}();t.MediaAdapterFactory=c;var u=function(){function e(t,n){var r=this;this.akkoFactory=t,this.mediaPlayerFactory=n,this.isPlaying=!1,this.onReconstructorPhaseChanged=function(t){var n=e.isReconstructorPadding(r.latestReconstructorPhase),i=e.isReconstructorPadding(t);!n&&i?r.mediaPlayer.pause():r.isPlaying&&n&&!i&&r.mediaPlayer.play(),r.refreshAdapterPhase(),r.latestReconstructorPhase=t},this.onMediaPlayerPhaseChanged=function(t){var n=e.isMediaPlayerPadding(r.latestMediaPlayerPhase),i=e.isMediaPlayerPadding(t);!n&&i?r.reconstructor.pause():r.isPlaying&&n&&!i&&r.reconstructor.play(),r.refreshAdapterPhase(),r.latestMediaPlayerPhase=t}}return Object.defineProperty(e.prototype,"phase",{get:function(){return this.adapterPhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduleTime",{get:function(){return this.reconstructor.scheduleTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uuid",{get:function(){return this.reconstructor.uuid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"triggerObject",{get:function(){return this.reconstructor.triggerObject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeDuration",{get:function(){return this.reconstructor.timeDuration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"framesCount",{get:function(){return this.reconstructor.framesCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beginTimestamp",{get:function(){return this.reconstructor.beginTimestamp},enumerable:!0,configurable:!0}),e.prototype.setup=function(e,t,n){return void 0===n&&(n={}),i(this,void 0,void 0,function(){var i,a;return o(this,function(o){switch(o.label){case 0:return this.onPhaseChangedCallback=n.onPhaseChanged,i=this,[4,this.akkoFactory.createReconstructor(e,r({},n,{onPhaseChanged:this.onReconstructorPhaseChanged}))];case 1:return i.reconstructor=o.sent(),a=this,[4,this.mediaPlayerFactory.create({uuid:e,roomToken:t,beginTimestamp:this.reconstructor.beginTimestamp,onPhaseChanged:this.onMediaPlayerPhaseChanged})];case 2:return a.mediaPlayer=o.sent(),this.adapterPhase=this.currentAdapterPhase(),this.latestReconstructorPhase=this.reconstructor.phase,this.latestMediaPlayerPhase=this.mediaPlayer.phase,[2,this]}})})},e.prototype.seekToScheduleTime=function(e){this.reconstructor.seekToScheduleTime(e),this.mediaPlayer.seekToScheduleTime(e)},e.prototype.play=function(){if(!this.isPlaying){var t=e.isMediaPlayerPadding(this.latestMediaPlayerPhase),n=e.isReconstructorPadding(this.latestReconstructorPhase);t||this.reconstructor.phase===a.ReconstructorPhase.Playing||this.reconstructor.play(),n||this.mediaPlayer.phase===s.MediaPlayerPhase.Playing||this.mediaPlayer.play(),this.isPlaying=!0}},e.prototype.pause=function(){this.isPlaying&&(this.reconstructor.phase!==a.ReconstructorPhase.Pause&&this.reconstructor.pause(),this.mediaPlayer.phase!==s.MediaPlayerPhase.Pause&&this.mediaPlayer.pause(),this.isPlaying=!1)},e.prototype.stop=function(){this.reconstructor.stop(),this.mediaPlayer.stop()},e.prototype.refreshAdapterPhase=function(){var e=this.currentAdapterPhase();e!==this.adapterPhase&&(this.adapterPhase=e,this.onPhaseChangedCallback&&this.onPhaseChangedCallback(e))},e.prototype.currentAdapterPhase=function(){return this.reconstructor.phase===a.ReconstructorPhase.WaitingFirstFrame&&this.mediaPlayer.phase===s.MediaPlayerPhase.WaitingData?a.ReconstructorPhase.WaitingFirstFrame:this.mediaPlayer.phase===s.MediaPlayerPhase.Buffering?a.ReconstructorPhase.Buffering:this.mediaPlayer.phase===s.MediaPlayerPhase.Seeking?a.ReconstructorPhase.Seeking:this.reconstructor.phase},e.isReconstructorPadding=function(e){return e===a.ReconstructorPhase.Buffering||e===a.ReconstructorPhase.Seeking},e.isMediaPlayerPadding=function(e){return e===s.MediaPlayerPhase.Buffering||e===s.MediaPlayerPhase.Seeking},e}()},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.getWholeMouseCursorDefinition=function(e){return void 0===e&&(e={}),Object.freeze(r({hand:"whiteboard-hand",selector:"whiteboard-selector",pencil:"whiteboard-pencil",eraser:"whiteboard-eraser",rectangle:"crosshair",ellipse:"crosshair",text:"text"},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.listenerNodes=[]}return Object.defineProperty(e.prototype,"isOnline",{get:function(){return navigator.onLine},enumerable:!0,configurable:!0}),e.prototype.addListener=function(e){var t={origin:e,onOffline:function(){return e.onOffline()},onOnline:function(){return e.onOnline()}};this.listenerNodes.push(t),window.addEventListener("online",t.onOnline),window.addEventListener("offline",t.onOffline)},e.prototype.removeListener=function(e){var t=this.listenerNodes.findIndex(function(t){return t.origin===e});if(-1!==t){var n=this.listenerNodes.splice(t,1)[0];window.removeEventListener("online",n.onOnline),window.removeEventListener("offline",n.onOffline)}},e}();t.NetState=r},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(12),a=n(17),s=n(35),c=n(56),u=n(179);!function(e){e[e.None=0]="None",e[e.Mouse=1]="Mouse",e[e.Pinch=2]="Pinch"}(i||(i={}));var p=function(){function e(e,t,n,o,p,h){void 0===h&&(h={});var f=this;this.deviceType=e,this.animationTickGen=t,this.camera=n,this.zoomMaxScale=o,this.zoomMinScale=p,this.viewUnderclockingInvoker=new c.UnderclockingInvoker(s.TransformLimitTimeInterval),this.state=i.None,this.pinchTouches=null,this.mouseReplacementTouch=null,this.mouseReplacementStartX=0,this.mouseReplacementStartY=0,this.springBackCentroidX=0,this.springBackCentroidY=0,this.viewTransformStartLinear=new a.LinearTransformation,this.viewTransformEndTimer=null,this.pinchStart=function(){f.camera.beginMoveOperation(),f.callbacks.beginPinch&&f.callbacks.beginPinch()},this.pinchMove=function(e){f.camera.appendTransform(e),f.callbacks.updateCameraRectangle&&f.viewUnderclockingInvoker.invoke(function(){return f.callbacks.updateCameraRectangle(f.camera.rectangle)}),f.animationTickGen.invokeOnce()},this.pinchEnd=function(e,t){f.camera.endMoveOperation(),f.springBackCentroidX=e,f.springBackCentroidY=t},this.callbacks=Object.freeze(r({},h)),this.multiFingersToleranceBlocker=new l(this.callbacks),this.pinchRecognizer=new u.PinchRecognizerImplement({onPinchStart:this.pinchStart,onPinchMove:this.pinchMove,onPinchEnd:this.pinchEnd})}return e.prototype.zoomChange=function(e){var t=this.camera.rectangle,n=t.originX+t.width/2,r=t.originY+t.height/2,i=this.camera.width/e,o=this.camera.height/e,a={originX:n-i/2,originY:r-o/2,width:i,height:o};this.camera.setRectangle(a),this.viewUnderclockingInvoker.cancel(),this.callbacks.updateCameraRectangle&&this.callbacks.updateCameraRectangle(a)},e.prototype.viewTransform=function(e){var t=this,n=(e=r({},e)).offsetX,i=void 0===n?0:n,s=e.offsetY,c=void 0===s?0:s,u=e.x,p=e.y;null===this.viewTransformEndTimer&&this.pinchStart();var l=1+.02*Math.max(e.scale,-40),h=this.camera.scale,f=this.scaleInRange(l*h)/h;this.viewTransformStartLinear.translate(i,c).translate(-u,-p).scale(f,f).translate(u,p),this.pinchMove(this.viewTransformStartLinear),null!==this.viewTransformEndTimer&&clearTimeout(this.viewTransformEndTimer),this.viewTransformEndTimer=setTimeout(function(){t.pinchEnd(u,p),t.viewTransformStartLinear=new a.LinearTransformation,t.viewTransformEndTimer=null,t.deviceType===o.DeviceType.Touch&&t.springBackIfScaleOverRange()},300)},e.prototype.touchStart=function(e){switch(this.state){case i.None:this.multiFingersToleranceBlocker.startOperation(),1===e.length?(this.state=i.Mouse,this.mouseReplacementStartX=e[0].x,this.mouseReplacementStartY=e[0].y,this.mouseReplacementTouch={identifier:e[0].identifier,previousX:this.mouseReplacementStartX,previousY:this.mouseReplacementStartY},this.multiFingersToleranceBlocker.mouseDown(this.convertToMouseEvent(e[0]))):(this.state=i.Pinch,this.pinchTouches=e.map(function(e){return{x:e.x,y:e.y,identifier:e.identifier}}),this.pinchRecognizer.handleTouchEvents(this.pinchTouches,this.currentCentroidPoint()));break;case i.Mouse:this.pinchTouches=[{x:this.mouseReplacementTouch.previousX,y:this.mouseReplacementTouch.previousY,identifier:this.mouseReplacementTouch.identifier}],this.multiFingersToleranceBlocker.unknownIsMultiFingers&&(this.multiFingersToleranceBlocker.assertMultiFingers(),this.mouseReplacementTouch=null),this.pushToPinchTouches(e),this.pinchRecognizer.handleTouchEvents(this.pinchTouches,this.currentCentroidPoint()),this.state=i.Pinch;break;case i.Pinch:this.pushToPinchTouches(e),this.pinchRecognizer.handleTouchEvents(this.pinchTouches,this.currentCentroidPoint())}},e.prototype.touchMove=function(e){var t=this;switch(this.refreshFirstPressedTouch(e),this.state){case i.Mouse:var n=e.find(function(e){return e.identifier===t.mouseReplacementTouch.identifier});this.multiFingersToleranceBlocker.mouseMove(this.convertToMouseEvent(n));break;case i.Pinch:for(var r=function(t){var n=e.find(function(e){return e.identifier===t.identifier});n&&(t.x=n.x,t.y=n.y)},o=0,a=this.pinchTouches;o<a.length;o++){r(a[o])}this.pinchRecognizer.handleTouchEvents(this.pinchTouches,this.currentCentroidPoint())}},e.prototype.touchEnd=function(e){var t=this;this.mouseReplacementTouch&&((s=e.find(function(e){return e.identifier===t.mouseReplacementTouch.identifier}))&&(this.multiFingersToleranceBlocker.mouseUp(this.convertToMouseEvent(s)),this.springBackCentroidX=this.mouseReplacementTouch.previousX,this.springBackCentroidY=this.mouseReplacementTouch.previousY,this.mouseReplacementTouch=null));switch(this.state){case i.Mouse:this.multiFingersToleranceBlocker.assertSingleFinger(),this.completeOperation();break;case i.Pinch:this.multiFingersToleranceBlocker.assertMultiFingers();for(var n=function(e){var t=r.pinchTouches.findIndex(function(t){return t.identifier===e.identifier});-1!==t&&r.pinchTouches.splice(t,1)},r=this,o=0,a=e;o<a.length;o++){var s;n(s=a[o])}this.mouseReplacementTouch&&1===this.pinchTouches.length?(this.state=i.Mouse,this.pinchRecognizer.handleTouchEvents([],this.currentCentroidPoint()),this.pinchTouches=null):0===this.pinchTouches.length?(this.pinchRecognizer.handleTouchEvents(this.pinchTouches,this.currentCentroidPoint()),this.pinchTouches=null,this.completeOperation()):this.pinchRecognizer.handleTouchEvents(this.pinchTouches,this.currentCentroidPoint())}},e.prototype.touchCancel=function(e){this.touchEnd(e)},e.prototype.refreshFirstPressedTouch=function(e){if(this.mouseReplacementTouch){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(r.identifier===this.mouseReplacementTouch.identifier){this.mouseReplacementTouch.previousX=r.x,this.mouseReplacementTouch.previousY=r.y;break}}if(this.multiFingersToleranceBlocker.unknownIsMultiFingers){var i=this.mouseReplacementTouch.previousX-this.mouseReplacementStartX,o=this.mouseReplacementTouch.previousY-this.mouseReplacementStartY;i*i+o*o>=9&&this.multiFingersToleranceBlocker.assertSingleFinger()}}},e.prototype.pushToPinchTouches=function(e){if(this.pinchTouches)for(var t=function(e){n.pinchTouches.some(function(t){return t.identifier===e.identifier})||n.pinchTouches.push({x:e.x,y:e.y,identifier:e.identifier})},n=this,r=0,i=e;r<i.length;r++){t(i[r])}},e.prototype.completeOperation=function(){this.state=i.None,this.multiFingersToleranceBlocker.unknownIsMultiFingers&&this.multiFingersToleranceBlocker.assertMultiFingers(),this.deviceType===o.DeviceType.Touch&&this.springBackIfScaleOverRange()},e.prototype.springBackIfScaleOverRange=function(){var e=this.camera.scale,t=Math.min(this.zoomMaxScale,Math.max(this.zoomMinScale,e));if(t!==e){var n=this.camera.calculatePointInScreenToScene({x:this.springBackCentroidX,y:this.springBackCentroidY}),r=this.camera.width/t,i=this.camera.height/t,o=this.camera.rectangle,a={originX:n.x-e/t*(n.x-o.originX),originY:n.y-e/t*(n.y-o.originY),width:r,height:i};this.viewUnderclockingInvoker.cancel(),this.camera.setRectangle(a),this.callbacks.updateCameraRectangle&&this.callbacks.updateCameraRectangle(a)}},e.prototype.convertToMouseEvent=function(e){return{x:e.x,y:e.y,targetsMap:e.targetsMap}},e.prototype.currentCentroidPoint=function(){return this.mouseReplacementTouch?{x:this.mouseReplacementTouch.previousX,y:this.mouseReplacementTouch.previousY}:void 0},e.prototype.scaleInRange=function(e){return e>this.zoomMaxScale?this.zoomMaxScale:e<this.zoomMinScale?this.zoomMinScale:e},e}();t.EventAndViewSorter=p;var l=function(){function e(e){var t=this;this.callbacks=e,this.operationBuffer=[],this.willBlockOperation=!1,this.flushingOperationBufferTimer=null,this.flushOperationBuffer=function(){if(t.operationBuffer){for(var e=0,n=t.operationBuffer;e<n.length;e++){(0,n[e])()}t.operationBuffer.splice(0,t.operationBuffer.length),t.willBlockOperation=!1}t.flushingOperationBufferTimer=null}}return Object.defineProperty(e.prototype,"unknownIsMultiFingers",{get:function(){return this.willBlockOperation},enumerable:!0,configurable:!0}),e.prototype.startOperation=function(){this.willBlockOperation=!0,this.flushingOperationBufferTimer=setTimeout(this.flushOperationBuffer,300)},e.prototype.assertMultiFingers=function(){this.operationBuffer.splice(0,this.operationBuffer.length),this.willBlockOperation=!1,null!==this.flushingOperationBufferTimer&&(clearTimeout(this.flushingOperationBufferTimer),this.flushingOperationBufferTimer=null)},e.prototype.assertSingleFinger=function(){null!==this.flushingOperationBufferTimer&&clearTimeout(this.flushingOperationBufferTimer),this.flushOperationBuffer()},e.prototype.mouseDown=function(e){var t=this;this.callbacks.mouseDown&&(this.willBlockOperation?this.operationBuffer.push(function(){return t.callbacks.mouseDown(e)}):this.callbacks.mouseDown(e))},e.prototype.mouseUp=function(e){var t=this;this.callbacks.mouseUp&&(this.willBlockOperation?this.operationBuffer.push(function(){return t.callbacks.mouseUp(e)}):this.callbacks.mouseUp(e))},e.prototype.mouseMove=function(e){var t=this;this.callbacks.mouseMove&&(this.willBlockOperation?this.operationBuffer.push(function(){return t.callbacks.mouseMove(e)}):this.callbacks.mouseMove(e))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(104);var i=function(){function e(e){void 0===e&&(e=r.Matrix3D.E()),this._matrix=e}return e.createBy=function(t){var n=t.deltaX,r=t.deltaY,i=t.scaleX,o=t.scaleY;return(new e).scale(i,o).translate(n,r)},e.prototype.clone=function(){return new e(this._matrix.clone())},Object.defineProperty(e.prototype,"matrix",{get:function(){return this._matrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inverse",{get:function(){return new e(r.Matrix.inverseOf3D(this._matrix))},enumerable:!0,configurable:!0}),e.prototype.translate=function(e,t){return this._matrix=r.Matrix.multiply(this._matrix,function(e,t){return r.Matrix3D.create(1,0,e,0,1,t,0,0,1)}(e,t)),this},e.prototype.scale=function(e,t){return this._matrix=r.Matrix.multiply(this._matrix,function(e,t){return r.Matrix3D.create(e,0,0,0,t,0,0,0,1)}(e,t)),this},e.link=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=void 0,o=0,a=t;o<a.length;o++){var s=a[o];i=i?r.Matrix.multiply(i,s._matrix):s._matrix}return new e(i)},e.prototype.transformPoint=function(e,t){var n=r.Matrix.multiply(r.Vector3D.create(e,t,1),this._matrix),i=n.get(0,2);return{x:n.get(0,0)/i,y:n.get(0,1)/i}},Object.defineProperty(e.prototype,"transformationResult",{get:function(){var e=r.Matrix.multiply(r.Vector3D.create(0,0,1),this._matrix),t=r.Matrix.multiply(r.Vector3D.create(1,1,1),this._matrix),n=e.get(0,2),i=t.get(0,2),o=e.get(0,0)/n,a=e.get(0,1)/n;return{deltaX:o,deltaY:a,scaleX:t.get(0,0)/i-o,scaleY:t.get(0,1)/i-a}},enumerable:!0,configurable:!0}),e.prototype.standardize=function(){var e=this.transformationResult,t=e.deltaX,n=e.deltaY,i=e.scaleX,o=e.scaleY;return this._matrix=r.Matrix3D.E(),this.scale(i,o),this.translate(t,n),this},e}();t.LinearTransformation=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneToPlaneObject=function e(t){if("object"==typeof t&&null!==t){if(t instanceof Array){for(var n=[],r=0;r<t.length;++r)n[r]=e(t[r]);return n}var i={};for(var o in t)i[o]=e(t[o]);return i}return t},t.commitModify=function(e,t){var n={};for(var r in e)n[r]=r in t?t[r]:e[r];return n},t.copyValue=function e(t){if("object"==typeof t){if(t instanceof Array)return t.map(function(t){return e(t)});var n={};for(var r in t){var i=e(t[r]);void 0!==i&&(n[r]=i)}return n}return"function"==typeof t?void 0:t},t.checkValueIsEquals=function e(t,n){if(t===n)return!0;var r=typeof t;if(r!==typeof n||"object"!==r)return!1;if(t instanceof Array&&n instanceof Array){if(t.length!==n.length)return!1;for(var i=0;i<t.length;++i)if(!e(t[i],n[i]))return!1}else if(t.constructor===Object&&n.constructor===Object){for(var o in t)if(!e(t[o],n[o]))return!1;for(var o in n)if(!(o in t))return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=function(){function e(e){this._bundle=Object.assign({},e)}return Object.defineProperty(e.prototype,"bundle",{get:function(){return this._bundle},enumerable:!0,configurable:!0}),e.prototype.setAndCompare=function(e){var t={};for(var n in e){var i=this._bundle[n],o=e[n];this._bundle[n]=o,r.checkValueIsEquals(i,o)||(t[n]={origin:i,target:o})}return t},e}();t.DiffBundle=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=function(){function e(e){this.callbacks=e,this.previousTouchesCount=0,this.originCentroidX=0,this.originCentroidY=0,this.originEccentricity=1,this.basicLinear=new r.LinearTransformation,this.currentLinear=new r.LinearTransformation,this.centroidX=0,this.centroidY=0}return e.prototype.resetTouchInformation=function(){this.previousTouchesCount=0,this.originCentroidX=0,this.originCentroidY=0,this.originEccentricity=1,this.basicLinear=new r.LinearTransformation,this.currentLinear=new r.LinearTransformation},Object.defineProperty(e.prototype,"linear",{get:function(){return r.LinearTransformation.link(this.basicLinear,this.currentLinear)},enumerable:!0,configurable:!0}),e.prototype.handleTouchEvents=function(e,t){0===this.previousTouchesCount&&e.length>0&&this.resetTouchInformation(),this.refreshWithTouches(e,t),0===this.previousTouchesCount&&e.length>0&&this.callbacks.onPinchStart(),this.previousTouchesCount>0&&0===e.length?(this.resetTouchInformation(),this.callbacks.onPinchEnd(this.centroidX,this.centroidY)):this.callbacks.onPinchMove(this.linear),this.previousTouchesCount=e.length},e.prototype.refreshWithTouches=function(e,t){if(0!==e.length){if(t)this.centroidX=t.x,this.centroidY=t.y;else{for(var n=0,i=0,o=0,a=e;o<a.length;o++){var s=a[o];n+=h=s.x,i+=f=s.y}this.centroidX=n/e.length,this.centroidY=i/e.length}for(var c=0,u=0,p=e;u<p.length;u++){var l=p[u],h=l.x,f=l.y;n=h-this.centroidX,i=f-this.centroidY;c+=Math.sqrt(n*n+i*i)}0===c&&(c=1),this.previousTouchesCount!==e.length&&(this.originCentroidX=this.centroidX,this.originCentroidY=this.centroidY,this.originEccentricity=c,this.basicLinear=r.LinearTransformation.link(this.basicLinear,this.currentLinear));var d=this.centroidX-this.originCentroidX,y=this.centroidY-this.originCentroidY,g=c/this.originEccentricity;this.currentLinear=(new r.LinearTransformation).translate(d,y).translate(-this.centroidX,-this.centroidY).scale(g,g).translate(this.centroidX,this.centroidY)}},e}();t.PinchRecognizerImplement=i},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(56),a=n(35),s=function(){function e(e){this.latestTargetsMap={},this.latestHitTestIdentifies=[],this.isHover=!0,this.underclockingInvoker=new o.UnderclockingInvoker(a.HoverMouseEventLimitTimeInterval),this.params=r({},e)}return e.prototype.fireMouseEvent=function(e,t,n,r){var i=this,o=this.params,a=o.hitTest,s=o.fireMouseEvent,c=a(t,n);this.updateHoverState(e),this.isHover&&"onMouseMove"===e&&!this.isHitTestIdentifiesDifferent(c)?(this.latestTargetsMap=r,this.underclockingInvoker.invoke(function(){s(e,t,n,i.latestTargetsMap,c)})):(this.latestTargetsMap={},this.underclockingInvoker.cancel(),s(e,t,n,r,c))},e.prototype.updateHoverState=function(e){"onMouseDown"===e?this.isHover=!1:"onMouseUp"===e&&(this.isHover=!0)},e.prototype.isHitTestIdentifiesDifferent=function(e){var t=this.latestHitTestIdentifies.length!==e.length;if(!t)for(var n=0;n<e.length;++n){var r=e[n],o=this.latestHitTestIdentifies[n];if(t=!i.isIdentifierEquals(r,o))break}return t},e}();t.HoverFrequencyManager=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(106),o=function(){function e(e){var t=this;this.cursorNodes={},this.visibleCursorViews={},this.animationTickGen=e.animationTickGen,this.camera=e.camera,this.willHideObserver=e.willHideObserver,this.onCursorViewsUpdate=e.onCursorViewsUpdate,this.refreshMemberDisplayers(e.memberDisplayers,e.observerId),this.animationTickGen.onAfterTick=function(){return t.refreshVisibleCursorViews()}}return Object.defineProperty(e.prototype,"cursorViews",{get:function(){var e=[];for(var t in this.cursorNodes){var n=this.cursorNodes[t];n&&n.isVisible&&e.push(n.cursorView())}return e},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(var e in this.cursorNodes)this.cursorNodes[e].dispose()},e.prototype.refreshWhoFixedOnScreen=function(e,t){for(var n=this.isFollowerFixedOnScreen(e,t),r=0,i=e;r<i.length;r++){var o=i[r],a=o.memberId,s=this.cursorNodes[a];s&&s.fixedOnScreen&&s.updateMemberDisplayer(o,n,!0)}},e.prototype.refreshMemberDisplayers=function(e,t){for(var n=this.isFollowerFixedOnScreen(e,t),r={},o=0,a=e;o<a.length;o++){var s=a[o];if(!this.willHideObserver||s.memberId!==t){var c=s.memberId,u=this.cursorNodes[c];u?u.updateMemberDisplayer(s,n,s.isPressed):u=new i.CursorNode(this.camera,this.animationTickGen,s,n),r[c]=u,delete this.cursorNodes[c]}}for(var c in this.cursorNodes)this.cursorNodes[c].dispose();this.cursorNodes=r,this.refreshVisibleCursorViews()},e.prototype.refreshVisibleCursorViews=function(){var e=null,t={};for(var n in this.cursorNodes){var r=this.cursorNodes[n];if(r.isVisible){var i=r.cursorView(),o=this.visibleCursorViews[n];o?(delete this.visibleCursorViews[n],o.x===i.x&&o.y===i.y||(e=e||this.createDescr()).updateSet.push(i)):(e=e||this.createDescr()).appearSet.push(i),t[n]=i}}for(var n in this.visibleCursorViews){var a=this.visibleCursorViews[n];(e=e||this.createDescr()).disappearSet.push(a)}if(this.visibleCursorViews=t,e)try{this.onCursorViewsUpdate(e)}catch(e){console.error(e)}},e.prototype.createDescr=function(){return{appearSet:[],updateSet:[],disappearSet:[]}},e.prototype.isFollowerFixedOnScreen=function(e,t){for(var n=void 0,i=0,o=e;i<o.length;i++){var a=o[i];if(a.memberId===t){n=a;break}}return!!n&&(n.mode===r.ViewMode.Broadcaster||n.mode===r.ViewMode.Follower)},e}();t.CursorViews=o},function(e,t,n){"use strict";function r(e){var t=Math.abs(e),n=1/(1+t/2),r=n*Math.exp(-t*t-1.26551223+n*(1.00002368+n*(.37409196+n*(.09678418+n*(n*(.27886807+n*(n*(1.48851587+n*(.17087277*n-.82215223))-1.13520398))-.18628806)))));return e>=0?r:2-r}function i(e,t){return new a(e,t)}function o(e,t){return i(t/e,1/e)}Object.defineProperty(t,"__esModule",{value:!0}),t.gaussian=i;var a=function(){function e(e,t){this.mean=e,this.variance=t,this.standardDeviation=Math.sqrt(t)}return e.prototype.pdf=function(e){var t=this.standardDeviation*Math.sqrt(2*Math.PI);return Math.exp(-Math.pow(e-this.mean,2)/(2*this.variance))/t},e.prototype.cdf=function(e){return.5*r(-(e-this.mean)/(this.standardDeviation*Math.sqrt(2)))},e.prototype.ppf=function(e){return this.mean-this.standardDeviation*Math.sqrt(2)*function(e){if(e>=2)return-100;if(e<=0)return 100;for(var t=e<1?e:2-e,n=Math.sqrt(-2*Math.log(t/2)),i=-.70711*((2.30753+.27061*n)/(1+n*(.99229+.04481*n))-n),o=0;o<2;o++){var a=r(i)-t;i+=a/(1.1283791670955126*Math.exp(-i*i)-i*a)}return e<1?i:-i}(2*e)},e.prototype.mul=function(e){if("number"==typeof e)return this.scale(e);var t=1/this.variance,n=1/e.variance;return o(t+n,t*this.mean+n*e.mean)},e.prototype.div=function(e){if("number"==typeof e)return this.scale(1/e);var t=1/this.variance,n=1/e.variance;return o(t-n,t*this.mean-n*e.mean)},e.prototype.add=function(e){return i(this.mean+e.mean,this.variance+e.variance)},e.prototype.sub=function(e){return i(this.mean-e.mean,this.variance+e.variance)},e.prototype.scale=function(e){return i(this.mean*e,this.variance*e*e)},e}();t.Gaussian=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(184),o=n(59),a=function(){function e(t,n){var r=this;this.isMovingBySelf=!1,this._width=0,this._height=0,this.cleanAllCache=function(){r._rectangle=void 0,r._transform=void 0,r._linear=void 0,r._inverseLinear=void 0},(n=n.createChildTickBeforeMe()).onAfterTick=this.cleanAllCache,this.cameraAnimation=new i.CameraAnimation(n,{centerX:0,centerY:0,scale:1}),this.basePixelWidth=e.countBasePixelWidth(t)}return e.countBasePixelWidth=function(e){switch(e){case o.ScreenType.Desktop:case o.ScreenType.Phone:case o.ScreenType.Pad:case o.ScreenType.TV:return 2.42;default:return 1}},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.setSize=function(e,t){this._width=e,this._height=t,this.cleanAllCache()},Object.defineProperty(e.prototype,"pixelWidth",{get:function(){return this.scale*this.basePixelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rectangle",{get:function(){return this._rectangle||(this._rectangle=this.viewToRectangle(this.cameraAnimation.view)),this._rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linear",{get:function(){if(!this._linear){var e=this.rectangle,t=e.originX,n=e.originY,i=e.width,o=e.height,a=0===i?1:this._width/i,s=0===o?1:this._height/o,c=Math.min(a,s);this._linear=(new r.LinearTransformation).translate(-t,-n).scale(c,c)}return this._linear},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inverseLinear",{get:function(){return this._inverseLinear||(this._inverseLinear=this.linear.inverse),this._inverseLinear},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform||(this._transform=this.linear.transformationResult),this._transform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){var e=this.rectangle,t=e.width,n=e.height,r=0===t?1:this.width/t,i=0===n?1:this.height/n;return Math.max(r,i)},enumerable:!0,configurable:!0}),e.prototype.calculatePointInScreenToScene=function(e){return this.inverseLinear.transformPoint(e.x,e.y)},e.prototype.beginMoveOperation=function(){this.cameraAnimation.stop(),this.moveBeginLinear=this.linear,this.isMovingBySelf=!0},e.prototype.appendTransform=function(e){this._linear=r.LinearTransformation.link(this.moveBeginLinear,e),this._inverseLinear=this._linear.inverse,this._rectangle=this.inverseLinearToRectangle(this._inverseLinear),this._transform=void 0},e.prototype.endMoveOperation=function(){this.moveBeginLinear=void 0,this.isMovingBySelf=!1,this.cameraAnimation.moveToViewRightNow(this.rectangleToView(this.rectangle)),this.blockedTargetView&&(this.cameraAnimation.moveToView(this.blockedTargetView),this.blockedTargetView=void 0)},e.prototype.setRectangle=function(e,t){void 0===t&&(t=!0);var n=this.rectangleToView(e);this.isMovingBySelf?this.blockedTargetView=n:t?this.cameraAnimation.moveToView(n):this.cameraAnimation.moveToViewRightNow(n)},e.prototype.inverseLinearToRectangle=function(e){var t=e.transformPoint(0,0),n=e.transformPoint(this._width,this._height);return{originX:t.x,originY:t.y,width:n.x-t.x,height:n.y-t.y}},e.prototype.rectangleToView=function(e){var t=e.originX,n=e.originY,r=e.width,i=e.height,o=0===this._width||0===r?1:this._width/r,a=0===this._height||0===i?1:this._height/i;return{centerX:t+r/2,centerY:n+i/2,scale:Math.min(o,a)}},e.prototype.viewToRectangle=function(e){var t=e.centerX,n=e.centerY,r=e.scale,i=this._width/r,o=this._height/r;return{originX:t-i/2,originY:n-o/2,width:i,height:o}},e}();t.Camera=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(107),i=function(){function e(t,n){this.referPoint=[],this.referPoint[0]=n.centerX,this.referPoint[1]=n.centerY,this.referPoint[2]=n.scale*e.kScale,this.spaceSpring=e.spaceSpringFactory.create(t,[0,0,0])}return e.prototype.stop=function(){this.spaceSpring.stop()},Object.defineProperty(e.prototype,"view",{get:function(){return{centerX:this.referPoint[0]+this.spaceSpring.point[0],centerY:this.referPoint[1]+this.spaceSpring.point[1],scale:(this.referPoint[2]+this.spaceSpring.point[2])/e.kScale}},enumerable:!0,configurable:!0}),e.prototype.moveToView=function(t){var n=[this.referPoint[0]-t.centerX,this.referPoint[1]-t.centerY,this.referPoint[2]-t.scale*e.kScale];this.referPoint[0]=t.centerX,this.referPoint[1]=t.centerY,this.referPoint[2]=t.scale*e.kScale,this.spaceSpring.moveToAndChangeCoordinate(n,[0,0,0])},e.prototype.moveToViewRightNow=function(t){this.referPoint[0]=t.centerX,this.referPoint[1]=t.centerY,this.referPoint[2]=t.scale*e.kScale,this.spaceSpring.moveRightNow([0,0,0])},e.kScale=700,e.spaceSpringFactory=new r.SpaceSpringFactory({matchingDistance:2,zeroSpeed:.55,kDistance:.17,velocityDamping:.55,heavyDampingRadius:15,heavyDampingSpeed:.25,pedesisSpeedMean:0,pedesisSpeedVariance:0},{matchingDistance:2,zeroSpeed:.55,kDistance:.12,velocityDamping:.35,heavyDampingRadius:15,heavyDampingSpeed:.35,pedesisSpeedMean:0,pedesisSpeedVariance:0}),e}();t.CameraAnimation=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.listeners={},this.waitingNodes=[]}return e.prototype.dispatchMagixEvent=function(e){var t=this.listeners[e.event];if(t)for(var n=0,r=t;n<r.length;n++){var i=r[n];try{i(e)}catch(e){console.log(e)}}var o=this.waitingNodes.findIndex(function(t){return!!t.filter(e)&&(t.resolve(e),!0)});-1!==o&&this.waitingNodes.splice(o,1)},e.prototype.addMagiEventListener=function(e,t){var n=this.listeners[e];n||(n=[],this.listeners[e]=n),n.push(t)},e.prototype.removeMagixEventListener=function(e,t){if(t){var n=this.listeners[e];if(n){var r=n.indexOf(t);-1!==r&&(n.splice(r),0===n.length&&delete this.listeners[e])}}else delete this.listeners[e]},e.prototype.waitMagixEvent=function(e){var t=this;return new Promise(function(n){t.waitingNodes.push({resolve:n,filter:e})})},e}();t.MagixEventsManager=r},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(187),c=function(){function e(){this.isBrowserSupportObjectUrl=!0}return e.prototype.make=function(e,t){return i(this,void 0,void 0,function(){var n,r,i;return o(this,function(o){switch(o.label){case 0:return n=this.getScreenshotXml(e,t),[4,this.loadImageWithXml(n)];case 1:return r=o.sent(),[4,this.imageToBlob(r,t)];case 2:if(!(i=o.sent()))throw new Error("can't generate Blob with canvas");return[2,i]}})})},e.prototype.getScreenshotXml=function(e,t){var n,r,i=this,o=t.sceneIndex,c=t.width,u=t.height,p=t.paddingLeft,l=void 0===p?0:p,h=t.paddingTop,f=void 0===h?0:h,d=t.paddingRight,y=void 0===d?0:d,g=t.paddingBottom,m=c-l-y,b=u-f-(void 0===g?0:g);if(m<=0||b<=0)throw new Error("can't generate screenshot, illegality size");t.worldView?(n=t.worldView,r=t.worldView):(n=e.getShellRectangle(o),r=void 0);var v=e.renderSvg(o,r),T=n.width/m,S=n.height/b,x=Math.max(T,S),E=c*x,w=u*x,P=(E-n.width)/2,k=(w-n.height)/2,C=n.originX-P+","+(n.originY-k)+","+E+","+w;return s.renderToStaticMarkup(a.createElement("svg",{width:c,height:u,viewBox:C,fill:"none",version:"1.2",xmlns:"http://www.w3.org/2000/svg"},v.map(function(e){return i.filterImageSvgNode(e)})))},e.prototype.loadImageWithXml=function(e){return i(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:if(!this.isBrowserSupportObjectUrl)return[3,7];t=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(t),r.label=1;case 1:return r.trys.push([1,3,5,6]),[4,this.loadImageWithUrl(n)];case 2:return[2,r.sent()];case 3:return r.sent(),this.isBrowserSupportObjectUrl=!1,[4,this.loadImageWithUrl("data:image/svg+xml,"+encodeURIComponent(e))];case 4:return[2,r.sent()];case 5:return URL.revokeObjectURL(n),[7];case 6:return[3,9];case 7:return[4,this.loadImageWithUrl("data:image/svg+xml,"+encodeURIComponent(e))];case 8:return[2,r.sent()];case 9:return[2]}})})},e.prototype.loadImageWithUrl=function(e){return new Promise(function(t,n){var r=document.createElement("img");r.onload=function(){return t(r)},r.onerror=function(e){var t=e.message;return n(new Error(t))},r.src=e})},e.prototype.imageToBlob=function(e,t){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var r=n.getContext("2d");if(!r)throw new Error("canvas not support 2d context");if(r.drawImage(e,0,0),t.blob){var i=t.blob,o=i.type,a=i.args;return new Promise(function(e){return n.toBlob.apply(n,[e,o].concat(a))})}return new Promise(function(e){return n.toBlob(e)})},e.prototype.filterImageSvgNode=function(e){var t=this;if("object"!=typeof e||null===e)return e;if(e instanceof Array)return e.map(function(e){return t.filterImageSvgNode(e)});if(a.isValidElement(e)){if("image"===e.type)return null;var n=r({},e.props);delete n.type;var i=n.children;return i?delete n.children:i=[],i instanceof Array||(i=[i]),i=this.filterImageSvgNode(i),a.cloneElement.apply(a,[e,n].concat(i))}return null},e}();t.ScreenshotMaker=c},function(e,t,n){"use strict";e.exports=n(188)},function(e,t,n){"use strict";
/** @license React v16.4.2
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(42),i=n(31),o=n(1),a=n(44),s=n(43),c=n(189),u=n(191);function p(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var l="function"==typeof Symbol&&Symbol.for,h=l?Symbol.for("react.portal"):60106,f=l?Symbol.for("react.fragment"):60107,d=l?Symbol.for("react.strict_mode"):60108,y=l?Symbol.for("react.profiler"):60114,g=l?Symbol.for("react.provider"):60109,m=l?Symbol.for("react.context"):60110,b=l?Symbol.for("react.async_mode"):60111,v=l?Symbol.for("react.forward_ref"):60112,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S=Object.prototype.hasOwnProperty,x={},E={};function w(e){return!!S.call(E,e)||!S.call(x,e)&&(T.test(e)?E[e]=!0:(x[e]=!0,!1))}function P(e,t,n,r){if(null===t||void 0===t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function k(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new k(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];C[t]=new k(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new k(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){C[e]=new k(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new k(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new k(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){C[e]=new k(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){C[e]=new k(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){C[e]=new k(e,5,!1,e.toLowerCase(),null)});var O=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(O,_);C[t]=new k(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(O,_);C[t]=new k(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(O,_);C[t]=new k(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),C.tabIndex=new k("tabIndex",1,!1,"tabindex",null);var R=/["'&<>]/;function M(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=R.exec(e);if(t){var n,r="",i=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==n&&(r+=e.substring(i,n)),i=n+1,r+=t}e=i!==n?r+e.substring(i,n):r}return e}var I={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function N(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var A={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},j=i({menuitem:!0},A),F={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D=["Webkit","ms","Moz","O"];Object.keys(F).forEach(function(e){D.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),F[t]=F[e]})});var B=o.Children.toArray,W=a.thatReturns("");a.thatReturns("");var U={listing:!0,pre:!0,textarea:!0};function z(e){return"string"==typeof e?e:"function"==typeof e?e.displayName||e.name:null}var L=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,V={},G=u(function(e){return c(e)});var H=Object.prototype.hasOwnProperty,X={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Y(e,t){void 0===e&&p("152",z(t)||"Component")}function K(e,t){function n(n,r){var o=function(e,t){if(e=e.contextTypes){var n,r={};for(n in e)r[n]=t[n];t=r}else t=s;return t}(r,t),a=[],c=!1,u={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===a)return null},enqueueReplaceState:function(e,t){c=!0,a=[t]},enqueueSetState:function(e,t){if(null===a)return null;a.push(t)}},l=void 0;if(r.prototype&&r.prototype.isReactComponent){if(l=new r(n.props,o,u),"function"==typeof r.getDerivedStateFromProps){var h=r.getDerivedStateFromProps.call(null,n.props,l.state);null!=h&&(l.state=i({},l.state,h))}}else if(null==(l=r(n.props,o,u))||null==l.render)return void Y(e=l,r);if(l.props=n.props,l.context=o,l.updater=u,void 0===(u=l.state)&&(l.state=u=null),"function"==typeof l.UNSAFE_componentWillMount||"function"==typeof l.componentWillMount)if("function"==typeof l.componentWillMount&&"function"!=typeof r.getDerivedStateFromProps&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&"function"!=typeof r.getDerivedStateFromProps&&l.UNSAFE_componentWillMount(),a.length){u=a;var f=c;if(a=null,c=!1,f&&1===u.length)l.state=u[0];else{h=f?u[0]:l.state;var d=!0;for(f=f?1:0;f<u.length;f++){var y=u[f];null!=(y="function"==typeof y?y.call(l,h,n.props,o):y)&&(d?(d=!1,h=i({},h,y)):i(h,y))}l.state=h}}else a=null;if(Y(e=l.render(),r),n=void 0,"function"==typeof l.getChildContext&&"object"==typeof(o=r.childContextTypes))for(var g in n=l.getChildContext())g in o||p("108",z(r)||"Unknown",g);n&&(t=i({},t,n))}for(;o.isValidElement(e);){var r=e,a=r.type;if("function"!=typeof a)break;n(r,a)}return{child:e,context:t}}var q=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");o.isValidElement(t)?t.type!==f?t=[t]:(t=t.props.children,t=o.isValidElement(t)?[t]:B(t)):t=B(t),this.stack=[{type:null,domNamespace:I.html,children:t,childIndex:0,context:s,footer:""}],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=n,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}return e.prototype.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,r=n._currentValue;this.contextStack[t]=n,this.contextValueStack[t]=r,n._currentValue=e.props.value},e.prototype.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t._currentValue=n},e.prototype.read=function(e){if(this.exhausted)return null;for(var t="";t.length<e;){if(0===this.stack.length){this.exhausted=!0;break}var n=this.stack[this.stack.length-1];if(n.childIndex>=n.children.length){var r=n.footer;t+=r,""!==r&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===n.type?this.currentSelectValue=null:null!=n.type&&null!=n.type.type&&n.type.type.$$typeof===g&&this.popProvider(n.type)}else r=n.children[n.childIndex++],t+=this.render(r,n.context,n.domNamespace)}return t},e.prototype.render=function(e,t,n){if("string"==typeof e||"number"==typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?M(n):this.previousWasTextNode?"\x3c!-- --\x3e"+M(n):(this.previousWasTextNode=!0,M(n));if(e=(t=K(e,t)).child,t=t.context,null===e||!1===e)return"";if(!o.isValidElement(e)){if(null!=e&&null!=e.$$typeof){var r=e.$$typeof;r===h&&p("257"),p("258",r.toString())}return e=B(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}if("string"==typeof(r=e.type))return this.renderDOM(e,t,n);switch(r){case d:case b:case y:case f:return e=B(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}if("object"==typeof r&&null!==r)switch(r.$$typeof){case v:return e=B(r.render(e.props,e.ref)),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case g:return n={type:e,domNamespace:n,children:r=B(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case m:return r=B(e.props.children(e.type._currentValue)),this.stack.push({type:e,domNamespace:n,children:r,childIndex:0,context:t,footer:""}),""}p("130",null==r?r:typeof r,"")},e.prototype.renderDOM=function(e,t,n){var r=e.type.toLowerCase();n===I.html&&N(r),V.hasOwnProperty(r)||(L.test(r)||p("65",r),V[r]=!0);var a=e.props;if("input"===r)a=i({type:void 0},a,{defaultChecked:void 0,defaultValue:void 0,value:null!=a.value?a.value:a.defaultValue,checked:null!=a.checked?a.checked:a.defaultChecked});else if("textarea"===r){var s=a.value;if(null==s){s=a.defaultValue;var c=a.children;null!=c&&(null!=s&&p("92"),Array.isArray(c)&&(1>=c.length||p("93"),c=c[0]),s=""+c),null==s&&(s="")}a=i({},a,{value:void 0,children:""+s})}else if("select"===r)this.currentSelectValue=null!=a.value?a.value:a.defaultValue,a=i({},a,{value:void 0});else if("option"===r){c=this.currentSelectValue;var u=function(e){var t="";return o.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(t+=e)}),t}(a.children);if(null!=c){var l=null!=a.value?a.value+"":u;if(s=!1,Array.isArray(c)){for(var h=0;h<c.length;h++)if(""+c[h]===l){s=!0;break}}else s=""+c===l;a=i({selected:void 0,children:void 0},a,{selected:s,children:u})}}for(b in(s=a)&&(j[r]&&(null!=s.children||null!=s.dangerouslySetInnerHTML)&&p("137",r,W()),null!=s.dangerouslySetInnerHTML&&(null!=s.children&&p("60"),"object"==typeof s.dangerouslySetInnerHTML&&"__html"in s.dangerouslySetInnerHTML||p("61")),null!=s.style&&"object"!=typeof s.style&&p("62",W())),s=a,c=this.makeStaticMarkup,u=1===this.stack.length,l="<"+e.type,s)if(H.call(s,b)){var f=s[b];if(null!=f){if("style"===b){h=void 0;var d="",y="";for(h in f)if(f.hasOwnProperty(h)){var g=0===h.indexOf("--"),m=f[h];null!=m&&(d+=y+G(h)+":",y=h,d+=g=null==m||"boolean"==typeof m||""===m?"":g||"number"!=typeof m||0===m||F.hasOwnProperty(y)&&F[y]?(""+m).trim():m+"px",y=";")}f=d||null}h=null;e:if(g=r,m=s,-1===g.indexOf("-"))g="string"==typeof m.is;else switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":g=!1;break e;default:g=!0}g?X.hasOwnProperty(b)||(h=w(h=b)&&null!=f?h+'="'+M(f)+'"':""):(g=b,h=f,f=C.hasOwnProperty(g)?C[g]:null,(m="style"!==g)&&(m=null!==f?0===f.type:2<g.length&&("o"===g[0]||"O"===g[0])&&("n"===g[1]||"N"===g[1])),m||P(g,h,f,!1)?h="":null!==f?(g=f.attributeName,h=3===(f=f.type)||4===f&&!0===h?g+'=""':g+'="'+M(h)+'"'):h=w(g)?g+'="'+M(h)+'"':""),h&&(l+=" "+h)}}c||u&&(l+=' data-reactroot=""');var b=l;s="",A.hasOwnProperty(r)?b+="/>":(b+=">",s="</"+e.type+">");e:{if(null!=(c=a.dangerouslySetInnerHTML)){if(null!=c.__html){c=c.__html;break e}}else if("string"==typeof(c=a.children)||"number"==typeof c){c=M(c);break e}c=null}return null!=c?(a=[],U[r]&&"\n"===c.charAt(0)&&(b+="\n"),b+=c):a=B(a.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?N(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:r,children:a,childIndex:0,context:t,footer:s}),this.previousWasTextNode=!1,b},e}(),$={renderToString:function(e){return new q(e,!1).read(1/0)},renderToStaticMarkup:function(e){return new q(e,!0).read(1/0)},renderToNodeStream:function(){p("207")},renderToStaticNodeStream:function(){p("208")},version:"16.4.2"},Q={default:$},Z=Q&&$||Q;e.exports=Z.default?Z.default:Z},function(e,t,n){"use strict";var r=n(190),i=/^ms-/;e.exports=function(e){return r(e).replace(i,"-ms-")}},function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),s=n(1),c=n(0),u=n(54),p=n(57),l=n(108),h=n(112),f=n(105),d=n(55),y=function(e){function t(t){var n=e.call(this,t.animationTickGenFactory,t.deviceType,t.screenType,t.callbacks,t.disableOperations,!0)||this;return n._isAbleToCommitChange=!1,n.willPaddingRootChangedEvent=!1,n.hasPaddingRootChangedEvent=!1,n.onRootChanged=function(){n.willPaddingRootChangedEvent?n.hasPaddingRootChangedEvent=!0:n.notifyRootChanged()},n.syncCameraViewToRemote=function(){var e=n.camera.rectangle,t=e.originX,r=e.originY,i=e.width,o=e.height,a=n.camera.pixelWidth;n.applianceManager.setViewState({originX:t,originY:r,width:i,height:o,pixelWidth:a})},n.beginPinch=function(){n.state.broadcastState.mode===a.ViewMode.Follower&&n.applianceManager.setViewState({mode:a.ViewMode.Freedom})},n.updateCameraView=function(){var e=n.state.broadcastState.mode;e!==a.ViewMode.Broadcaster&&e!==a.ViewMode.Freedom||n.syncCameraViewToRemoteLimiter.invoke()},n.fireMouseEvent=function(e,t,r,i,o){var a={x:t,y:r,targetsMap:i,hitTestIdentifies:o};n.applianceManager[e](a)},n.onImagePhaseChanged=function(e){var t=e!==c.ImagePhase.Persistence;n._isAbleToCommitChange!==t&&(n._isAbleToCommitChange=t,n.callbacks.onBeingAbleToCommitChange&&n.callbacks.onBeingAbleToCommitChange(t))},n.onPhaseChanged=function(e){var t=n.callbacks.onPhaseChanged;if(e===c.MagixPhase.Disconnected&&n.dispose(),t)switch(e){case c.MagixPhase.Ready:case c.MagixPhase.Connecting:t(p.RoomPhase.Connecting);break;case c.MagixPhase.Connected:t(p.RoomPhase.Connected);break;case c.MagixPhase.Reconnecting:t(p.RoomPhase.Reconnecting);break;case c.MagixPhase.Disconnecting:t(p.RoomPhase.Disconnecting);break;case c.MagixPhase.Disconnected:t(p.RoomPhase.Disconnected)}},n.mouseCursorDefinition=t.mouseCursorDefinition,n.zoomMaxScale=t.zoomMaxScale,n.zoomMinScale=t.zoomMinScale,n.magix=t.akkoFactory.createMagix({onImagePhaseChanged:n.onImagePhaseChanged,onPhaseChanged:n.onPhaseChanged,onDisconnectWithError:n.callbacks.onDisconnectWithError,onKickedWithReason:n.callbacks.onKickedWithReason,onCatchErrorWhenAppendFrame:n.callbacks.onCatchErrorWhenAppendFrame,escapeObjectFilter:s.isValidElement,onRootChanged:n.onRootChanged,onEventFire:function(e){return n.dispatchMagixEventWithObject(e)}}),n.hoverFrequencyManager=new d.HoverFrequencyManager({hitTest:function(e,t){return n.applianceManager.hitTest(e,t)},fireMouseEvent:n.fireMouseEvent}),n.syncCameraViewToRemoteLimiter=new f.InvokeFrequencyLimiter(d.TransformLimitTimeInterval,n.syncCameraViewToRemote),n.operator=n.createWhiteboardRoomOperator(),n}return r(t,e),Object.defineProperty(t.prototype,"disableOperations",{get:function(){return this.displayerSyncNode.props.disableOperations},set:function(e){this.displayerSyncNode.setProps({disableOperations:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"observerId",{get:function(){return this.magix.observerId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applianceManager",{get:function(){return this.magix.triggerObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAppliance",{get:function(){return this.stateTrigger.exportState.memberState.currentApplianceName},enumerable:!0,configurable:!0}),t.prototype.shouldDisplayNow=function(){return this.phase===p.RoomPhase.Connected||this.phase===p.RoomPhase.Reconnecting},Object.defineProperty(t.prototype,"uuid",{get:function(){return this._uuid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"session",{get:function(){return this.magix.session},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roomToken",{get:function(){return this._roomToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"phase",{get:function(){return this.displayerSyncNode.props.phase},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.stateTrigger.exportState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAbleToCommitChange",{get:function(){return this._isAbleToCommitChange},enumerable:!0,configurable:!0}),t.prototype.bindHtmlElement=function(e){var t=this;this.element!==e&&(this.element&&l.bindRoom(this.element,null),this.element=e,this.element&&(l.bindRoom(this.element,{room:this,willInterceptKeyboardEvent:this.callbacks.willInterceptKeyboardEvent,onKeyDown:this.callbacks.onKeyDown,onKeyUp:this.callbacks.onKeyUp,onIsMouseOrTouchOperatingChanged:this.callbacks.onIsMouseOrTouchOperatingChanged,focusTextareaSetter:function(e){return t.setFocusTextarea=e}}),this.refreshViewSize()))},t.prototype.connect=function(e){return i(this,void 0,void 0,function(){var t,n,r,i,a=this;return o(this,function(o){switch(o.label){case 0:return this._uuid=e.uuid,this._roomToken=e.roomToken,[4,this.magix.connect(e)];case 1:return o.sent(),t=this.applianceManager,n=t.getMemberDisplayers(),r=t.getScenes(),this.stateTrigger=new h.StateTrigger({stateKeys:["globalState","memberState","scenes","pptImages","roomMembers","broadcastState","zoomScale"],state:{globalState:t.getGlobalState(),memberState:t.getMemberState(),scenes:r,pptImages:r.map(u.DisplayerImplement.covertSceneToPpt),viewState:t.getViewState(),roomMembers:n.map(u.DisplayerImplement.covertMemberDisplayerToMember),broadcastState:this.getBroadcastState(),zoomScale:this.displayerSyncNode.props.transform.scaleX},onStateChanged:this.callbacks.onRoomStateChanged}),this.setup(),i=this.createDisplayerChildAnimation(),this.sorter=new d.EventAndViewSorter(this.deviceType,i,this.camera,this.zoomMaxScale,this.zoomMinScale,{beginPinch:this.beginPinch,updateCameraRectangle:this.updateCameraView,mouseDown:function(e){return a.sendMouseEventToMagix("onMouseDown",e)},mouseUp:function(e){return a.sendMouseEventToMagix("onMouseUp",e)},mouseMove:function(e){return a.sendMouseEventToMagix("onMouseMove",e)}}),this.notifyRootChanged(),[2]}})})},t.prototype.notifyRootChanged=function(){var e=this.applianceManager,t=e.getMemberDisplayers(),n=e.getScenes(),r=this.stateTrigger.setAndCompare({globalState:e.getGlobalState(),memberState:e.getMemberState(),scenes:n,pptImages:n.map(u.DisplayerImplement.covertSceneToPpt),viewState:e.getViewState(),roomMembers:t.map(u.DisplayerImplement.covertMemberDisplayerToMember),broadcastState:this.getBroadcastState(),zoomScale:this.displayerSyncNode.props.transform.scaleX});r.viewState&&r.viewState.target.mode===a.ViewMode.Follower&&this.camera.setRectangle(r.viewState.target),this.refreshDisplayer()},t.prototype.refreshViewSize=function(){this.element&&(this.refreshViewSizeWithElement(this.element)&&this.syncCameraViewToRemoteLimiter.invoke())},t.prototype.onCameraTransformChanged=function(e){this.stateTrigger.setAndCompare({zoomScale:e.scaleX})},t.prototype.getBroadcastState=function(){var e=this.applianceManager,t=e.getViewState(),n=e.getBroadcasterId(),r=void 0;if(void 0!==n)for(var i=0,o=e.getMemberDisplayers();i<o.length;i++){var a=o[i];if(a.memberId===n){r=a.information;break}}return{mode:t.mode,broadcasterId:n,broadcasterInformation:r}},t.prototype.sendMouseEventToMagix=function(e,t){var n=this.camera.calculatePointInScreenToScene(t),r=n.x,i=n.y;this.hoverFrequencyManager.fireMouseEvent(e,r,i,t.targetsMap)},t.prototype.dispatchMagixEvent=function(e,t){this.magix.dispatch(e,t)},t.prototype.disconnect=function(){return i(this,void 0,void 0,function(){return o(this,function(e){return[2,this.magix.disconnect()]})})},t.prototype.memberState=function(e){return this.magix.triggerObject.getMemberState(e)},t.prototype.setGlobalState=function(e){var t=this;return this.invokeAndPaddingRootChangedEvent(function(){return t.stateTrigger.setProperty("globalState",t.applianceManager.setGlobalState(e))})},t.prototype.setMemberState=function(e){var t=this;return this.invokeAndPaddingRootChangedEvent(function(){return t.stateTrigger.setProperty("memberState",t.applianceManager.setMemberState(e))})},t.prototype.setViewMode=function(e){this.applianceManager.setViewState({mode:e});var t=this.stateTrigger.setAndCompare({broadcastState:this.getBroadcastState()});t.viewState&&t.viewState.target.mode!==a.ViewMode.Broadcaster&&this.camera.setRectangle(t.viewState.target)},t.prototype.zoomChange=function(e){this.sorter.zoomChange(e)},t.prototype.insertImage=function(e){this.applianceManager.insertImage(e)},t.prototype.pushPptPages=function(e){this.applianceManager.pushPptPages(e)},t.prototype.completeImageUpload=function(e,t){this.applianceManager.completeImageUpload(e,t)},t.prototype.insertNewPage=function(e){this.applianceManager.insertNewPage(e)},t.prototype.removePage=function(e){this.applianceManager.removePage(e)},t.prototype.updateTextarea=function(e){this.applianceManager.updateTextarea(e)},t.prototype.externalDeviceEventDown=function(e){this.disableOperations&&this.sendMouseEventToMagix("onMouseDown",e)},t.prototype.externalDeviceEventMove=function(e){this.disableOperations&&this.sendMouseEventToMagix("onMouseMove",e)},t.prototype.externalDeviceEventUp=function(e){this.disableOperations&&this.sendMouseEventToMagix("onMouseUp",e)},t.prototype.externalDeviceEventLeave=function(e){this.disableOperations&&this.sendMouseEventToMagix("onMouseLeave",e)},t.prototype.createWhiteboardRoomOperator=function(){var e=this,t={deviceType:this.deviceType,willDisplayMouseCursor:!0,onKeyUp:function(t){e.deviceType===a.DeviceType.Desktop&&e.applianceManager.onKeyUp(t)},onKeyDown:function(t){e.deviceType===a.DeviceType.Desktop&&e.applianceManager.onKeyDown(t)},onMouseDown:function(t){e.deviceType===a.DeviceType.Desktop&&e.sendMouseEventToMagix("onMouseDown",t)},onMouseUp:function(t){e.deviceType===a.DeviceType.Desktop&&e.sendMouseEventToMagix("onMouseUp",t)},onMouseMove:function(t){e.deviceType===a.DeviceType.Desktop&&e.sendMouseEventToMagix("onMouseMove",t)},onMouseLeave:function(t){e.deviceType===a.DeviceType.Desktop&&e.sendMouseEventToMagix("onMouseLeave",t)},onViewTransform:function(t){e.deviceType===a.DeviceType.Desktop&&e.sorter.viewTransform(t)},onTouchStart:function(t){e.sorter.touchStart(t),e.setFocusTextarea&&!e.applianceManager.renderTagBoxes().some(function(e){return"myText"===e.type})&&e.setFocusTextarea(!1)},onTouchMove:function(t){e.sorter.touchMove(t)},onTouchEnd:function(t){e.sorter.touchEnd(t),e.setFocusTextarea&&e.applianceManager.renderTagBoxes().some(function(e){return"myText"===e.type})&&e.setFocusTextarea(!0)},onTouchCancel:function(t){e.sorter.touchCancel(t)},onTextareaUpdate:function(t){e.applianceManager.updateTextarea(t)}};return Object.freeze(t)},t.prototype.invokeAndPaddingRootChangedEvent=function(e){try{return this.willPaddingRootChangedEvent=!0,e()}finally{this.willPaddingRootChangedEvent=!1,this.hasPaddingRootChangedEvent&&(this.notifyRootChanged(),this.hasPaddingRootChangedEvent=!1)}},t}(u.DisplayerImplement);t.RoomImplement=y},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(194)},function(e,t,n){"use strict";
/** @license React v16.4.2
 * react-dom.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(42),i=n(1),o=n(195),a=n(31),s=n(44),c=n(196),u=n(197),p=n(198),l=n(43);function h(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}i||h("227");var f={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,r,i,o,a,s,c){(function(e,t,n,r,i,o,a,s,c){this._hasCaughtError=!1,this._caughtError=null;var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this._caughtError=e,this._hasCaughtError=!0}}).apply(f,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,i,o,a,s,c){if(f.invokeGuardedCallback.apply(this,arguments),f.hasCaughtError()){var u=f.clearCaughtError();f._hasRethrowError||(f._hasRethrowError=!0,f._rethrowError=u)}},rethrowCaughtError:function(){return function(){if(f._hasRethrowError){var e=f._rethrowError;throw f._rethrowError=null,f._hasRethrowError=!1,e}}.apply(f,arguments)},hasCaughtError:function(){return f._hasCaughtError},clearCaughtError:function(){if(f._hasCaughtError){var e=f._caughtError;return f._caughtError=null,f._hasCaughtError=!1,e}h("198")}};var d=null,y={};function g(){if(d)for(var e in y){var t=y[e],n=d.indexOf(e);if(-1<n||h("96",e),!b[n])for(var r in t.extractEvents||h("97",e),b[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,s=r;v.hasOwnProperty(s)&&h("99",s),v[s]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&m(c[i],a,s);i=!0}else o.registrationName?(m(o.registrationName,a,s),i=!0):i=!1;i||h("98",r,e)}}}function m(e,t,n){T[e]&&h("100",e),T[e]=t,S[e]=t.eventTypes[n].dependencies}var b=[],v={},T={},S={};function x(e){d&&h("101"),d=Array.prototype.slice.call(e),g()}function E(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];y.hasOwnProperty(t)&&y[t]===r||(y[t]&&h("102",t),y[t]=r,n=!0)}n&&g()}var w={plugins:b,eventNameDispatchConfigs:v,registrationNameModules:T,registrationNameDependencies:S,possibleRegistrationNames:null,injectEventPluginOrder:x,injectEventPluginsByName:E},P=null,k=null,C=null;function O(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=C(r),f.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function _(e,t){return null==t&&h("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function R(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var M=null;function I(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)O(e,t,n[i],r[i]);else n&&O(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function N(e){return I(e,!0)}function A(e){return I(e,!1)}var j={injectEventPluginOrder:x,injectEventPluginsByName:E};function F(e,t){var n=e.stateNode;if(!n)return null;var r=P(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&h("231",t,typeof n),n)}function D(e,t){null!==e&&(M=_(M,e)),e=M,M=null,e&&(R(e,t?N:A),M&&h("95"),f.rethrowCaughtError())}function B(e,t,n,r){for(var i=null,o=0;o<b.length;o++){var a=b[o];a&&(a=a.extractEvents(e,t,n,r))&&(i=_(i,a))}D(i,!1)}var W={injection:j,getListener:F,runEventsInBatch:D,runExtractedEventsInBatch:B},U=Math.random().toString(36).slice(2),z="__reactInternalInstance$"+U,L="__reactEventHandlers$"+U;function V(e){if(e[z])return e[z];for(;!e[z];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[z]).tag||6===e.tag?e:null}function G(e){if(5===e.tag||6===e.tag)return e.stateNode;h("33")}function H(e){return e[L]||null}var X={precacheFiberNode:function(e,t){t[z]=e},getClosestInstanceFromNode:V,getInstanceFromNode:function(e){return!(e=e[z])||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:G,getFiberCurrentPropsFromNode:H,updateFiberProps:function(e,t){e[L]=t}};function Y(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function K(e,t,n){for(var r=[];e;)r.push(e),e=Y(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function q(e,t,n){(t=F(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=_(n._dispatchListeners,t),n._dispatchInstances=_(n._dispatchInstances,e))}function $(e){e&&e.dispatchConfig.phasedRegistrationNames&&K(e._targetInst,q,e)}function Q(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;K(t=t?Y(t):null,q,e)}}function Z(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=F(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=_(n._dispatchListeners,t),n._dispatchInstances=_(n._dispatchInstances,e))}function J(e){e&&e.dispatchConfig.registrationName&&Z(e._targetInst,null,e)}function ee(e){R(e,$)}function te(e,t,n,r){if(n&&r)e:{for(var i=n,o=r,a=0,s=i;s;s=Y(s))a++;s=0;for(var c=o;c;c=Y(c))s++;for(;0<a-s;)i=Y(i),a--;for(;0<s-a;)o=Y(o),s--;for(;a--;){if(i===o||i===o.alternate)break e;i=Y(i),o=Y(o)}i=null}else i=null;for(o=i,i=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)i.push(n),n=Y(n);for(n=[];r&&r!==o&&(null===(a=r.alternate)||a!==o);)n.push(r),r=Y(r);for(r=0;r<i.length;r++)Z(i[r],"bubbled",e);for(e=n.length;0<e--;)Z(n[e],"captured",t)}var ne={accumulateTwoPhaseDispatches:ee,accumulateTwoPhaseDispatchesSkipTarget:function(e){R(e,Q)},accumulateEnterLeaveDispatches:te,accumulateDirectDispatches:function(e){R(e,J)}};function re(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var ie={animationend:re("Animation","AnimationEnd"),animationiteration:re("Animation","AnimationIteration"),animationstart:re("Animation","AnimationStart"),transitionend:re("Transition","TransitionEnd")},oe={},ae={};function se(e){if(oe[e])return oe[e];if(!ie[e])return e;var t,n=ie[e];for(t in n)if(n.hasOwnProperty(t)&&t in ae)return oe[e]=n[t];return e}o.canUseDOM&&(ae=document.createElement("div").style,"AnimationEvent"in window||(delete ie.animationend.animation,delete ie.animationiteration.animation,delete ie.animationstart.animation),"TransitionEvent"in window||delete ie.transitionend.transition);var ce=se("animationend"),ue=se("animationiteration"),pe=se("animationstart"),le=se("transitionend"),he="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fe=null;function de(){return!fe&&o.canUseDOM&&(fe="textContent"in document.documentElement?"textContent":"innerText"),fe}var ye={_root:null,_startText:null,_fallbackText:null};function ge(){if(ye._fallbackText)return ye._fallbackText;var e,t,n=ye._startText,r=n.length,i=me(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return ye._fallbackText=i.slice(e,1<t?1-t:void 0),ye._fallbackText}function me(){return"value"in ye._root?ye._root.value:ye._root[de()]}var be="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),ve={type:null,target:null,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function Te(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?s.thatReturnsTrue:s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse,this}function Se(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function xe(e){e instanceof this||h("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Ee(e){e.eventPool=[],e.getPooled=Se,e.release=xe}a(Te.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=s.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=s.thatReturnsTrue)},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<be.length;t++)this[be[t]]=null}}),Te.Interface=ve,Te.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return a(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=a({},r.Interface,e),n.extend=r.extend,Ee(n),n},Ee(Te);var we=Te.extend({data:null}),Pe=Te.extend({data:null}),ke=[9,13,27,32],Ce=o.canUseDOM&&"CompositionEvent"in window,Oe=null;o.canUseDOM&&"documentMode"in document&&(Oe=document.documentMode);var _e=o.canUseDOM&&"TextEvent"in window&&!Oe,Re=o.canUseDOM&&(!Ce||Oe&&8<Oe&&11>=Oe),Me=String.fromCharCode(32),Ie={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ne=!1;function Ae(e,t){switch(e){case"keyup":return-1!==ke.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function je(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Fe=!1;var De={eventTypes:Ie,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(Ce)e:{switch(e){case"compositionstart":i=Ie.compositionStart;break e;case"compositionend":i=Ie.compositionEnd;break e;case"compositionupdate":i=Ie.compositionUpdate;break e}i=void 0}else Fe?Ae(e,n)&&(i=Ie.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=Ie.compositionStart);return i?(Re&&(Fe||i!==Ie.compositionStart?i===Ie.compositionEnd&&Fe&&(o=ge()):(ye._root=r,ye._startText=me(),Fe=!0)),i=we.getPooled(i,t,n,r),o?i.data=o:null!==(o=je(n))&&(i.data=o),ee(i),o=i):o=null,(e=_e?function(e,t){switch(e){case"compositionend":return je(t);case"keypress":return 32!==t.which?null:(Ne=!0,Me);case"textInput":return(e=t.data)===Me&&Ne?null:e;default:return null}}(e,n):function(e,t){if(Fe)return"compositionend"===e||!Ce&&Ae(e,t)?(e=ge(),ye._root=null,ye._startText=null,ye._fallbackText=null,Fe=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Re?null:t.data;default:return null}}(e,n))?((t=Pe.getPooled(Ie.beforeInput,t,n,r)).data=e,ee(t)):t=null,null===o?t:null===t?o:[o,t]}},Be=null,We={injectFiberControlledHostComponent:function(e){Be=e}},Ue=null,ze=null;function Le(e){if(e=k(e)){Be&&"function"==typeof Be.restoreControlledState||h("194");var t=P(e.stateNode);Be.restoreControlledState(e.stateNode,e.type,t)}}function Ve(e){Ue?ze?ze.push(e):ze=[e]:Ue=e}function Ge(){return null!==Ue||null!==ze}function He(){if(Ue){var e=Ue,t=ze;if(ze=Ue=null,Le(e),t)for(e=0;e<t.length;e++)Le(t[e])}}var Xe={injection:We,enqueueStateRestore:Ve,needsStateRestore:Ge,restoreStateIfNeeded:He};function Ye(e,t){return e(t)}function Ke(e,t,n){return e(t,n)}function qe(){}var $e=!1;function Qe(e,t){if($e)return e(t);$e=!0;try{return Ye(e,t)}finally{$e=!1,Ge()&&(qe(),He())}}var Ze={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Je(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ze[e.type]:"textarea"===t}function et(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function tt(e,t){return!(!o.canUseDOM||t&&!("addEventListener"in document))&&((t=(e="on"+e)in document)||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t)}function nt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function rt(e){e._valueTracker||(e._valueTracker=function(e){var t=nt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function it(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=nt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var ot=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,at="function"==typeof Symbol&&Symbol.for,st=at?Symbol.for("react.element"):60103,ct=at?Symbol.for("react.portal"):60106,ut=at?Symbol.for("react.fragment"):60107,pt=at?Symbol.for("react.strict_mode"):60108,lt=at?Symbol.for("react.profiler"):60114,ht=at?Symbol.for("react.provider"):60109,ft=at?Symbol.for("react.context"):60110,dt=at?Symbol.for("react.async_mode"):60111,yt=at?Symbol.for("react.forward_ref"):60112,gt=at?Symbol.for("react.timeout"):60113,mt="function"==typeof Symbol&&Symbol.iterator;function bt(e){return null===e||void 0===e?null:"function"==typeof(e=mt&&e[mt]||e["@@iterator"])?e:null}function vt(e){var t=e.type;if("function"==typeof t)return t.displayName||t.name;if("string"==typeof t)return t;switch(t){case dt:return"AsyncMode";case ft:return"Context.Consumer";case ut:return"ReactFragment";case ct:return"ReactPortal";case lt:return"Profiler("+e.pendingProps.id+")";case ht:return"Context.Provider";case pt:return"StrictMode";case gt:return"Timeout"}if("object"==typeof t&&null!==t)switch(t.$$typeof){case yt:return""!==(e=t.render.displayName||t.render.name||"")?"ForwardRef("+e+")":"ForwardRef"}return null}function Tt(e){var t="";do{e:switch(e.tag){case 0:case 1:case 2:case 5:var n=e._debugOwner,r=e._debugSource,i=vt(e),o=null;n&&(o=vt(n)),n=r,i="\n    in "+(i||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break e;default:i=""}t+=i,e=e.return}while(e);return t}var St=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xt=Object.prototype.hasOwnProperty,Et={},wt={};function Pt(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){kt[e]=new Pt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];kt[t]=new Pt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){kt[e]=new Pt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){kt[e]=new Pt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){kt[e]=new Pt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){kt[e]=new Pt(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){kt[e]=new Pt(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){kt[e]=new Pt(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){kt[e]=new Pt(e,5,!1,e.toLowerCase(),null)});var Ct=/[\-:]([a-z])/g;function Ot(e){return e[1].toUpperCase()}function _t(e,t,n,r){var i=kt.hasOwnProperty(t)?kt[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||void 0===t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!xt.call(wt,e)||!xt.call(Et,e)&&(St.test(e)?wt[e]=!0:(Et[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Rt(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Mt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ft(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function It(e,t){null!=(t=t.checked)&&_t(e,"checked",t,!1)}function Nt(e,t){It(e,t);var n=Ft(t.value);null!=n&&("number"===t.type?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n)),t.hasOwnProperty("value")?jt(e,t.type,n):t.hasOwnProperty("defaultValue")&&jt(e,t.type,Ft(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function At(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){t=""+e._wrapperState.initialValue;var r=e.value;n||t===r||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==n&&(e.name=n)}function jt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ft(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ct,Ot);kt[t]=new Pt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ct,Ot);kt[t]=new Pt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ct,Ot);kt[t]=new Pt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),kt.tabIndex=new Pt("tabIndex",1,!1,"tabindex",null);var Dt={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Bt(e,t,n){return(e=Te.getPooled(Dt.change,e,t,n)).type="change",Ve(n),ee(e),e}var Wt=null,Ut=null;function zt(e){D(e,!1)}function Lt(e){if(it(G(e)))return e}function Vt(e,t){if("change"===e)return t}var Gt=!1;function Ht(){Wt&&(Wt.detachEvent("onpropertychange",Xt),Ut=Wt=null)}function Xt(e){"value"===e.propertyName&&Lt(Ut)&&Qe(zt,e=Bt(Ut,e,et(e)))}function Yt(e,t,n){"focus"===e?(Ht(),Ut=n,(Wt=t).attachEvent("onpropertychange",Xt)):"blur"===e&&Ht()}function Kt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Lt(Ut)}function qt(e,t){if("click"===e)return Lt(t)}function $t(e,t){if("input"===e||"change"===e)return Lt(t)}o.canUseDOM&&(Gt=tt("input")&&(!document.documentMode||9<document.documentMode));var Qt={eventTypes:Dt,_isInputEventSupported:Gt,extractEvents:function(e,t,n,r){var i=t?G(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=Vt:Je(i)?Gt?o=$t:(o=Kt,a=Yt):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=qt),o&&(o=o(e,t)))return Bt(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&jt(i,"number",i.value)}},Zt=Te.extend({view:null,detail:null}),Jt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function en(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Jt[e])&&!!t[e]}function tn(){return en}var nn=Zt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:tn,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),rn=nn.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),on={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},an={eventTypes:on,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?V(t):null):o=null,o===t)return null;var a=void 0,s=void 0,c=void 0,u=void 0;return"mouseout"===e||"mouseover"===e?(a=nn,s=on.mouseLeave,c=on.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=rn,s=on.pointerLeave,c=on.pointerEnter,u="pointer"),e=null==o?i:G(o),i=null==t?i:G(t),(s=a.getPooled(s,o,n,r)).type=u+"leave",s.target=e,s.relatedTarget=i,(n=a.getPooled(c,t,n,r)).type=u+"enter",n.target=i,n.relatedTarget=e,te(s,n,o,t),[s,n]}};function sn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function cn(e){2!==sn(e)&&h("188")}function un(e){var t=e.alternate;if(!t)return 3===(t=sn(e))&&h("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var a=i.child;a;){if(a===n)return cn(i),e;if(a===r)return cn(i),t;a=a.sibling}h("188")}if(n.return!==r.return)n=i,r=o;else{a=!1;for(var s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}a||h("189")}}n.alternate!==r&&h("190")}return 3!==n.tag&&h("188"),n.stateNode.current===n?e:t}function pn(e){if(!(e=un(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var ln=Te.extend({animationName:null,elapsedTime:null,pseudoElement:null}),hn=Te.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fn=Zt.extend({relatedTarget:null});function dn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var yn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn=Zt.extend({key:function(e){if(e.key){var t=yn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=dn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:tn,charCode:function(e){return"keypress"===e.type?dn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?dn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),bn=nn.extend({dataTransfer:null}),vn=Zt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:tn}),Tn=Te.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Sn=nn.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),xn=[["abort","abort"],[ce,"animationEnd"],[ue,"animationIteration"],[pe,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[le,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],En={},wn={};function Pn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},En[e]=t,wn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){Pn(e,!0)}),xn.forEach(function(e){Pn(e,!1)});var kn={eventTypes:En,isInteractiveTopLevelEventType:function(e){return void 0!==(e=wn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=wn[e];if(!i)return null;switch(e){case"keypress":if(0===dn(n))return null;case"keydown":case"keyup":e=mn;break;case"blur":case"focus":e=fn;break;case"click":if(2===n.button)return null;case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=bn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=vn;break;case ce:case ue:case pe:e=ln;break;case le:e=Tn;break;case"scroll":e=Zt;break;case"wheel":e=Sn;break;case"copy":case"cut":case"paste":e=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=rn;break;default:e=Te}return ee(t=e.getPooled(i,t,n,r)),t}},Cn=kn.isInteractiveTopLevelEventType,On=[];function _n(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=V(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],B(e.topLevelType,t,e.nativeEvent,et(e.nativeEvent))}var Rn=!0;function Mn(e){Rn=!!e}function In(e,t){if(!t)return null;var n=(Cn(e)?An:jn).bind(null,e);t.addEventListener(e,n,!1)}function Nn(e,t){if(!t)return null;var n=(Cn(e)?An:jn).bind(null,e);t.addEventListener(e,n,!0)}function An(e,t){Ke(jn,e,t)}function jn(e,t){if(Rn){var n=et(t);if(null===(n=V(n))||"number"!=typeof n.tag||2===sn(n)||(n=null),On.length){var r=On.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Qe(_n,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>On.length&&On.push(e)}}}var Fn={get _enabled(){return Rn},setEnabled:Mn,isEnabled:function(){return Rn},trapBubbledEvent:In,trapCapturedEvent:Nn,dispatchEvent:jn},Dn={},Bn=0,Wn="_reactListenersID"+(""+Math.random()).slice(2);function Un(e){return Object.prototype.hasOwnProperty.call(e,Wn)||(e[Wn]=Bn++,Dn[e[Wn]]={}),Dn[e[Wn]]}function zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ln(e,t){var n,r=zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zn(r)}}function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Gn=o.canUseDOM&&"documentMode"in document&&11>=document.documentMode,Hn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Xn=null,Yn=null,Kn=null,qn=!1;function $n(e,t){if(qn||null==Xn||Xn!==c())return null;var n=Xn;return"selectionStart"in n&&Vn(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?n={anchorNode:(n=window.getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}:n=void 0,Kn&&u(Kn,n)?null:(Kn=n,(e=Te.getPooled(Hn.select,Yn,e,t)).type="select",e.target=Xn,ee(e),e)}var Qn={eventTypes:Hn,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Un(o),i=S.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?G(t):window,e){case"focus":(Je(o)||"true"===o.contentEditable)&&(Xn=o,Yn=t,Kn=null);break;case"blur":Kn=Yn=Xn=null;break;case"mousedown":qn=!0;break;case"contextmenu":case"mouseup":return qn=!1,$n(n,r);case"selectionchange":if(Gn)break;case"keydown":case"keyup":return $n(n,r)}return null}};j.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),P=X.getFiberCurrentPropsFromNode,k=X.getInstanceFromNode,C=X.getNodeFromInstance,j.injectEventPluginsByName({SimpleEventPlugin:kn,EnterLeaveEventPlugin:an,ChangeEventPlugin:Qt,SelectEventPlugin:Qn,BeforeInputEventPlugin:De});var Zn="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,Jn=Date,er=setTimeout,tr=clearTimeout,nr=void 0;if("object"==typeof performance&&"function"==typeof performance.now){var rr=performance;nr=function(){return rr.now()}}else nr=function(){return Jn.now()};var ir=void 0,or=void 0;if(o.canUseDOM){var ar="function"==typeof Zn?Zn:function(){h("276")},sr=null,cr=null,ur=-1,pr=!1,lr=!1,hr=0,fr=33,dr=33,yr={didTimeout:!1,timeRemaining:function(){var e=hr-nr();return 0<e?e:0}},gr=function(e,t){var n=e.scheduledCallback,r=!1;try{n(t),r=!0}finally{or(e),r||(pr=!0,window.postMessage(mr,"*"))}},mr="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===mr&&(pr=!1,null!==sr)){if(null!==sr){var t=nr();if(!(-1===ur||ur>t)){e=-1;for(var n=[],r=sr;null!==r;){var i=r.timeoutTime;-1!==i&&i<=t?n.push(r):-1!==i&&(-1===e||i<e)&&(e=i),r=r.next}if(0<n.length)for(yr.didTimeout=!0,t=0,r=n.length;t<r;t++)gr(n[t],yr);ur=e}}for(e=nr();0<hr-e&&null!==sr;)e=sr,yr.didTimeout=!1,gr(e,yr),e=nr();null===sr||lr||(lr=!0,ar(br))}},!1);var br=function(e){lr=!1;var t=e-hr+dr;t<dr&&fr<dr?(8>t&&(t=8),dr=t<fr?fr:t):fr=t,hr=e+dr,pr||(pr=!0,window.postMessage(mr,"*"))};ir=function(e,t){var n=-1;return null!=t&&"number"==typeof t.timeout&&(n=nr()+t.timeout),(-1===ur||-1!==n&&n<ur)&&(ur=n),e={scheduledCallback:e,timeoutTime:n,prev:null,next:null},null===sr?sr=e:null!==(t=e.prev=cr)&&(t.next=e),cr=e,lr||(lr=!0,ar(br)),e},or=function(e){if(null!==e.prev||sr===e){var t=e.next,n=e.prev;e.next=null,e.prev=null,null!==t?null!==n?(n.next=t,t.prev=n):(t.prev=null,sr=t):null!==n?(n.next=null,cr=n):cr=sr=null}}}else{var vr=new Map;ir=function(e){var t={scheduledCallback:e,timeoutTime:0,next:null,prev:null},n=er(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})});return vr.set(e,n),t},or=function(e){var t=vr.get(e.scheduledCallback);vr.delete(e),tr(t)}}function Tr(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(t+=e)}),t}(t.children))&&(e.children=t),e}function Sr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function xr(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function Er(e,t){return null!=t.dangerouslySetInnerHTML&&h("91"),a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wr(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&h("92"),Array.isArray(t)&&(1>=t.length||h("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function Pr(e,t){var n=t.value;null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function kr(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}var Cr={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Or(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _r(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Or(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Rr=void 0,Mr=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==Cr.svg||"innerHTML"in e)e.innerHTML=t;else{for((Rr=Rr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=Rr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ir(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ar=["Webkit","ms","Moz","O"];function jr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=t[n];i=null==o||"boolean"==typeof o||""===o?"":r||"number"!=typeof o||0===o||Nr.hasOwnProperty(i)&&Nr[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Nr).forEach(function(e){Ar.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nr[t]=Nr[e]})});var Fr=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dr(e,t,n){t&&(Fr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&h("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&h("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||h("61")),null!=t.style&&"object"!=typeof t.style&&h("62",n()))}function Br(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wr=s.thatReturns("");function Ur(e,t){var n=Un(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=S[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Nn("scroll",e);break;case"focus":case"blur":Nn("focus",e),Nn("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":tt(i,!0)&&Nn(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===he.indexOf(i)&&In(i,e)}n[i]=!0}}}function zr(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===Cr.html&&(r=Or(e)),r===Cr.html?"script"===e?((e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"==typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function Lr(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function Vr(e,t,n,r){var i=Br(t,n);switch(t){case"iframe":case"object":In("load",e);var o=n;break;case"video":case"audio":for(o=0;o<he.length;o++)In(he[o],e);o=n;break;case"source":In("error",e),o=n;break;case"img":case"image":case"link":In("error",e),In("load",e),o=n;break;case"form":In("reset",e),In("submit",e),o=n;break;case"details":In("toggle",e),o=n;break;case"input":Mt(e,n),o=Rt(e,n),In("invalid",e),Ur(r,"onChange");break;case"option":o=Tr(e,n);break;case"select":xr(e,n),o=a({},n,{value:void 0}),In("invalid",e),Ur(r,"onChange");break;case"textarea":wr(e,n),o=Er(e,n),In("invalid",e),Ur(r,"onChange");break;default:o=n}Dr(t,o,Wr);var c,u=o;for(c in u)if(u.hasOwnProperty(c)){var p=u[c];"style"===c?jr(e,p):"dangerouslySetInnerHTML"===c?null!=(p=p?p.__html:void 0)&&Mr(e,p):"children"===c?"string"==typeof p?("textarea"!==t||""!==p)&&Ir(e,p):"number"==typeof p&&Ir(e,""+p):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(T.hasOwnProperty(c)?null!=p&&Ur(r,c):null!=p&&_t(e,c,p,i))}switch(t){case"input":rt(e),At(e,n,!1);break;case"textarea":rt(e),kr(e);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,null!=(t=n.value)?Sr(e,!!n.multiple,t,!1):null!=n.defaultValue&&Sr(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=s)}}function Gr(e,t,n,r,i){var o=null;switch(t){case"input":n=Rt(e,n),r=Rt(e,r),o=[];break;case"option":n=Tr(e,n),r=Tr(e,r),o=[];break;case"select":n=a({},n,{value:void 0}),r=a({},r,{value:void 0}),o=[];break;case"textarea":n=Er(e,n),r=Er(e,r),o=[];break;default:"function"!=typeof n.onClick&&"function"==typeof r.onClick&&(e.onclick=s)}Dr(t,r,Wr),t=e=void 0;var c=null;for(e in n)if(!r.hasOwnProperty(e)&&n.hasOwnProperty(e)&&null!=n[e])if("style"===e){var u=n[e];for(t in u)u.hasOwnProperty(t)&&(c||(c={}),c[t]="")}else"dangerouslySetInnerHTML"!==e&&"children"!==e&&"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&"autoFocus"!==e&&(T.hasOwnProperty(e)?o||(o=[]):(o=o||[]).push(e,null));for(e in r){var p=r[e];if(u=null!=n?n[e]:void 0,r.hasOwnProperty(e)&&p!==u&&(null!=p||null!=u))if("style"===e)if(u){for(t in u)!u.hasOwnProperty(t)||p&&p.hasOwnProperty(t)||(c||(c={}),c[t]="");for(t in p)p.hasOwnProperty(t)&&u[t]!==p[t]&&(c||(c={}),c[t]=p[t])}else c||(o||(o=[]),o.push(e,c)),c=p;else"dangerouslySetInnerHTML"===e?(p=p?p.__html:void 0,u=u?u.__html:void 0,null!=p&&u!==p&&(o=o||[]).push(e,""+p)):"children"===e?u===p||"string"!=typeof p&&"number"!=typeof p||(o=o||[]).push(e,""+p):"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&(T.hasOwnProperty(e)?(null!=p&&Ur(i,e),o||u===p||(o=[])):(o=o||[]).push(e,p))}return c&&(o=o||[]).push("style",c),o}function Hr(e,t,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&It(e,i),Br(n,r),r=Br(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?jr(e,s):"dangerouslySetInnerHTML"===a?Mr(e,s):"children"===a?Ir(e,s):_t(e,a,s,r)}switch(n){case"input":Nt(e,i);break;case"textarea":Pr(e,i);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Sr(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Sr(e,!!i.multiple,i.defaultValue,!0):Sr(e,!!i.multiple,i.multiple?[]:"",!1))}}function Xr(e,t,n,r,i){switch(t){case"iframe":case"object":In("load",e);break;case"video":case"audio":for(r=0;r<he.length;r++)In(he[r],e);break;case"source":In("error",e);break;case"img":case"image":case"link":In("error",e),In("load",e);break;case"form":In("reset",e),In("submit",e);break;case"details":In("toggle",e);break;case"input":Mt(e,n),In("invalid",e),Ur(i,"onChange");break;case"select":xr(e,n),In("invalid",e),Ur(i,"onChange");break;case"textarea":wr(e,n),In("invalid",e),Ur(i,"onChange")}for(var o in Dr(t,n,Wr),r=null,n)if(n.hasOwnProperty(o)){var a=n[o];"children"===o?"string"==typeof a?e.textContent!==a&&(r=["children",a]):"number"==typeof a&&e.textContent!==""+a&&(r=["children",""+a]):T.hasOwnProperty(o)&&null!=a&&Ur(i,o)}switch(t){case"input":rt(e),At(e,n,!0);break;case"textarea":rt(e),kr(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(e.onclick=s)}return r}function Yr(e,t){return e.nodeValue!==t}var Kr={createElement:zr,createTextNode:Lr,setInitialProperties:Vr,diffProperties:Gr,updateProperties:Hr,diffHydratedProperties:Xr,diffHydratedText:Yr,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(Nt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=H(r);i||h("90"),it(r),Nt(r,i)}}}break;case"textarea":Pr(e,n);break;case"select":null!=(t=n.value)&&Sr(e,!!n.multiple,t,!1)}}},qr=null,$r=null;function Qr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Zr(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html}var Jr=nr,ei=ir,ti=or;function ni(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function ri(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var ii=[],oi=-1;function ai(e){return{current:e}}function si(e){0>oi||(e.current=ii[oi],ii[oi]=null,oi--)}function ci(e,t){ii[++oi]=e.current,e.current=t}var ui=ai(l),pi=ai(!1),li=l;function hi(e){return di(e)?li:ui.current}function fi(e,t){var n=e.type.contextTypes;if(!n)return l;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function di(e){return 2===e.tag&&null!=e.type.childContextTypes}function yi(e){di(e)&&(si(pi),si(ui))}function gi(e){si(pi),si(ui)}function mi(e,t,n){ui.current!==l&&h("168"),ci(ui,t),ci(pi,n)}function bi(e,t){var n=e.stateNode,r=e.type.childContextTypes;if("function"!=typeof n.getChildContext)return t;for(var i in n=n.getChildContext())i in r||h("108",vt(e)||"Unknown",i);return a({},t,n)}function vi(e){if(!di(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||l,li=ui.current,ci(ui,t),ci(pi,pi.current),!0}function Ti(e,t){var n=e.stateNode;if(n||h("169"),t){var r=bi(e,li);n.__reactInternalMemoizedMergedChildContext=r,si(pi),si(ui),ci(ui,r)}else si(pi);ci(pi,t)}function Si(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function xi(e,t,n){var r=e.alternate;return null===r?((r=new Si(e.tag,t,e.key,e.mode)).type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ei(e,t,n){var r=e.type,i=e.key;if(e=e.props,"function"==typeof r)var o=r.prototype&&r.prototype.isReactComponent?2:0;else if("string"==typeof r)o=5;else switch(r){case ut:return wi(e.children,t,n,i);case dt:o=11,t|=3;break;case pt:o=11,t|=2;break;case lt:return(r=new Si(15,e,i,4|t)).type=lt,r.expirationTime=n,r;case gt:o=16,t|=2;break;default:e:{switch("object"==typeof r&&null!==r?r.$$typeof:null){case ht:o=13;break e;case ft:o=12;break e;case yt:o=14;break e;default:h("130",null==r?r:typeof r,"")}o=void 0}}return(t=new Si(o,e,i,t)).type=r,t.expirationTime=n,t}function wi(e,t,n,r){return(e=new Si(10,e,r,t)).expirationTime=n,e}function Pi(e,t,n){return(e=new Si(6,e,null,t)).expirationTime=n,e}function ki(e,t,n){return(t=new Si(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ci(e,t,n){return e={current:t=new Si(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},t.stateNode=e}var Oi=null,_i=null;function Ri(e){return function(t){try{return e(t)}catch(e){}}}function Mi(e){"function"==typeof Oi&&Oi(e)}function Ii(e){"function"==typeof _i&&_i(e)}var Ni=!1;function Ai(e){return{expirationTime:0,baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ji(e){return{expirationTime:e.expirationTime,baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Fi(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Di(e,t,n){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t),(0===e.expirationTime||e.expirationTime>n)&&(e.expirationTime=n)}function Bi(e,t,n){var r=e.alternate;if(null===r){var i=e.updateQueue,o=null;null===i&&(i=e.updateQueue=Ai(e.memoizedState))}else i=e.updateQueue,o=r.updateQueue,null===i?null===o?(i=e.updateQueue=Ai(e.memoizedState),o=r.updateQueue=Ai(r.memoizedState)):i=e.updateQueue=ji(o):null===o&&(o=r.updateQueue=ji(i));null===o||i===o?Di(i,t,n):null===i.lastUpdate||null===o.lastUpdate?(Di(i,t,n),Di(o,t,n)):(Di(i,t,n),o.lastUpdate=t)}function Wi(e,t,n){var r=e.updateQueue;null===(r=null===r?e.updateQueue=Ai(e.memoizedState):Ui(e,r)).lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=t:(r.lastCapturedUpdate.next=t,r.lastCapturedUpdate=t),(0===r.expirationTime||r.expirationTime>n)&&(r.expirationTime=n)}function Ui(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=ji(t)),t}function zi(e,t,n,r,i,o){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(o,r,i):e;case 3:e.effectTag=-1025&e.effectTag|64;case 0:if(null===(i="function"==typeof(e=n.payload)?e.call(o,r,i):e)||void 0===i)break;return a({},r,i);case 2:Ni=!0}return r}function Li(e,t,n,r,i){if(Ni=!1,!(0===t.expirationTime||t.expirationTime>i)){for(var o=(t=Ui(e,t)).baseState,a=null,s=0,c=t.firstUpdate,u=o;null!==c;){var p=c.expirationTime;p>i?(null===a&&(a=c,o=u),(0===s||s>p)&&(s=p)):(u=zi(e,0,c,u,n,r),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=c:(t.lastEffect.nextEffect=c,t.lastEffect=c))),c=c.next}for(p=null,c=t.firstCapturedUpdate;null!==c;){var l=c.expirationTime;l>i?(null===p&&(p=c,null===a&&(o=u)),(0===s||s>l)&&(s=l)):(u=zi(e,0,c,u,n,r),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=c:(t.lastCapturedEffect.nextEffect=c,t.lastCapturedEffect=c))),c=c.next}null===a&&(t.lastUpdate=null),null===p?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===p&&(o=u),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=p,t.expirationTime=s,e.memoizedState=u}}function Vi(e,t){"function"!=typeof e&&h("191",e),e.call(t)}function Gi(e,t,n){for(null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),e=t.firstEffect,t.firstEffect=t.lastEffect=null;null!==e;){var r=e.callback;null!==r&&(e.callback=null,Vi(r,n)),e=e.nextEffect}for(e=t.firstCapturedEffect,t.firstCapturedEffect=t.lastCapturedEffect=null;null!==e;)null!==(t=e.callback)&&(e.callback=null,Vi(t,n)),e=e.nextEffect}function Hi(e,t){return{value:e,source:t,stack:Tt(t)}}var Xi=ai(null),Yi=ai(null),Ki=ai(0);function qi(e){var t=e.type._context;ci(Ki,t._changedBits),ci(Yi,t._currentValue),ci(Xi,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode}function $i(e){var t=Ki.current,n=Yi.current;si(Xi),si(Yi),si(Ki),(e=e.type._context)._currentValue=n,e._changedBits=t}var Qi={},Zi=ai(Qi),Ji=ai(Qi),eo=ai(Qi);function to(e){return e===Qi&&h("174"),e}function no(e,t){ci(eo,t),ci(Ji,e),ci(Zi,Qi);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_r(null,"");break;default:t=_r(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}si(Zi),ci(Zi,t)}function ro(e){si(Zi),si(Ji),si(eo)}function io(e){Ji.current===e&&(si(Zi),si(Ji))}function oo(e,t,n){var r=e.memoizedState;r=null===(t=t(n,r))||void 0===t?r:a({},r,t),e.memoizedState=r,null!==(e=e.updateQueue)&&0===e.expirationTime&&(e.baseState=r)}var ao={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===sn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=va(),i=Fi(r=ma(r,e));i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Bi(e,i,r),ba(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=va(),i=Fi(r=ma(r,e));i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Bi(e,i,r),ba(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=va(),r=Fi(n=ma(n,e));r.tag=2,void 0!==t&&null!==t&&(r.callback=t),Bi(e,r,n),ba(e,n)}};function so(e,t,n,r,i,o){var a=e.stateNode;return e=e.type,"function"==typeof a.shouldComponentUpdate?a.shouldComponentUpdate(n,i,o):!e.prototype||!e.prototype.isPureReactComponent||(!u(t,n)||!u(r,i))}function co(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function uo(e,t){var n=e.type,r=e.stateNode,i=e.pendingProps,o=hi(e);r.props=i,r.state=e.memoizedState,r.refs=l,r.context=fi(e,o),null!==(o=e.updateQueue)&&(Li(e,o,i,r,t),r.state=e.memoizedState),"function"==typeof(o=e.type.getDerivedStateFromProps)&&(oo(e,o,i),r.state=e.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(n=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),n!==r.state&&ao.enqueueReplaceState(r,r.state,null),null!==(o=e.updateQueue)&&(Li(e,o,i,r,t),r.state=e.memoizedState)),"function"==typeof r.componentDidMount&&(e.effectTag|=4)}var po=Array.isArray;function lo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){var r=void 0;(n=n._owner)&&(2!==n.tag&&h("110"),r=n.stateNode),r||h("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs===l?r.refs={}:r.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&h("148"),n._owner||h("254",e)}return e}function ho(e,t){"textarea"!==e.type&&h("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function fo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=xi(e,t,n)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Pi(n,e.mode,r)).return=e,t):((t=i(t,n,r)).return=e,t)}function c(e,t,n,r){return null!==t&&t.type===n.type?((r=i(t,n.props,r)).ref=lo(e,t,n),r.return=e,r):((r=Ei(n,e.mode,r)).ref=lo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ki(n,e.mode,r)).return=e,t):((t=i(t,n.children||[],r)).return=e,t)}function p(e,t,n,r,o){return null===t||10!==t.tag?((t=wi(n,e.mode,r,o)).return=e,t):((t=i(t,n,r)).return=e,t)}function l(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Pi(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case st:return(n=Ei(t,e.mode,n)).ref=lo(e,null,t),n.return=e,n;case ct:return(t=ki(t,e.mode,n)).return=e,t}if(po(t)||bt(t))return(t=wi(t,e.mode,n,null)).return=e,t;ho(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case st:return n.key===i?n.type===ut?p(e,t,n.props.children,r,i):c(e,t,n,r):null;case ct:return n.key===i?u(e,t,n,r):null}if(po(n)||bt(n))return null!==i?null:p(e,t,n,r,null);ho(e,n)}return null}function d(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case st:return e=e.get(null===r.key?n:r.key)||null,r.type===ut?p(t,e,r.props.children,i,r.key):c(t,e,r,i);case ct:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(po(r)||bt(r))return p(t,e=e.get(n)||null,r,i,null);ho(t,r)}return null}function y(i,a,s,c){for(var u=null,p=null,h=a,y=a=0,g=null;null!==h&&y<s.length;y++){h.index>y?(g=h,h=null):g=h.sibling;var m=f(i,h,s[y],c);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,y),null===p?u=m:p.sibling=m,p=m,h=g}if(y===s.length)return n(i,h),u;if(null===h){for(;y<s.length;y++)(h=l(i,s[y],c))&&(a=o(h,a,y),null===p?u=h:p.sibling=h,p=h);return u}for(h=r(i,h);y<s.length;y++)(g=d(h,i,y,s[y],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?y:g.key),a=o(g,a,y),null===p?u=g:p.sibling=g,p=g);return e&&h.forEach(function(e){return t(i,e)}),u}function g(i,a,s,c){var u=bt(s);"function"!=typeof u&&h("150"),null==(s=u.call(s))&&h("151");for(var p=u=null,y=a,g=a=0,m=null,b=s.next();null!==y&&!b.done;g++,b=s.next()){y.index>g?(m=y,y=null):m=y.sibling;var v=f(i,y,b.value,c);if(null===v){y||(y=m);break}e&&y&&null===v.alternate&&t(i,y),a=o(v,a,g),null===p?u=v:p.sibling=v,p=v,y=m}if(b.done)return n(i,y),u;if(null===y){for(;!b.done;g++,b=s.next())null!==(b=l(i,b.value,c))&&(a=o(b,a,g),null===p?u=b:p.sibling=b,p=b);return u}for(y=r(i,y);!b.done;g++,b=s.next())null!==(b=d(y,i,g,b.value,c))&&(e&&null!==b.alternate&&y.delete(null===b.key?g:b.key),a=o(b,a,g),null===p?u=b:p.sibling=b,p=b);return e&&y.forEach(function(e){return t(i,e)}),u}return function(e,r,o,s){var c="object"==typeof o&&null!==o&&o.type===ut&&null===o.key;c&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case st:e:{for(u=o.key,c=r;null!==c;){if(c.key===u){if(10===c.tag?o.type===ut:c.type===o.type){n(e,c.sibling),(r=i(c,o.type===ut?o.props.children:o.props,s)).ref=lo(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===ut?((r=wi(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=Ei(o,e.mode,s)).ref=lo(e,r,o),s.return=e,e=s)}return a(e);case ct:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[],s)).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=ki(o,e.mode,s)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o,s)).return=e,e=r):(n(e,r),(r=Pi(o,e.mode,s)).return=e,e=r),a(e);if(po(o))return y(e,r,o,s);if(bt(o))return g(e,r,o,s);if(u&&ho(e,o),void 0===o&&!c)switch(e.tag){case 2:case 1:h("152",(s=e.type).displayName||s.name||"Component")}return n(e,r)}}var yo=fo(!0),go=fo(!1),mo=null,bo=null,vo=!1;function To(e,t){var n=new Si(5,null,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function So(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function xo(e){if(vo){var t=bo;if(t){var n=t;if(!So(e,t)){if(!(t=ni(n))||!So(e,t))return e.effectTag|=2,vo=!1,void(mo=e);To(mo,n)}mo=e,bo=ri(t)}else e.effectTag|=2,vo=!1,mo=e}}function Eo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;mo=e}function wo(e){if(e!==mo)return!1;if(!vo)return Eo(e),vo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Zr(t,e.memoizedProps))for(t=bo;t;)To(e,t),t=ni(t);return Eo(e),bo=mo?ni(e.stateNode):null,!0}function Po(){bo=mo=null,vo=!1}function ko(e,t,n){Co(e,t,n,t.expirationTime)}function Co(e,t,n,r){t.child=null===e?go(t,null,n,r):yo(t,e.child,n,r)}function Oo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function _o(e,t,n,r,i){Oo(e,t);var o=0!=(64&t.effectTag);if(!n&&!o)return r&&Ti(t,!1),Io(e,t);n=t.stateNode,ot.current=t;var a=o?null:n.render();return t.effectTag|=1,o&&(Co(e,t,null,i),t.child=null),Co(e,t,a,i),t.memoizedState=n.state,t.memoizedProps=n.props,r&&Ti(t,!0),t.child}function Ro(e){var t=e.stateNode;t.pendingContext?mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mi(0,t.context,!1),no(e,t.containerInfo)}function Mo(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){switch(i.tag){case 12:var o=0|i.stateNode;if(i.type===t&&0!=(o&n)){for(o=i;null!==o;){var a=o.alternate;if(0===o.expirationTime||o.expirationTime>r)o.expirationTime=r,null!==a&&(0===a.expirationTime||a.expirationTime>r)&&(a.expirationTime=r);else{if(null===a||!(0===a.expirationTime||a.expirationTime>r))break;a.expirationTime=r}o=o.return}o=null}else o=i.child;break;case 13:o=i.type===e.type?null:i.child;break;default:o=i.child}if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Io(e,t){if(null!==e&&t.child!==e.child&&h("153"),null!==t.child){var n=xi(e=t.child,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xi(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function No(e,t,n){if(0===t.expirationTime||t.expirationTime>n){switch(t.tag){case 3:Ro(t);break;case 2:vi(t);break;case 4:no(t,t.stateNode.containerInfo);break;case 13:qi(t)}return null}switch(t.tag){case 0:null!==e&&h("155");var r=t.type,i=t.pendingProps,o=hi(t);return r=r(i,o=fi(t,o)),t.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(o=t.type,t.tag=2,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,"function"==typeof(o=o.getDerivedStateFromProps)&&oo(t,o,i),i=vi(t),r.updater=ao,t.stateNode=r,r._reactInternalFiber=t,uo(t,n),e=_o(e,t,!0,i,n)):(t.tag=1,ko(e,t,r),t.memoizedProps=i,e=t.child),e;case 1:return i=t.type,n=t.pendingProps,pi.current||t.memoizedProps!==n?(i=i(n,r=fi(t,r=hi(t))),t.effectTag|=1,ko(e,t,i),t.memoizedProps=n,e=t.child):e=Io(e,t),e;case 2:if(i=vi(t),null===e)if(null===t.stateNode){var a=t.pendingProps,s=t.type;r=hi(t);var c=2===t.tag&&null!=t.type.contextTypes;a=new s(a,o=c?fi(t,r):l),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=ao,t.stateNode=a,a._reactInternalFiber=t,c&&((c=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,c.__reactInternalMemoizedMaskedChildContext=o),uo(t,n),r=!0}else{s=t.type,r=t.stateNode,c=t.memoizedProps,o=t.pendingProps,r.props=c;var u=r.context;a=fi(t,a=hi(t));var p=s.getDerivedStateFromProps;(s="function"==typeof p||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(c!==o||u!==a)&&co(t,r,o,a),Ni=!1;var f=t.memoizedState;u=r.state=f;var d=t.updateQueue;null!==d&&(Li(t,d,o,r,n),u=t.memoizedState),c!==o||f!==u||pi.current||Ni?("function"==typeof p&&(oo(t,p,o),u=t.memoizedState),(c=Ni||so(t,c,o,f,u,a))?(s||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||("function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"==typeof r.componentDidMount&&(t.effectTag|=4)):("function"==typeof r.componentDidMount&&(t.effectTag|=4),t.memoizedProps=o,t.memoizedState=u),r.props=o,r.state=u,r.context=a,r=c):("function"==typeof r.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.type,r=t.stateNode,o=t.memoizedProps,c=t.pendingProps,r.props=o,u=r.context,a=fi(t,a=hi(t)),(s="function"==typeof(p=s.getDerivedStateFromProps)||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(o!==c||u!==a)&&co(t,r,c,a),Ni=!1,u=t.memoizedState,f=r.state=u,null!==(d=t.updateQueue)&&(Li(t,d,c,r,n),f=t.memoizedState),o!==c||u!==f||pi.current||Ni?("function"==typeof p&&(oo(t,p,c),f=t.memoizedState),(p=Ni||so(t,o,c,u,f,a))?(s||"function"!=typeof r.UNSAFE_componentWillUpdate&&"function"!=typeof r.componentWillUpdate||("function"==typeof r.componentWillUpdate&&r.componentWillUpdate(c,f,a),"function"==typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(c,f,a)),"function"==typeof r.componentDidUpdate&&(t.effectTag|=4),"function"==typeof r.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof r.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=c,t.memoizedState=f),r.props=c,r.state=f,r.context=a,r=p):("function"!=typeof r.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return _o(e,t,r,i,n);case 3:return Ro(t),null!==(i=t.updateQueue)?(r=null!==(r=t.memoizedState)?r.element:null,Li(t,i,t.pendingProps,null,n),(i=t.memoizedState.element)===r?(Po(),e=Io(e,t)):(r=t.stateNode,(r=(null===e||null===e.child)&&r.hydrate)&&(bo=ri(t.stateNode.containerInfo),mo=t,r=vo=!0),r?(t.effectTag|=2,t.child=go(t,null,i,n)):(Po(),ko(e,t,i)),e=t.child)):(Po(),e=Io(e,t)),e;case 5:return to(eo.current),(i=to(Zi.current))!==(r=_r(i,t.type))&&(ci(Ji,t),ci(Zi,r)),null===e&&xo(t),i=t.type,c=t.memoizedProps,r=t.pendingProps,o=null!==e?e.memoizedProps:null,pi.current||c!==r||((c=1&t.mode&&!!r.hidden)&&(t.expirationTime=1073741823),c&&1073741823===n)?(c=r.children,Zr(i,r)?c=null:o&&Zr(i,o)&&(t.effectTag|=16),Oo(e,t),1073741823!==n&&1&t.mode&&r.hidden?(t.expirationTime=1073741823,t.memoizedProps=r,e=null):(ko(e,t,c),t.memoizedProps=r,e=t.child)):e=Io(e,t),e;case 6:return null===e&&xo(t),t.memoizedProps=t.pendingProps,null;case 16:return null;case 4:return no(t,t.stateNode.containerInfo),i=t.pendingProps,pi.current||t.memoizedProps!==i?(null===e?t.child=yo(t,null,i,n):ko(e,t,i),t.memoizedProps=i,e=t.child):e=Io(e,t),e;case 14:return i=t.type.render,n=t.pendingProps,r=t.ref,pi.current||t.memoizedProps!==n||r!==(null!==e?e.ref:null)?(ko(e,t,i=i(n,r)),t.memoizedProps=n,e=t.child):e=Io(e,t),e;case 10:return n=t.pendingProps,pi.current||t.memoizedProps!==n?(ko(e,t,n),t.memoizedProps=n,e=t.child):e=Io(e,t),e;case 11:return n=t.pendingProps.children,pi.current||null!==n&&t.memoizedProps!==n?(ko(e,t,n),t.memoizedProps=n,e=t.child):e=Io(e,t),e;case 15:return n=t.pendingProps,t.memoizedProps===n?e=Io(e,t):(ko(e,t,n.children),t.memoizedProps=n,e=t.child),e;case 13:return function(e,t,n){var r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=!0;if(pi.current)a=!1;else if(o===i)return t.stateNode=0,qi(t),Io(e,t);var s=i.value;if(t.memoizedProps=i,null===o)s=1073741823;else if(o.value===i.value){if(o.children===i.children&&a)return t.stateNode=0,qi(t),Io(e,t);s=0}else{var c=o.value;if(c===s&&(0!==c||1/c==1/s)||c!=c&&s!=s){if(o.children===i.children&&a)return t.stateNode=0,qi(t),Io(e,t);s=0}else if(s="function"==typeof r._calculateChangedBits?r._calculateChangedBits(c,s):1073741823,0==(s|=0)){if(o.children===i.children&&a)return t.stateNode=0,qi(t),Io(e,t)}else Mo(t,r,s,n)}return t.stateNode=s,qi(t),ko(e,t,i.children),t.child}(e,t,n);case 12:e:if(r=t.type,o=t.pendingProps,c=t.memoizedProps,i=r._currentValue,a=r._changedBits,pi.current||0!==a||c!==o){if(t.memoizedProps=o,void 0!==(s=o.unstable_observedBits)&&null!==s||(s=1073741823),t.stateNode=s,0!=(a&s))Mo(t,r,a,n);else if(c===o){e=Io(e,t);break e}n=(n=o.children)(i),t.effectTag|=1,ko(e,t,n),e=t.child}else e=Io(e,t);return e;default:h("156")}}function Ao(e){e.effectTag|=4}var jo=void 0,Fo=void 0,Do=void 0;function Bo(e,t){var n=t.pendingProps;switch(t.tag){case 1:return null;case 2:return yi(t),null;case 3:ro(),gi();var r=t.stateNode;return r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(wo(t),t.effectTag&=-3),jo(t),null;case 5:io(t),r=to(eo.current);var i=t.type;if(null!==e&&null!=t.stateNode){var o=e.memoizedProps,a=t.stateNode,s=to(Zi.current);a=Gr(a,i,o,n,r),Fo(e,t,a,i,o,n,r,s),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!n)return null===t.stateNode&&h("166"),null;if(e=to(Zi.current),wo(t))n=t.stateNode,i=t.type,o=t.memoizedProps,n[z]=t,n[L]=o,r=Xr(n,i,o,e,r),t.updateQueue=r,null!==r&&Ao(t);else{(e=zr(i,n,r,e))[z]=t,e[L]=n;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}Vr(e,i,n,r),Qr(i,n)&&Ao(t),t.stateNode=e}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,n);else{if("string"!=typeof n)return null===t.stateNode&&h("166"),null;r=to(eo.current),to(Zi.current),wo(t)?(r=t.stateNode,n=t.memoizedProps,r[z]=t,Yr(r,n)&&Ao(t)):((r=Lr(n,r))[z]=t,t.stateNode=r)}return null;case 14:case 16:case 10:case 11:case 15:return null;case 4:return ro(),jo(t),null;case 13:return $i(t),null;case 12:return null;case 0:h("167");default:h("156")}}function Wo(e,t){var n=t.source;null===t.stack&&null!==n&&Tt(n),null!==n&&vt(n),t=t.value,null!==e&&2===e.tag&&vt(e);try{t&&t.suppressReactErrorLogging||console.error(t)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}function Uo(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){ya(e,t)}else t.current=null}function zo(e){switch(Ii(e),e.tag){case 2:Uo(e);var t=e.stateNode;if("function"==typeof t.componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){ya(e,t)}break;case 5:Uo(e);break;case 4:Go(e)}}function Lo(e){return 5===e.tag||3===e.tag||4===e.tag}function Vo(e){e:{for(var t=e.return;null!==t;){if(Lo(t)){var n=t;break e}t=t.return}h("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:h("161")}16&n.effectTag&&(Ir(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Lo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=t,a=i.stateNode,s=n;8===o.nodeType?o.parentNode.insertBefore(a,s):o.insertBefore(a,s)}else t.insertBefore(i.stateNode,n);else r?(o=t,a=i.stateNode,8===o.nodeType?o.parentNode.insertBefore(a,o):o.appendChild(a)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Go(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&h("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var o=t,a=o;;)if(zo(a),null!==a.child&&4!==a.tag)a.child.return=a,a=a.child;else{if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}i?(o=r,a=t.stateNode,8===o.nodeType?o.parentNode.removeChild(a):o.removeChild(a)):r.removeChild(t.stateNode)}else if(4===t.tag?r=t.stateNode.containerInfo:zo(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function Ho(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&(n[L]=r,Hr(n,o,i,e,r))}break;case 6:null===t.stateNode&&h("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 15:case 16:break;default:h("163")}}function Xo(e,t,n){(n=Fi(n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Za(r),Wo(e,t)},n}function Yo(e,t,n){(n=Fi(n)).tag=3;var r=e.stateNode;return null!==r&&"function"==typeof r.componentDidCatch&&(n.callback=function(){null===pa?pa=new Set([this]):pa.add(this);var n=t.value,r=t.stack;Wo(e,t),this.componentDidCatch(n,{componentStack:null!==r?r:""})}),n}function Ko(e,t,n,r,i,o){n.effectTag|=512,n.firstEffect=n.lastEffect=null,r=Hi(r,n),e=t;do{switch(e.tag){case 3:return e.effectTag|=1024,void Wi(e,r=Xo(e,r,o),o);case 2:if(t=r,n=e.stateNode,0==(64&e.effectTag)&&null!==n&&"function"==typeof n.componentDidCatch&&(null===pa||!pa.has(n)))return e.effectTag|=1024,void Wi(e,r=Yo(e,t,o),o)}e=e.return}while(null!==e)}function qo(e){switch(e.tag){case 2:yi(e);var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return ro(),gi(),1024&(t=e.effectTag)?(e.effectTag=-1025&t|64,e):null;case 5:return io(e),null;case 16:return 1024&(t=e.effectTag)?(e.effectTag=-1025&t|64,e):null;case 4:return ro(),null;case 13:return $i(e),null;default:return null}}jo=function(){},Fo=function(e,t,n){(t.updateQueue=n)&&Ao(t)},Do=function(e,t,n,r){n!==r&&Ao(t)};var $o=Jr(),Qo=2,Zo=$o,Jo=0,ea=0,ta=!1,na=null,ra=null,ia=0,oa=-1,aa=!1,sa=null,ca=!1,ua=!1,pa=null;function la(){if(null!==na)for(var e=na.return;null!==e;){var t=e;switch(t.tag){case 2:yi(t);break;case 3:ro(),gi();break;case 5:io(t);break;case 4:ro();break;case 13:$i(t)}e=e.return}ra=null,ia=0,oa=-1,aa=!1,na=null,ua=!1}function ha(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(512&e.effectTag)){t=Bo(t,e);var i=e;if(1073741823===ia||1073741823!==i.expirationTime){var o=0;switch(i.tag){case 3:case 2:var a=i.updateQueue;null!==a&&(o=a.expirationTime)}for(a=i.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;i.expirationTime=o}if(null!==t)return t;if(null!==n&&0==(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){ua=!0;break}e=n}else{if(null!==(e=qo(e)))return e.effectTag&=511,e;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==r)return r;if(null===n)break;e=n}}return null}function fa(e){var t=No(e.alternate,e,ia);return null===t&&(t=ha(e)),ot.current=null,t}function da(e,t,n){ta&&h("243"),ta=!0,t===ia&&e===ra&&null!==na||(la(),ia=t,oa=-1,na=xi((ra=e).current,null,ia),e.pendingCommitExpirationTime=0);var r=!1;for(aa=!n||ia<=Qo;;){try{if(n)for(;null!==na&&!Qa();)na=fa(na);else for(;null!==na;)na=fa(na)}catch(t){if(null===na)r=!0,Za(t);else{null===na&&h("271");var i=(n=na).return;if(null===i){r=!0,Za(t);break}Ko(e,i,n,t,0,ia),na=ha(n)}}break}if(ta=!1,r)return null;if(null===na){if(ua)return e.pendingCommitExpirationTime=t,e.current.alternate;aa&&h("262"),0<=oa&&setTimeout(function(){var t=e.current.expirationTime;0!==t&&(0===e.remainingExpirationTime||e.remainingExpirationTime<t)&&La(e,t)},oa),function(e){null===Ca&&h("246"),Ca.remainingExpirationTime=e}(e.current.expirationTime)}return null}function ya(e,t){var n;e:{for(ta&&!ca&&h("263"),n=e.return;null!==n;){switch(n.tag){case 2:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromCatch||"function"==typeof r.componentDidCatch&&(null===pa||!pa.has(r))){Bi(n,e=Yo(n,e=Hi(t,e),1),1),ba(n,1),n=void 0;break e}break;case 3:Bi(n,e=Xo(n,e=Hi(t,e),1),1),ba(n,1),n=void 0;break e}n=n.return}3===e.tag&&(Bi(e,n=Xo(e,n=Hi(t,e),1),1),ba(e,1)),n=void 0}return n}function ga(){var e=2+25*(1+((va()-2+500)/25|0));return e<=Jo&&(e=Jo+1),Jo=e}function ma(e,t){return e=0!==ea?ea:ta?ca?1:ia:1&t.mode?Fa?2+10*(1+((e-2+15)/10|0)):2+25*(1+((e-2+500)/25|0)):1,Fa&&(0===_a||e>_a)&&(_a=e),e}function ba(e,t){for(;null!==e;){if((0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>t)&&(e.alternate.expirationTime=t),null===e.return){if(3!==e.tag)break;var n=e.stateNode;!ta&&0!==ia&&t<ia&&la();var r=n.current.expirationTime;ta&&!ca&&ra===n||La(n,r),Wa>Ba&&h("185")}e=e.return}}function va(){return Zo=Jr()-$o,Qo=2+(Zo/10|0)}function Ta(e){var t=ea;ea=2+25*(1+((va()-2+500)/25|0));try{return e()}finally{ea=t}}function Sa(e,t,n,r,i){var o=ea;ea=1;try{return e(t,n,r,i)}finally{ea=o}}var xa=null,Ea=null,wa=0,Pa=void 0,ka=!1,Ca=null,Oa=0,_a=0,Ra=!1,Ma=!1,Ia=null,Na=null,Aa=!1,ja=!1,Fa=!1,Da=null,Ba=1e3,Wa=0,Ua=1;function za(e){if(0!==wa){if(e>wa)return;null!==Pa&&ti(Pa)}var t=Jr()-$o;wa=e,Pa=ei(Ga,{timeout:10*(e-2)-t})}function La(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===Ea?(xa=Ea=e,e.nextScheduledRoot=e):(Ea=Ea.nextScheduledRoot=e).nextScheduledRoot=xa;else{var n=e.remainingExpirationTime;(0===n||t<n)&&(e.remainingExpirationTime=t)}ka||(Aa?ja&&(Ca=e,Oa=1,qa(e,1,!1)):1===t?Ha():za(t))}function Va(){var e=0,t=null;if(null!==Ea)for(var n=Ea,r=xa;null!==r;){var i=r.remainingExpirationTime;if(0===i){if((null===n||null===Ea)&&h("244"),r===r.nextScheduledRoot){xa=Ea=r.nextScheduledRoot=null;break}if(r===xa)xa=i=r.nextScheduledRoot,Ea.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===Ea){(Ea=n).nextScheduledRoot=xa,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===e||i<e)&&(e=i,t=r),r===Ea)break;n=r,r=r.nextScheduledRoot}}null!==(n=Ca)&&n===t&&1===e?Wa++:Wa=0,Ca=t,Oa=e}function Ga(e){Xa(0,!0,e)}function Ha(){Xa(1,!1,null)}function Xa(e,t,n){if(Na=n,Va(),t)for(;null!==Ca&&0!==Oa&&(0===e||e>=Oa)&&(!Ra||va()>=Oa);)va(),qa(Ca,Oa,!Ra),Va();else for(;null!==Ca&&0!==Oa&&(0===e||e>=Oa);)qa(Ca,Oa,!1),Va();null!==Na&&(wa=0,Pa=null),0!==Oa&&za(Oa),Na=null,Ra=!1,Ka()}function Ya(e,t){ka&&h("253"),Ca=e,Oa=t,qa(e,t,!1),Ha(),Ka()}function Ka(){if(Wa=0,null!==Da){var e=Da;Da=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){Ma||(Ma=!0,Ia=e)}}}if(Ma)throw e=Ia,Ia=null,Ma=!1,e}function qa(e,t,n){ka&&h("245"),ka=!0,n?null!==(n=e.finishedWork)?$a(e,n,t):null!==(n=da(e,t,!0))&&(Qa()?e.finishedWork=n:$a(e,n,t)):null!==(n=e.finishedWork)?$a(e,n,t):null!==(n=da(e,t,!1))&&$a(e,n,t),ka=!1}function $a(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===Da?Da=[r]:Da.push(r),r._defer))return e.finishedWork=t,void(e.remainingExpirationTime=0);if(e.finishedWork=null,ca=ta=!0,(n=t.stateNode).current===t&&h("177"),0===(r=n.pendingCommitExpirationTime)&&h("261"),n.pendingCommitExpirationTime=0,va(),ot.current=null,1<t.effectTag)if(null!==t.lastEffect){t.lastEffect.nextEffect=t;var i=t.firstEffect}else i=t;else i=t.firstEffect;qr=Rn;var o=c();if(Vn(o)){if("selectionStart"in o)var a={start:o.selectionStart,end:o.selectionEnd};else e:{var s=window.getSelection&&window.getSelection();if(s&&0!==s.rangeCount){a=s.anchorNode;var u=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{a.nodeType,l.nodeType}catch(e){a=null;break e}var f=0,d=-1,y=-1,g=0,m=0,b=o,v=null;t:for(;;){for(var T;b!==a||0!==u&&3!==b.nodeType||(d=f+u),b!==l||0!==s&&3!==b.nodeType||(y=f+s),3===b.nodeType&&(f+=b.nodeValue.length),null!==(T=b.firstChild);)v=b,b=T;for(;;){if(b===o)break t;if(v===a&&++g===u&&(d=f),v===l&&++m===s&&(y=f),null!==(T=b.nextSibling))break;v=(b=v).parentNode}b=T}a=-1===d||-1===y?null:{start:d,end:y}}else a=null}a=a||{start:0,end:0}}else a=null;for($r={focusedElem:o,selectionRange:a},Mn(!1),sa=i;null!==sa;){o=!1,a=void 0;try{for(;null!==sa;){if(256&sa.effectTag){var S=sa.alternate;switch((u=sa).tag){case 2:if(256&u.effectTag&&null!==S){var x=S.memoizedProps,E=S.memoizedState,w=u.stateNode;w.props=u.memoizedProps,w.state=u.memoizedState;var P=w.getSnapshotBeforeUpdate(x,E);w.__reactInternalSnapshotBeforeUpdate=P}break;case 3:case 5:case 6:case 4:break;default:h("163")}}sa=sa.nextEffect}}catch(e){o=!0,a=e}o&&(null===sa&&h("178"),ya(sa,a),null!==sa&&(sa=sa.nextEffect))}for(sa=i;null!==sa;){S=!1,x=void 0;try{for(;null!==sa;){var k=sa.effectTag;if(16&k&&Ir(sa.stateNode,""),128&k){var C=sa.alternate;if(null!==C){var O=C.ref;null!==O&&("function"==typeof O?O(null):O.current=null)}}switch(14&k){case 2:Vo(sa),sa.effectTag&=-3;break;case 6:Vo(sa),sa.effectTag&=-3,Ho(sa.alternate,sa);break;case 4:Ho(sa.alternate,sa);break;case 8:Go(E=sa),E.return=null,E.child=null,E.alternate&&(E.alternate.child=null,E.alternate.return=null)}sa=sa.nextEffect}}catch(e){S=!0,x=e}S&&(null===sa&&h("178"),ya(sa,x),null!==sa&&(sa=sa.nextEffect))}if(O=$r,C=c(),k=O.focusedElem,S=O.selectionRange,C!==k&&p(document.documentElement,k)){null!==S&&Vn(k)&&(C=S.start,void 0===(O=S.end)&&(O=C),"selectionStart"in k?(k.selectionStart=C,k.selectionEnd=Math.min(O,k.value.length)):window.getSelection&&(C=window.getSelection(),x=k[de()].length,O=Math.min(S.start,x),S=void 0===S.end?O:Math.min(S.end,x),!C.extend&&O>S&&(x=S,S=O,O=x),x=Ln(k,O),E=Ln(k,S),x&&E&&(1!==C.rangeCount||C.anchorNode!==x.node||C.anchorOffset!==x.offset||C.focusNode!==E.node||C.focusOffset!==E.offset)&&((w=document.createRange()).setStart(x.node,x.offset),C.removeAllRanges(),O>S?(C.addRange(w),C.extend(E.node,E.offset)):(w.setEnd(E.node,E.offset),C.addRange(w))))),C=[];for(O=k;O=O.parentNode;)1===O.nodeType&&C.push({element:O,left:O.scrollLeft,top:O.scrollTop});for("function"==typeof k.focus&&k.focus(),k=0;k<C.length;k++)(O=C[k]).element.scrollLeft=O.left,O.element.scrollTop=O.top}for($r=null,Mn(qr),qr=null,n.current=t,sa=i;null!==sa;){i=!1,k=void 0;try{for(C=r;null!==sa;){var _=sa.effectTag;if(36&_){var R=sa.alternate;switch(S=C,(O=sa).tag){case 2:var M=O.stateNode;if(4&O.effectTag)if(null===R)M.props=O.memoizedProps,M.state=O.memoizedState,M.componentDidMount();else{var I=R.memoizedProps,N=R.memoizedState;M.props=O.memoizedProps,M.state=O.memoizedState,M.componentDidUpdate(I,N,M.__reactInternalSnapshotBeforeUpdate)}var A=O.updateQueue;null!==A&&(M.props=O.memoizedProps,M.state=O.memoizedState,Gi(O,A,M));break;case 3:var j=O.updateQueue;if(null!==j){if(x=null,null!==O.child)switch(O.child.tag){case 5:x=O.child.stateNode;break;case 2:x=O.child.stateNode}Gi(O,j,x)}break;case 5:var F=O.stateNode;null===R&&4&O.effectTag&&Qr(O.type,O.memoizedProps)&&F.focus();break;case 6:case 4:case 15:case 16:break;default:h("163")}}if(128&_){O=void 0;var D=sa.ref;if(null!==D){var B=sa.stateNode;switch(sa.tag){case 5:O=B;break;default:O=B}"function"==typeof D?D(O):D.current=O}}var W=sa.nextEffect;sa.nextEffect=null,sa=W}}catch(e){i=!0,k=e}i&&(null===sa&&h("178"),ya(sa,k),null!==sa&&(sa=sa.nextEffect))}ta=ca=!1,Mi(t.stateNode),0===(t=n.current.expirationTime)&&(pa=null),e.remainingExpirationTime=t}function Qa(){return!(null===Na||Na.timeRemaining()>Ua)&&(Ra=!0)}function Za(e){null===Ca&&h("246"),Ca.remainingExpirationTime=0,Ma||(Ma=!0,Ia=e)}function Ja(e,t){var n=Aa;Aa=!0;try{return e(t)}finally{(Aa=n)||ka||Ha()}}function es(e,t){if(Aa&&!ja){ja=!0;try{return e(t)}finally{ja=!1}}return e(t)}function ts(e,t){ka&&h("187");var n=Aa;Aa=!0;try{return Sa(e,t)}finally{Aa=n,Ha()}}function ns(e,t,n){if(Fa)return e(t,n);Aa||ka||0===_a||(Xa(_a,!1,null),_a=0);var r=Fa,i=Aa;Aa=Fa=!0;try{return e(t,n)}finally{Fa=r,(Aa=i)||ka||Ha()}}function rs(e){var t=Aa;Aa=!0;try{Sa(e)}finally{(Aa=t)||ka||Xa(1,!1,null)}}function is(e,t,n,r,i){var o=t.current;if(n){var a;n=n._reactInternalFiber;e:{for(2===sn(n)&&2===n.tag||h("170"),a=n;3!==a.tag;){if(di(a)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}(a=a.return)||h("171")}a=a.stateNode.context}n=di(n)?bi(n,a):a}else n=l;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=Fi(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Bi(o,i,r),ba(o,r),r}function os(e){var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?h("188"):h("268",Object.keys(e))),null===(e=pn(t))?null:e.stateNode}function as(e,t,n,r){var i=t.current;return is(e,t,n,i=ma(va(),i),r)}function ss(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function cs(e){var t=e.findFiberByHostInstance;return function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Oi=Ri(function(e){return t.onCommitFiberRoot(n,e)}),_i=Ri(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}(a({},e,{findHostInstanceByFiber:function(e){return null===(e=pn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}var us=Ja,ps=ns,ls=function(){ka||0===_a||(Xa(_a,!1,null),_a=0)};function hs(e){this._expirationTime=ga(),this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function fs(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function ds(e,t,n){this._internalRoot=Ci(e,t,n)}function ys(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function gs(e,t,n,r,i){ys(n)||h("200");var o=n._reactRootContainer;if(o){if("function"==typeof i){var a=i;i=function(){var e=ss(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ds(e,!1,t)}(n,r),"function"==typeof i){var s=i;i=function(){var e=ss(o._internalRoot);s.call(e)}}es(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return ss(o._internalRoot)}function ms(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return ys(t)||h("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ct,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}We.injectFiberControlledHostComponent(Kr),hs.prototype.render=function(e){this._defer||h("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new fs;return is(e,t,null,n,r._onCommit),r},hs.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},hs.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||h("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&h("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,Ya(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},hs.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},fs.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},fs.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&h("191",n),n()}}},ds.prototype.render=function(e,t){var n=this._internalRoot,r=new fs;return null!==(t=void 0===t?null:t)&&r.then(t),as(e,n,null,r._onCommit),r},ds.prototype.unmount=function(e){var t=this._internalRoot,n=new fs;return null!==(e=void 0===e?null:e)&&n.then(e),as(null,t,null,n._onCommit),n},ds.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new fs;return null!==(n=void 0===n?null:n)&&i.then(n),as(t,r,e,i._onCommit),i},ds.prototype.createBatch=function(){var e=new hs(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime<=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Ye=us,Ke=ps,qe=ls;var bs={createPortal:ms,findDOMNode:function(e){return null==e?null:1===e.nodeType?e:os(e)},hydrate:function(e,t,n){return gs(null,e,t,!0,n)},render:function(e,t,n){return gs(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&h("38"),gs(e,t,n,!1,r)},unmountComponentAtNode:function(e){return ys(e)||h("40"),!!e._reactRootContainer&&(es(function(){gs(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return ms.apply(void 0,arguments)},unstable_batchedUpdates:Ja,unstable_deferredUpdates:Ta,unstable_interactiveUpdates:ns,flushSync:ts,unstable_flushControlled:rs,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:W,EventPluginRegistry:w,EventPropagators:ne,ReactControlledComponent:Xe,ReactDOMComponentTree:X,ReactDOMEventListener:Fn},unstable_createRoot:function(e,t){return new ds(e,!0,null!=t&&!0===t.hydrate)}};cs({findFiberByHostInstance:V,bundleType:0,version:"16.4.2",rendererPackageName:"react-dom"});var vs={default:bs},Ts=vs&&bs||vs;e.exports=Ts.default?Ts.default:Ts},function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},function(e,t,n){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!r.call(t,n[a])||!i(e[n[a]],t[n[a]]))return!1;return!0}},function(e,t,n){"use strict";var r=n(199);e.exports=function e(t,n){return!(!t||!n)&&(t===n||!r(t)&&(r(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}},function(e,t,n){"use strict";var r=n(200);e.exports=function(e){return r(e)&&3==e.nodeType}},function(e,t,n){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(103),a=n(202),s=n(58),c=o.wrapPropsSyncNodeReceivableComponent(a.WhiteboardView),u=function(e){function t(t){var n=e.call(this,t)||this;return n.renderFactories=new s.TagBoxRenderFactories(t.room.deviceType),n}return r(t,e),t.prototype.render=function(){var e=this.props.room,t=e.operator,n=e.displayerSyncNode,r=e.mouseCursorDefinition;return i.createElement(c,{mouseCursorDefinition:r,renderFactories:this.renderFactories,operator:t,propsSyncNode:n,willInterceptKeyboardEvent:this.props.willInterceptKeyboardEvent,focusTextareaSetter:this.props.focusTextareaSetter,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onIsMouseOrTouchOperatingChanged:this.props.onIsMouseOrTouchOperatingChanged})},t}(i.Component);t.RoomWhiteboard=u;var p=function(e){function t(t){var n=e.call(this,t)||this;return n.renderFactories=new s.TagBoxRenderFactories(t.player.deviceType),n}return r(t,e),t.prototype.render=function(){var e=this.props.player,t=e.operator,n=e.displayerSyncNode,r=e.mouseCursorDefinition;return i.createElement(c,{mouseCursorDefinition:r,renderFactories:this.renderFactories,operator:t,propsSyncNode:n})},t}(i.Component);t.PlayerWhiteboard=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(203),s=n(213),c=n(102),u=n(215),p=function(e){function t(t){var n=e.call(this,t)||this;if(n.setSVGWhiteboard=function(e){n.eventHandler&&n.eventHandler.setSVGWhiteboard(e)},n.onEventInterceptorsReady=function(e){n.eventHandler&&(n.eventHandler.interceptMouseOrTouchEvent=e.interceptMouseOrTouchEvent)},n.state={isSpacePress:!1},t.operator){var r=n.shouldDisableOperations(t);n.eventHandler=new s.WhiteboardEventHandler(t.operator,r,t.tagBoxes),n.eventHandler.onSpaceKeyEvent=function(e){return n.setState({isSpacePress:e})}}return n}return r(t,e),t.prototype.componentWillReceiveProps=function(e,t){this.eventHandler&&(this.eventHandler.disableOperations=this.shouldDisableOperations(e),this.eventHandler.tagBoxes=e.tagBoxes,this.eventHandler.onIsMouseOrTouchOperatingChanged=e.onIsMouseOrTouchOperatingChanged,this.eventHandler.willInterceptKeyboardEvent=e.willInterceptKeyboardEvent,this.eventHandler.onKeyDown=e.onKeyDown,this.eventHandler.onKeyUp=e.onKeyUp)},t.prototype.componentWillUnmount=function(){this.eventHandler&&this.eventHandler.dispose()},t.prototype.shouldDisableOperations=function(e){var t=e.phase;return!!e.disableOperations||t!==c.RoomPhase.Connected},t.prototype.svgTransform=function(){var e=this.props.transform;return"translate("+e.deltaX+","+e.deltaY+") scale("+e.scaleX+","+e.scaleY+")"},t.prototype.cursorStyleName=function(){if(!this.props.operator.willDisplayMouseCursor)return"";var e=this.state.isSpacePress?"hand":this.props.appliance;return this.props.mouseCursorDefinition[e]},t.prototype.createTextareaLayoutProps=function(){var e=this.props.tagBoxes.find(function(e){return"myText"===e.type});if(e){var t=this.props.transform,n=e.left,r=e.right,i=e.top,o=e.bottom;return n=n*t.scaleX+t.deltaX,r=r*t.scaleX+t.deltaX,{x:n,y:i=i*t.scaleY+t.deltaY,width:r-n,height:(o=o*t.scaleY+t.deltaY)-i,scale:t.scaleX,operator:this.props.operator,payload:e.payload}}return{x:0,y:0,width:0,height:0,scale:1}},t.prototype.render=function(){return o.createElement("div",{className:"svg-whiteboard "+this.cursorStyleName(),ref:this.setSVGWhiteboard},o.createElement(u.TextareaLayout,i({},this.createTextareaLayoutProps(),{focusTextareaSetter:this.props.focusTextareaSetter})),o.createElement(a.TagBoxesLayout,{tagBoxes:this.props.tagBoxes,transform:this.props.transform,renderFactories:this.props.renderFactories,onEventInterceptorsReady:this.onEventInterceptorsReady}),o.createElement("div",{className:"svg-background"},o.createElement("svg",{width:"100%",height:"100%",version:"1.2"},o.createElement("g",{transform:this.svgTransform()},this.props.svgNodes))))},t}(o.Component);t.WhiteboardView=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(1),a=n(58);!function(e){e[e.TransformableDiv=0]="TransformableDiv",e[e.FixedDiv=1]="FixedDiv",e[e.None=2]="None"}(i||(i={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.transformableDiv=null,t.fixedDiv=null,t.tagBoxRenders={},t.setTransformableDiv=function(e){t.transformableDiv=e},t.setFixedDiv=function(e){t.fixedDiv=e},t.setShadowDiv=function(e){for(var n in t.tagBoxRenders){var r=t.tagBoxRenders[n];r.setShadowDiv&&r.setShadowDiv(e)}t.shadowDiv=e},t.interceptMouseOrTouchEvent=function(e,n){var r=t.findRenderWithEvent(e,n),i={};if(r){var o=r.render,a=r.source;if(o.interceptEvent&&o.interceptEvent(e,n,a))return{targetsMap:i,intercepted:!0};for(var s in t.tagBoxRenders){var c=t.tagBoxRenders[s],u=c.findMouseOrTouchEventTargetId&&c.findMouseOrTouchEventTargetId(e,a);u&&(i[s]=u)}}return{targetsMap:i,intercepted:!1}},t}return r(t,e),t.prototype.componentWillMount=function(){this.props.onEventInterceptorsReady({interceptMouseOrTouchEvent:this.interceptMouseOrTouchEvent})},t.prototype.componentWillReceiveProps=function(e){this.props.tagBoxes===e.tagBoxes&&this.props.transform===e.transform||this.refreshRenderAndTheirParams(e)},t.prototype.findRenderWithEvent=function(e,t){var n,r,o=this.findBelongsDivAndChildElement(e.target),s=o.belongsDiv,c=o.childElement;switch(s){case i.TransformableDiv:n=a.TagBoxEventSource.Transformable,r=this.transformableDiv;break;case i.FixedDiv:n=a.TagBoxEventSource.Fixed,r=this.fixedDiv;break;default:return}var u=this.keyOfChild(c,r);return{render:this.tagBoxRenders[u],source:n}},t.prototype.findBelongsDivAndChildElement=function(e){for(;e.parentElement;){if(e.parentElement===this.transformableDiv)return{belongsDiv:i.TransformableDiv,childElement:e};if(e.parentElement===this.fixedDiv)return{belongsDiv:i.FixedDiv,childElement:e};e=e.parentElement}return{belongsDiv:i.None}},t.prototype.keyOfChild=function(e,t){for(var n=0;n<t.children.length;++n)if(t.children.item(n)===e){var r=0;for(var i in this.tagBoxRenders){if(r===n)return i;r++}break}throw new Error("can't find key for child")},t.prototype.allTagBoxRenders=function(){var e=[];for(var t in this.tagBoxRenders)e.push(this.tagBoxRenders[t]);return e},t.prototype.refreshRenderAndTheirParams=function(e){for(var t={},n=0,r=e.tagBoxes;n<r.length;n++){var i=r[n];(c=this.tagBoxRenders[i.key])&&c.type!==i.type&&(c=void 0);var o={left:i.left,right:i.right,top:i.top,bottom:i.bottom},a={key:i.key,rectangle:o,transform:e.transform,payload:i.payload};c?c.updateParams(a):((c=this.props.renderFactories.createRender(i.type)).updateParams(a),this.shadowDiv&&c.setShadowDiv&&c.setShadowDiv(this.shadowDiv)),t[i.key]=c,delete this.tagBoxRenders[i.key]}for(var s in this.tagBoxRenders){var c;(c=this.tagBoxRenders[s]).setShadowDiv&&c.setShadowDiv(null)}this.tagBoxRenders=t},t.prototype.render=function(){var e=this.allTagBoxRenders();return[o.createElement("div",{key:"fixed",className:"tag-boxes-fixed",ref:this.setFixedDiv},e.map(function(e){return e.renderFixed&&e.renderFixed()})),o.createElement("div",{key:"shadow",className:"tag-boxes-shadow",ref:this.setShadowDiv})]},t}(o.Component);t.TagBoxesLayout=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Transformable="transformable",e.Fixed="fixed"}(t.TagBoxEventSource||(t.TagBoxEventSource={})),function(e){e.Mouse="mouse",e.Touch="touch"}(t.TagBoxEventKind||(t.TagBoxEventKind={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(206),i=n(209),o=n(212),a=function(){function e(e){this.deviceType=e}return e.prototype.createRender=function(e){switch(e){case"myText":return new r.TextEditorRender;case"otherText":return new r.TextStateRender;case"selectedGroup":return new i.SelectedGroupRender;case"editable":return new i.EditableRender;case"editor":return new o.EditorRender(this.deviceType)}throw new Error('unrecognized type "'+e+'" of TagBox')},e}();t.TagBoxRenderFactories=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.TextEditorRender=r.TextEditorRender;var i=n(208);t.TextStateRender=i.TextStateRender},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(109),o=function(){function e(){}return Object.defineProperty(e.prototype,"type",{get:function(){return"myText"},enumerable:!0,configurable:!0}),e.prototype.interceptEvent=function(){return!0},e.prototype.updateParams=function(e){this.params=e},e.prototype.renderFixed=function(){return r.createElement(i.FixedTextareaBox,{key:this.params.key,params:this.params})},e.prototype.renderTransformable=function(){return null},e}();t.TextEditorRender=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(109),o=function(){function e(){}return Object.defineProperty(e.prototype,"type",{get:function(){return"otherText"},enumerable:!0,configurable:!0}),e.prototype.updateParams=function(e){this.params=e},e.prototype.renderFixed=function(){return r.createElement(i.FixedTextareaBox,{key:this.params.key,params:this.params})},e}();t.TextStateRender=o},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(210)),r(n(211))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(12),o=n(27),a=function(){function e(){}return Object.defineProperty(e.prototype,"type",{get:function(){return"editable"},enumerable:!0,configurable:!0}),e.prototype.updateParams=function(e){this.params=e},e.prototype.renderFixed=function(){var e=this.params.payload,t=e.color,n=e.highlight,a=e.selectedBy,s=t[0],c=t[1],u=t[2];if(n||a!==i.BelongsTo.None){var p=o.findFixedRectangle(this.params),l=p.left,h=p.right,f=p.top,d={left:l,top:f,width:h-l,height:p.bottom-f,borderColor:"rgb("+s+","+c+","+u+")"};return r.createElement("div",{key:this.params.key,className:"highlight-box",style:d})}return null},e}();t.EditableRender=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(27),o=function(){function e(){}return Object.defineProperty(e.prototype,"type",{get:function(){return"selectedGroup"},enumerable:!0,configurable:!0}),e.prototype.updateParams=function(e){this.params=e},e.prototype.renderFixed=function(){var e=i.findFixedRectangle(this.params),t=e.left,n=e.right,o=e.top,a=e.bottom,s=this.params.payload.color,c=s[0],u=s[1],p=s[2],l={left:t,top:o,width:n-t,height:a-o,borderColor:"rgb("+c+","+u+","+p+")",backgroundColor:"rgba("+c+","+u+","+p+",0.15)"};return r.createElement("div",{key:this.params.key,className:"selected-group",style:l})},e}();t.SelectedGroupRender=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(12),o=n(27),a=function(){function e(e){this.deviceType=e,this.maskHtmlElement=null,this.operationPointsMap={}}return Object.defineProperty(e.prototype,"type",{get:function(){return"editor"},enumerable:!0,configurable:!0}),e.prototype.updateParams=function(e){this.params=e},e.prototype.findMouseOrTouchEventTargetId=function(e){if(this.maskHtmlElement&&this.latestTargetId)return this.latestTargetId;for(var t in this.operationPointsMap)if(this.operationPointsMap[t]===e.target)return this.latestTargetId=t,t},e.prototype.mapTargetIdToCursorMark=function(e){switch(e){case"LT":case"RB":return"cursor-nwse";case"LB":case"RT":return"cursor-nesw";case"T":case"B":return"cursor-ns";case"L":case"R":return"cursor-ew"}return""},e.prototype.renderFixed=function(){var e=this,t=o.findFixedRectangle(this.params),n=t.left,a=t.right,s=t.top,c=t.bottom,u=this.params.payload,p=u.color,l=u.belongs,h=u.isDragging,f=u.isUniformScale,d="rgb("+p[0]+","+p[1]+","+p[2]+")",y=a-n,g=c-s,m=this.deviceType===i.DeviceType.Desktop?4.5:17.5,b={left:n,top:s,width:y,height:g,borderColor:d};return l===i.BelongsTo.Me?[r.createElement("div",{key:this.params.key,className:"editor-box",style:b},this.renderOperationPoint("left-top cursor-nwse","LT",d),this.renderOperationPoint("right-top cursor-nesw","RT",d),this.renderOperationPoint("left-bottom cursor-nesw","LB",d),this.renderOperationPoint("right-bottom cursor-nwse","RB",d),!f&&this.renderOperationPoint("top cursor-ns","T",d,{left:y/2-m}),!f&&this.renderOperationPoint("right cursor-ew","R",d,{top:g/2-m}),!f&&this.renderOperationPoint("bottom cursor-ns","B",d,{left:y/2-m}),!f&&this.renderOperationPoint("left cursor-ew","L",d,{top:g/2-m})),h&&this.latestTargetId&&r.createElement("div",{key:this.params.key+"-mask",ref:function(t){return e.maskHtmlElement=t},className:"editor-box-mask "+this.mapTargetIdToCursorMark(this.latestTargetId)})]:r.createElement("div",{key:this.params.key,className:"editor-box",style:b})},e.prototype.renderOperationPoint=function(e,t,n,o){var a=this;return void 0===o&&(o={}),this.deviceType===i.DeviceType.Touch?r.createElement("div",{className:"operation-point-touch "+e,ref:function(e){return a.operationPointsMap[t]=e},style:o},r.createElement("div",{style:{backgroundColor:n}})):(o.backgroundColor=n,r.createElement("div",{className:"operation-point-desktop "+e,ref:function(e){return a.operationPointsMap[t]=e},style:o}))},e}();t.EditorRender=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(110),i=n(214),o=n(58),a=function(){function e(e,t,n){var a=this;this.setSVGWhiteboard=function(e){a.desktopTransfer.ref=e,a.operationProxy.setHTMLDivElement(e)},this.filterKeyEvents=function(e,t){return!a.tagBoxes.some(function(e){return"myText"===e.type})&&(!!a.desktopTransfer.filterKeyEvents(e,t)&&(t===r.KeyEventStatus.Up?a.onKeyUp&&a.onKeyUp(e):a.onKeyDown&&a.onKeyDown(e),!a.willInterceptKeyboardEvent||!a.willInterceptKeyboardEvent(e)))},this.operator=e,this.tagBoxes=n,this.desktopTransfer=new i.DesktopTransfer(e,{spaceKeyEvent:function(e){a.onSpaceKeyEvent&&a.onSpaceKeyEvent(e)}}),this.operationProxy=new r.OperationProxy(e,t,{filterMouseEvents:function(e,t){return a.filterMouseOrTouchEvents(e,t,o.TagBoxEventKind.Mouse)},filterTouchEvents:function(e,t,n){return a.filterMouseOrTouchEvents(e,n,o.TagBoxEventKind.Touch)},filterKeyEvents:this.filterKeyEvents,onIsMouseOrTouchOperatingChanged:function(e){a.onIsMouseOrTouchOperatingChanged&&a.onIsMouseOrTouchOperatingChanged(e)}})}return Object.defineProperty(e.prototype,"disableOperations",{get:function(){return this.operationProxy.disableOperations},set:function(e){this.operationProxy.disableOperations=e},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.operationProxy.disableOperations=!1},e.prototype.filterMouseOrTouchEvents=function(e,t,n){switch(t){case r.EventStatus.Start:return this.filterMouseStartEvents(e,t,n);case r.EventStatus.Move:case r.EventStatus.End:return this.filterMouseMoveAndEndEvents(e,t);default:return}},e.prototype.filterMouseStartEvents=function(e,t,n){if(!this.isEventOnTextareaLayout(e)&&this.desktopTransfer.filterMouseOrTouchEvents(e,t)){var r=this.interceptMouseOrTouchEvent(e,n),i=r.targetsMap;if(!r.intercepted)return i}},e.prototype.isEventOnTextareaLayout=function(e){for(var t=e.target;t;){if("textarea-layout"===t.className)return!0;t=t.parentElement}return!1},e.prototype.filterMouseMoveAndEndEvents=function(e,t){return this.desktopTransfer.filterMouseOrTouchEvents(e,t)?{}:void 0},e}();t.WhiteboardEventHandler=a},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(110),a=n(111);!function(e){e[e.None=0]="None",e[e.Operating=1]="Operating"}(i||(i={}));var s=function(){function e(e,t){this.operator=e,this.keyCallbacks=t,this.isSpaceKeyDown=!1,this.operationStatus=i.None,this.latestMousePosition={x:0,y:0},this.keyCallbacks=r({},t)}return e.prototype.filterKeyEvents=function(e,t){return" "!==e.key||(this.isSpaceKeyDown=t===o.KeyEventStatus.Down,this.keyCallbacks.spaceKeyEvent(this.isSpaceKeyDown),!1===this.isSpaceKeyDown&&(this.operationStatus=i.None),!1)},e.prototype.filterMouseOrTouchEvents=function(e,t){if(!this.isSpaceKeyDown)return!0;switch(t){case o.EventStatus.Start:this.operationStatus=i.Operating;var n=this.eventPosition(e);this.latestMousePosition.x=n.x,this.latestMousePosition.y=n.y;break;case o.EventStatus.Move:if(this.operationStatus===i.Operating){n=this.eventPosition(e);this.operator.onViewTransform({offsetX:n.x-this.latestMousePosition.x,offsetY:n.y-this.latestMousePosition.y,x:n.x,y:n.y,scale:0}),this.latestMousePosition.x=n.x,this.latestMousePosition.y=n.y}break;case o.EventStatus.End:this.operationStatus=i.None}return!1},e.prototype.eventPosition=function(e){var t=a.pagePositionWith(this.ref),n=t.x,r=t.y,i=e,o=i.pageX,s=i.pageY;return{x:Math.floor(o)-n,y:Math.floor(s)-r}},e}();t.DesktopTransfer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(216);t.TextareaLayout=r.TextareaLayout},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(217),a=n(218),s=n(17),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textareaRefStyle=new o.TextareaRefStyle,t.defaultText="",t.shadow=null,t.setupTextarea=function(e){t.textareaRefStyle.updateTextareaRef(e),t.props.focusTextareaSetter&&e&&t.props.focusTextareaSetter(t.focusTextarea)},t.focusTextarea=function(e){var n=t.textareaRefStyle.textarea;e?(n.style.visibility="visible",n.focus()):(n.style.width="100px",n.style.height="100px",n.style.visibility="hidden",n.blur())},t.setTextareaShadowRef=function(e){e?(t.shadow=new a.TextEditorShadow(e,t.props.payload),t.props.payload&&t.updateColorAndSize(t.props.payload.textColor,t.props.payload.textSize)):(t.shadow.release(),t.shadow=null)},t.onTextAreaChange=function(e){var n=e.target.value;if(t.props.operator){t.shadow.updateText(n);var r=t.createTextareaBox(t.shadow);t.props.operator.onTextareaUpdate(r),t.textareaRefStyle.assertSize(r.width,r.height)}},t}return r(t,e),t.prototype.componentWillReceiveProps=function(e){!this.props.payload||!e.payload||this.props.payload===e.payload||s.checkValueIsEquals(this.props.payload.color,e.payload.color)&&this.isNumberEquals(this.props.payload.textSize,e.payload.textSize)||this.updateColorAndSize(e.payload.color,e.payload.textSize),e.payload&&!this.props.payload?(this.textareaRefStyle.textarea.value=e.payload.originalText,this.updateColorAndSize(e.payload.color,e.payload.textSize),this.focusTextarea(!0)):!e.payload&&this.props.payload&&(this.textareaRefStyle.textarea.value="",this.focusTextarea(!1))},t.prototype.isNumberEquals=function(e,t){return!(!Number.isNaN(e)||!Number.isNaN(t))||e===t},t.prototype.updateColorAndSize=function(e,t){this.shadow&&this.shadow.updateColorAndSize(e,t);var n=e[0],r=e[1],i=e[2];this.textareaRefStyle.textarea.style.color="rgb("+n+","+r+","+i+")",this.textareaRefStyle.textarea.style.fontSize=t+"px"},t.prototype.createTextareaBox=function(e){for(var t=e.textLineMaxWidth,n=e.textareaHeight,r=e.textLineRectList.length,i=0,o=0,a=e.textLineRectList;o<a.length;o++){i+=a[o].height}for(var s=(n-i)/r,c=[],u=s/2,p=0;p<e.textLineRectList.length;++p){var l=e.textLineRectList[p],h=u+l.height/2;this.pushTextLineReact(c,l,h),u+=l.height+s}return{scale:this.props.payload.scale,width:t,height:n,textLines:c,originalText:e.originalText}},t.prototype.pushTextLineReact=function(e,t,n){for(var r=0,i=t.textRanges;r<i.length;r++){var o=i[r];e.push({dx:o.begin,dy:n,textLength:o.length,text:o.text})}},t.prototype.render=function(){var e,t=this.props,n=t.x,r=t.y,o=t.width,a=t.height,s=t.payload;return s?(this.textareaRefStyle.updateRectangle(n,r,o,a,s),e={width:0,height:0,left:this.props.x,top:this.props.y,transform:"scale("+this.props.scale*s.scale+")"}):e={left:0,top:0,width:0,height:0},i.createElement("div",{className:"textarea-layout"},i.createElement("div",{className:"textarea-wrapper",style:e},i.createElement("textarea",{defaultValue:this.props.payload?this.defaultText:"",ref:this.setupTextarea,onChange:this.onTextAreaChange})),this.props.payload&&i.createElement("div",{className:"textarea-shadow",ref:this.setTextareaShadowRef}))},t}(i.Component);t.TextareaLayout=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=4,i=8;function o(e){return Math.max(r,e)}function a(e,t){return Math.max(t+i,e)}var s=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0,this.textSize=16,this.textColor=[0,0,0]}return Object.defineProperty(e.prototype,"textarea",{get:function(){return this.textareaRef},enumerable:!0,configurable:!0}),e.prototype.updateTextareaRef=function(e){this.textareaRef=e,this.refreshSize(),this.refreshPositionAndOthers()},e.prototype.assertSize=function(e,t){this.width=o(e),this.height=a(t,this.textSize),this.refreshSize()},e.prototype.updateRectangle=function(e,t,n,r,i){var s=i.textColor,c=i.textSize,u=i.scale;this.x=e,this.y=t,this.width=o(n/u),this.height=a(r/u,c),this.textSize=c,this.textColor=s,this.refreshSize(),this.refreshPositionAndOthers()},e.prototype.refreshSize=function(){this.textareaRef&&(this.textareaRef.style.width=this.width+"px",this.textareaRef.style.height=this.height+"px")},e.prototype.refreshPositionAndOthers=function(){if(this.textareaRef){var e=this.textColor,t=e[0],n=e[1],r=e[2];this.textareaRef.style.color="rgb("+t+","+n+","+r+")",this.textareaRef.style.fontSize=this.textSize+"px",this.textareaRef.style.left=this.x+"px",this.textareaRef.style.top=this.y+"px"}},e}();t.TextareaRefStyle=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(219),i=function(){function e(e,t){this.textLineMaxWidth=0,this.textareaHeight=0,this.textLineRectList=[];var n=t.textColor,i=t.textSize,o=t.originalText,a=n[0],s=n[1],c=n[2];this.textGauger=new r.TextGauger(e,n,i),this.textarea=document.createElement("textarea"),this.textarea.style.color="rgb("+a+","+s+","+c+")",this.textarea.style.fontSize=i+"px",e.appendChild(this.textarea),this.updateText(o)}return e.prototype.release=function(){this.textarea.remove(),this.textGauger.dispose()},e.prototype.updateColorAndSize=function(e,t){var n=e[0],r=e[1],i=e[2];this.textarea.style.color="rgb("+n+","+r+","+i+")",this.textarea.style.fontSize=t+"px",this.textGauger.updateColorAndSize(e,t),this.updateText(this.originalText)},e.prototype.updateText=function(e){var t=this;this.originalText=e;var n=e.split("\n");0===n.length?(this.textLineRectList=[],this.textLineMaxWidth=0,this.textareaHeight=this.textGauger.gaugeHeight()):(this.textLineRectList=n.map(function(e){""===e&&(e=" ");var n=t.textGauger.gaugeText(e);return n.text=e,n}),this.textLineMaxWidth=Math.max.apply(Math,this.textLineRectList.map(function(e){return e.width})),this.textareaHeight=this.countTextareaHeight(e))},e.prototype.countTextareaHeight=function(e){return 0===this.textLineRectList.length?0:1===this.textLineRectList.length?this.textLineRectList[0].height:(this.textarea.textContent=e,this.textarea.style.width=this.textLineMaxWidth+"px",this.textarea.style.height="auto",this.textarea.scrollHeight)},e}();t.TextEditorShadow=i},function(e,t,n){"use strict";function r(e){return e.replace(/[ <>&"\t]/g,function(e){switch(e){case" ":return"&nbsp;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;";case"\t":return"&#9;";default:return e}})}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this.shadow=e,this.span=document.createElement("span"),e.appendChild(this.span),this.updateColorAndSize(t,n)}return e.prototype.updateColorAndSize=function(e,t){var n=e[0],r=e[1],i=e[2];this.span.style.color="rgb("+n+","+r+","+i+")",this.span.style.fontSize=t+"px"},e.prototype.dispose=function(){this.span.remove()},e.prototype.gaugeHeight=function(){return this.gaugeTextRect("&nbsp;").height},e.prototype.gaugeText=function(e){var t=e.match(/([^ ]+| +)/g);if(!t)return{width:0,height:0,textRanges:[]};for(var n=t.map(r),i=0,o=0,a="",s=[],c=0;c<n.length;++c){a+=n[c];var u=t[c],p=this.gaugeTextRect(a),l=p.width-i;this.isSpaces(u)||s.push({begin:i,length:l,text:u}),i=p.width,o=p.height}return{width:i,height:o,textRanges:s}},e.prototype.gaugeTextRect=function(e){return this.span.innerHTML=e,this.span.getBoundingClientRect()},e.prototype.isSpaces=function(e){return" "===e[0]},e}();t.TextGauger=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),s=n(1),c=n(0),u=n(54),p=n(113),l=n(108),h=n(55),f=n(112),d=function(e){function t(n){var r=e.call(this,n.animationTickGenFactory,n.deviceType,n.screenType,n.callbacks,!0,!1)||this;return r.didLoadFirstFrame=!1,r.observerMode=p.ObserverMode.Directory,r.followUserId=void 0,r.followMemberId=void 0,r.onPhaseChanged=function(e){var n=!1;r.didLoadFirstFrame||e===c.ReconstructorPhase.WaitingFirstFrame||(r.afterLoadFirstFrame(),r.didLoadFirstFrame=!0,n=!0),r.callbacks.onPhaseChanged&&r.callbacks.onPhaseChanged(t.covertPhase(e)),r.callbacks.onLoadFirstFrame&&n&&r.callbacks.onLoadFirstFrame()},r.beginPinch=function(){r.observerMode!==p.ObserverMode.Freedom&&(r.observerMode=p.ObserverMode.Freedom,r.stateTrigger.setAndCompare({observerState:r.getObserverState()}))},r.mouseCursorDefinition=n.mouseCursorDefinition,r.disableOperationsBeforeLoadFirstFrame=n.disableOperations,r.operator=r.createWhiteboardOperator(),r.zoomMaxScale=n.zoomMaxScale,r.zoomMinScale=n.zoomMinScale,r}return r(t,e),t.prototype.setupMediaPlayer=function(e,t,n){return i(this,void 0,void 0,function(){var t;return o(this,function(r){switch(r.label){case 0:return t=this,[4,n.createReconstructor(e,this.createReconstructorCallbacks())];case 1:return t.mediaAdapter=r.sent(),[2]}})})},t.prototype.setupMediaPlayerWithMediaAdapter=function(e,t,n){return i(this,void 0,void 0,function(){var r;return o(this,function(i){switch(i.label){case 0:return r=this,[4,n.create(e,t,this.createReconstructorCallbacks())];case 1:return r.mediaAdapter=i.sent(),[2]}})})},t.prototype.createReconstructorCallbacks=function(){var e=this;return{onRootChanged:function(){return e.notifyRootChanged()},onEventFire:function(t){return e.dispatchMagixEventWithObject(t)},escapeObjectFilter:s.isValidElement,onPhaseChanged:this.onPhaseChanged,onScheduleTimeChanged:this.callbacks.onScheduleTimeChanged,onCatchErrorWhenFetchBuffer:this.callbacks.onCatchErrorWhenFetchBuffer,onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame}},t.prototype.afterLoadFirstFrame=function(){this.disableOperationsBeforeLoadFirstFrame!==this.displayerSyncNode.props.disableOperations&&this.displayerSyncNode.setProps({disableOperations:this.disableOperationsBeforeLoadFirstFrame}),this.setup(),this.syncFollowMemberId();var e=this.applianceManager,t=e.getScenes();this.stateTrigger=new f.StateTrigger({stateKeys:["observerState","globalState","roomMembers","pptImages"],state:{viewState:e.getViewState(this.followMemberId),observerState:this.getObserverState(),globalState:e.getGlobalState(),roomMembers:e.getMemberDisplayers().map(u.DisplayerImplement.covertMemberDisplayerToMember),scenes:t,pptImages:t.map(u.DisplayerImplement.covertSceneToPpt)},onStateChanged:this.callbacks.onPlayerStateChanged});var n=this.createDisplayerChildAnimation();this.sorter=new h.EventAndViewSorter(this.deviceType,n,this.camera,this.zoomMaxScale,this.zoomMinScale,{beginPinch:this.beginPinch})},t.prototype.notifyRootChanged=function(e){if(void 0===e&&(e=!1),this.didLoadFirstFrame){this.syncFollowMemberId();var t=this.applianceManager,n=t.getScenes(),r=this.stateTrigger.setAndCompare({viewState:this.applianceManager.getViewState(this.followMemberId),observerState:this.getObserverState(),globalState:t.getGlobalState(),roomMembers:t.getMemberDisplayers().map(u.DisplayerImplement.covertMemberDisplayerToMember),scenes:n,pptImages:n.map(u.DisplayerImplement.covertSceneToPpt)});e?this.camera.setRectangle(this.stateTrigger.state.viewState):r.viewState&&this.observerMode===p.ObserverMode.Directory&&this.camera.setRectangle(r.viewState.target)}this.refreshDisplayer()},t.prototype.syncFollowMemberId=function(){void 0===this.followUserId?this.followMemberId=void 0:this.followMemberId=this.applianceManager.getMemberIdWithUserId(this.followUserId)},t.prototype.getObserverState=function(){return void 0!==this.followMemberId?{mode:this.observerMode,observerId:this.followMemberId,followUserId:this.followUserId,observerInformation:this.applianceManager.getInformationWithMemberId(this.followMemberId)}:{mode:this.observerMode}},t.prototype.memberState=function(e){return this.mediaAdapter.triggerObject.getMemberState(e)},t.prototype.bindHtmlElement=function(e){this.element!==e&&(this.element&&l.bindPlayer(this.element,null),this.element=e,this.element&&(l.bindPlayer(this.element,{player:this}),this.refreshViewSize()))},t.prototype.refreshViewSize=function(){this.element&&this.refreshViewSizeWithElement(this.element)},t.prototype.setObserverMode=function(e){this.observerMode!==e&&(this.observerMode=e,this.afterUpdateObserverState())},t.prototype.setFollowUserId=function(e){this.followUserId!==e&&(this.followUserId=e,this.afterUpdateObserverState())},t.prototype.cleanFollowUserId=function(){void 0!==this.followUserId&&(this.followUserId=void 0,this.afterUpdateObserverState())},t.prototype.afterUpdateObserverState=function(){this.stateTrigger.setAndCompare({observerState:this.getObserverState()}),this.notifyRootChanged(!0)},Object.defineProperty(t.prototype,"disableOperations",{get:function(){return this.didLoadFirstFrame?this.disableOperationsBeforeLoadFirstFrame:this.displayerSyncNode.props.disableOperations},set:function(e){this.didLoadFirstFrame?this.disableOperationsBeforeLoadFirstFrame=e:this.displayerSyncNode.setProps({disableOperations:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"observerId",{get:function(){if(this.didLoadFirstFrame){var e=this.stateTrigger.exportState.observerState.observerId;if(void 0!==e)return e}return c.AdminObserverId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){if(!this.didLoadFirstFrame)throw new Error("can't read state before load first frame");return this.stateTrigger.exportState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applianceManager",{get:function(){return this.mediaAdapter.triggerObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAppliance",{get:function(){return"selector"},enumerable:!0,configurable:!0}),t.prototype.shouldDisplayNow=function(){return!!this.mediaAdapter},t.prototype.onCameraTransformChanged=function(e){},Object.defineProperty(t.prototype,"uuid",{get:function(){return this.mediaAdapter.uuid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"phase",{get:function(){return t.covertPhase(this.mediaAdapter.phase)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scheduleTime",{get:function(){return this.mediaAdapter.scheduleTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeDuration",{get:function(){return this.mediaAdapter.timeDuration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"framesCount",{get:function(){return this.mediaAdapter.framesCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beginTimestamp",{get:function(){return this.mediaAdapter.beginTimestamp},enumerable:!0,configurable:!0}),t.prototype.play=function(){this.mediaAdapter.play()},t.prototype.pause=function(){this.mediaAdapter.pause()},t.prototype.stop=function(){this.mediaAdapter.stop(),this.dispose()},t.prototype.seekToScheduleTime=function(e){this.mediaAdapter.seekToScheduleTime(e)},t.prototype.zoomChange=function(e){this.sorter.zoomChange(e)},t.covertPhase=function(e){switch(e){case c.ReconstructorPhase.WaitingFirstFrame:return p.PlayerPhase.WaitingFirstFrame;case c.ReconstructorPhase.Playing:return p.PlayerPhase.Playing;case c.ReconstructorPhase.Pause:return p.PlayerPhase.Pause;case c.ReconstructorPhase.Stop:return p.PlayerPhase.Stop;case c.ReconstructorPhase.TouchedEnding:return p.PlayerPhase.TouchedEnding;case c.ReconstructorPhase.Buffering:case c.ReconstructorPhase.Seeking:return p.PlayerPhase.Buffering}},t.prototype.createWhiteboardOperator=function(){var e=this,t=function(){},n={deviceType:this.deviceType,willDisplayMouseCursor:!1,onTextareaUpdate:t,onKeyUp:t,onKeyDown:t,onMouseDown:t,onMouseUp:t,onMouseMove:t,onMouseLeave:t,onViewTransform:function(t){e.deviceType===a.DeviceType.Desktop&&e.sorter.viewTransform(t)},onTouchStart:function(t){e.deviceType===a.DeviceType.Touch&&e.sorter.touchStart(t)},onTouchMove:function(t){e.deviceType===a.DeviceType.Touch&&e.sorter.touchMove(t)},onTouchEnd:function(t){e.deviceType===a.DeviceType.Touch&&e.sorter.touchEnd(t)},onTouchCancel:function(t){e.deviceType===a.DeviceType.Touch&&e.sorter.touchCancel(t)}};return Object.freeze(n)},t}(u.DisplayerImplement);t.PlayerImplement=d}]);